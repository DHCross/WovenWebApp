(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3512:function(e,t,i){Promise.resolve().then(i.bind(i,7340))},7340:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var n=i(7437),r=i(2265);function l(){let e=(0,r.useRef)(null),[t,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),p=async t=>{var n;let r=null===(n=t.target.files)||void 0===n?void 0:n[0];if(r){o(null),s(!0);try{console.log("[UI] Upload started");let e=await r.text(),t=JSON.parse(e);console.log("[UI] Upload parsed JSON, posting to /api/poetic-brain");let n=await fetch("/api/poetic-brain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await n.json();if(console.log("[UI] Upload response status:",n.status,"body:",l),!n.ok)throw Error((null==l?void 0:l.error)||"Upload failed");i(l),c(!0)}catch(e){console.error("[UI] Upload error:",e),o((null==e?void 0:e.message)||"Something went wrong")}finally{s(!1),e.current&&(e.current.value="")}}};return(0,n.jsxs)("main",{style:{maxWidth:720,margin:"0 auto",display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsx)("h1",{style:{margin:0},children:"Poetic Brain – Test Upload"}),(0,n.jsx)("p",{children:"Upload a combined Mirror + Symbolic Weather JSON to hit the API."}),(0,n.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,n.jsx)("button",{onClick:()=>{var t;null===(t=e.current)||void 0===t||t.click()},disabled:a,"aria-busy":a,children:a?"Uploading…":"Upload JSON"}),(0,n.jsx)("input",{ref:e,type:"file",accept:"application/json",style:{position:"absolute",left:-9999,width:1,height:1,opacity:0},onChange:p})]}),l&&(0,n.jsx)("div",{"data-testid":"upload-error",role:"alert",style:{color:"#b91c1c"},children:l}),d&&(0,n.jsx)("div",{"data-testid":"upload-success",style:{color:"#16a34a"},children:"Upload complete."}),(0,n.jsx)("section",{"data-testid":"mirror-output",style:{padding:12,border:"1px solid #e5e7eb",borderRadius:8,minHeight:80,display:"flex",flexDirection:"column",gap:6},children:(null==t?void 0:t.draft)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["picture: ",String(t.draft.picture||"")]}),(0,n.jsxs)("div",{children:["feeling: ",String(t.draft.feeling||"")]}),(0,n.jsxs)("div",{children:["container: ",String(t.draft.container||"")]}),(0,n.jsxs)("div",{children:["option: ",String(t.draft.option||"")]}),(0,n.jsxs)("div",{children:["next_step: ",String(t.draft.next_step||"")]})]}):t?(0,n.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:JSON.stringify(t,null,2)}):(0,n.jsx)("span",{style:{color:"#6b7280"},children:"No result yet."})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3512)}),_N_E=e.O()}]);