"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/poetic-brain/route";
exports.ids = ["app/api/poetic-brain/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_dancross_Documents_GitHub_WovenWebApp_app_api_poetic_brain_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/poetic-brain/route.ts */ \"(rsc)/./app/api/poetic-brain/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/poetic-brain/route\",\n        pathname: \"/api/poetic-brain\",\n        filename: \"route\",\n        bundlePath: \"app/api/poetic-brain/route\"\n    },\n    resolvedPagePath: \"/Users/dancross/Documents/GitHub/WovenWebApp/app/api/poetic-brain/route.ts\",\n    nextConfigOutput,\n    userland: _Users_dancross_Documents_GitHub_WovenWebApp_app_api_poetic_brain_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/poetic-brain/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwb2V0aWMtYnJhaW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBvZXRpYy1icmFpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBvZXRpYy1icmFpbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRhbmNyb3NzJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGV292ZW5XZWJBcHAlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZGFuY3Jvc3MlMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZXb3ZlbldlYkFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Zlbi13ZWItYXBwLz9iZDBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9kYW5jcm9zcy9Eb2N1bWVudHMvR2l0SHViL1dvdmVuV2ViQXBwL2FwcC9hcGkvcG9ldGljLWJyYWluL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wb2V0aWMtYnJhaW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wb2V0aWMtYnJhaW5cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3BvZXRpYy1icmFpbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9kYW5jcm9zcy9Eb2N1bWVudHMvR2l0SHViL1dvdmVuV2ViQXBwL2FwcC9hcGkvcG9ldGljLWJyYWluL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wb2V0aWMtYnJhaW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/poetic-brain/route.ts":
/*!***************************************!*\
  !*** ./app/api/poetic-brain/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_pipeline_mathBrainAdapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/pipeline/mathBrainAdapter */ \"(rsc)/./lib/pipeline/mathBrainAdapter.ts\");\n/* harmony import */ var _lib_pipeline_mirrorRenderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/pipeline/mirrorRenderer */ \"(rsc)/./lib/pipeline/mirrorRenderer.ts\");\n\n\n\n\n// Permissive schemas for two common inputs\n// Common fragments\nconst NameLike = zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1).max(200);\nconst PersonASchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    name: NameLike.optional(),\n    details: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        name: NameLike.optional()\n    }).partial().optional()\n}).partial();\nconst ElementsSchema = zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.number().finite()).refine((rec)=>Object.values(rec).every((v)=>Number.isFinite(v) && v >= 0 && v <= 1), {\n    message: \"elements values must be between 0 and 1\"\n});\nconst AspectSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    planets: zod__WEBPACK_IMPORTED_MODULE_3__.array(NameLike).min(2).max(3),\n    aspect: NameLike,\n    orb: zod__WEBPACK_IMPORTED_MODULE_3__.number().finite().optional(),\n    exact_time: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n}).partial();\nconst PeriodSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    start: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    end: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    elements: ElementsSchema.optional(),\n    aspects: zod__WEBPACK_IMPORTED_MODULE_3__.array(AspectSchema).optional()\n}).partial();\nconst MirrorContractSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    person_a: PersonASchema.optional(),\n    start_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    end_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n}).passthrough();\nconst MirrorDirectiveSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    _format: zod__WEBPACK_IMPORTED_MODULE_3__.literal(\"mirror_directive_json\").optional(),\n    person_a: PersonASchema.optional(),\n    mirror_contract: MirrorContractSchema.optional(),\n    contract: zod__WEBPACK_IMPORTED_MODULE_3__.any().optional()\n}).passthrough().refine((obj)=>Boolean(obj._format || obj.person_a || obj.mirror_contract || obj.contract), {\n    message: \"mirror directive payload missing required markers\"\n});\nconst MirrorSymbolicWeatherSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    _format: zod__WEBPACK_IMPORTED_MODULE_3__.literal(\"mirror-symbolic-weather-v1\").optional(),\n    mirror_contract: MirrorContractSchema.optional(),\n    contract: zod__WEBPACK_IMPORTED_MODULE_3__.any().optional(),\n    person_a: PersonASchema.optional(),\n    symbolic_weather: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        periods: zod__WEBPACK_IMPORTED_MODULE_3__.array(PeriodSchema).min(1).optional()\n    }).partial().optional()\n}).passthrough().refine((obj)=>Boolean(obj._format || obj.symbolic_weather || obj.mirror_contract || obj.contract || obj.person_a), {\n    message: \"combined mirror+weather payload missing required markers\"\n});\nfunction extractName(payload) {\n    const a = payload?.person_a || payload?.personA || {};\n    return a?.name || a?.details?.name || payload?.mirror_contract?.person_a?.name || null;\n}\nfunction extractWindow(payload) {\n    const mc = payload?.mirror_contract || payload?.contract || {};\n    const start = mc?.start_date || payload?.symbolic_weather?.periods?.[0]?.start;\n    const end = mc?.end_date || payload?.symbolic_weather?.periods?.[0]?.end;\n    return {\n        start,\n        end\n    };\n}\nfunction extractElements(payload) {\n    const p = payload?.symbolic_weather?.periods?.[0];\n    if (p?.elements && typeof p.elements === \"object\") return p.elements;\n    return null;\n}\nfunction pickPrimaryElement(elements) {\n    if (!elements) return null;\n    const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\");\n    if (!entries.length) return null;\n    entries.sort((a, b)=>b[1] - a[1]);\n    return entries[0][0];\n}\nasync function POST(request) {\n    try {\n        const data = await request.json();\n        // Accept either mirror directive or combined format\n        const isDirective = MirrorDirectiveSchema.safeParse(data).success;\n        const isCombined = MirrorSymbolicWeatherSchema.safeParse(data).success;\n        if (!isDirective && !isCombined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unsupported payload. Provide mirror_directive_json or mirror-symbolic-weather-v1.\"\n            }, {\n                status: 400\n            });\n        }\n        // Pipeline: derive minimal geometry, then render mirror draft\n        const geometry = await (0,_lib_pipeline_mathBrainAdapter__WEBPACK_IMPORTED_MODULE_1__.processWithMathBrain)(data);\n        const draft = await (0,_lib_pipeline_mirrorRenderer__WEBPACK_IMPORTED_MODULE_2__.renderMirrorDraft)(data, geometry);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            type: \"mirror\",\n            version: \"1.0\",\n            draft\n        });\n    } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(\"Error processing poetic brain request:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0Isc0JBQXNCOEIsU0FBUyxDQUFDSCxNQUFNSSxPQUFPO1FBQ2pFLE1BQU1DLGFBQWF4Qiw0QkFBNEJzQixTQUFTLENBQUNILE1BQU1JLE9BQU87UUFDdEUsSUFBSSxDQUFDRixlQUFlLENBQUNHLFlBQVk7WUFDL0IsT0FBTzNFLHFEQUFZQSxDQUFDdUUsSUFBSSxDQUN0QjtnQkFBRUssT0FBTztZQUFvRixHQUM3RjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBQ0EsOERBQThEO1FBQzlELE1BQU1DLFdBQVcsTUFBTTVFLG9GQUFvQkEsQ0FBQ29FO1FBQzVDLE1BQU1TLFFBQVEsTUFBTTVFLCtFQUFpQkEsQ0FBQ21FLE1BQU1RO1FBRTVDLE9BQU85RSxxREFBWUEsQ0FBQ3VFLElBQUksQ0FBQztZQUFFUyxNQUFNO1lBQVVDLFNBQVM7WUFBT0Y7UUFBTTtJQUNuRSxFQUFFLE9BQU9ILE9BQU87UUFDZCxzQ0FBc0M7UUFDdENNLFFBQVFOLEtBQUssQ0FBQywwQ0FBMENBO1FBQ3hELE9BQU81RSxxREFBWUEsQ0FBQ3VFLElBQUksQ0FBQztZQUFFSyxPQUFPO1FBQXdCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Zlbi13ZWItYXBwLy4vYXBwL2FwaS9wb2V0aWMtYnJhaW4vcm91dGUudHM/N2Y3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHByb2Nlc3NXaXRoTWF0aEJyYWluIH0gZnJvbSAnQC9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlcic7XG5pbXBvcnQgeyByZW5kZXJNaXJyb3JEcmFmdCB9IGZyb20gJ0AvbGliL3BpcGVsaW5lL21pcnJvclJlbmRlcmVyJztcblxuLy8gUGVybWlzc2l2ZSBzY2hlbWFzIGZvciB0d28gY29tbW9uIGlucHV0c1xuLy8gQ29tbW9uIGZyYWdtZW50c1xuY29uc3QgTmFtZUxpa2UgPSB6LnN0cmluZygpLm1pbigxKS5tYXgoMjAwKTtcbmNvbnN0IFBlcnNvbkFTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIG5hbWU6IE5hbWVMaWtlLm9wdGlvbmFsKCksXG4gICAgZGV0YWlsczogei5vYmplY3QoeyBuYW1lOiBOYW1lTGlrZS5vcHRpb25hbCgpIH0pLnBhcnRpYWwoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFydGlhbCgpO1xuXG5jb25zdCBFbGVtZW50c1NjaGVtYSA9IHpcbiAgLnJlY29yZCh6Lm51bWJlcigpLmZpbml0ZSgpKVxuICAucmVmaW5lKFxuICAgIChyZWMpID0+IE9iamVjdC52YWx1ZXMocmVjKS5ldmVyeSgodikgPT4gTnVtYmVyLmlzRmluaXRlKHYpICYmIHYgPj0gMCAmJiB2IDw9IDEpLFxuICAgIHsgbWVzc2FnZTogJ2VsZW1lbnRzIHZhbHVlcyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMScgfSxcbiAgKTtcblxuY29uc3QgQXNwZWN0U2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBwbGFuZXRzOiB6LmFycmF5KE5hbWVMaWtlKS5taW4oMikubWF4KDMpLFxuICAgIGFzcGVjdDogTmFtZUxpa2UsXG4gICAgb3JiOiB6Lm51bWJlcigpLmZpbml0ZSgpLm9wdGlvbmFsKCksXG4gICAgZXhhY3RfdGltZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFydGlhbCgpO1xuXG5jb25zdCBQZXJpb2RTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHN0YXJ0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZW5kOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZWxlbWVudHM6IEVsZW1lbnRzU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgYXNwZWN0czogei5hcnJheShBc3BlY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5wYXJ0aWFsKCk7XG5cbmNvbnN0IE1pcnJvckNvbnRyYWN0U2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBwZXJzb25fYTogUGVyc29uQVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHN0YXJ0X2RhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlbmRfZGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFzc3Rocm91Z2goKTtcblxuY29uc3QgTWlycm9yRGlyZWN0aXZlU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBfZm9ybWF0OiB6LmxpdGVyYWwoJ21pcnJvcl9kaXJlY3RpdmVfanNvbicpLm9wdGlvbmFsKCksXG4gICAgcGVyc29uX2E6IFBlcnNvbkFTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBtaXJyb3JfY29udHJhY3Q6IE1pcnJvckNvbnRyYWN0U2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY29udHJhY3Q6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgfSlcbiAgLnBhc3N0aHJvdWdoKClcbiAgLnJlZmluZShcbiAgICAob2JqKSA9PiBCb29sZWFuKG9iai5fZm9ybWF0IHx8IG9iai5wZXJzb25fYSB8fCBvYmoubWlycm9yX2NvbnRyYWN0IHx8IG9iai5jb250cmFjdCksXG4gICAgeyBtZXNzYWdlOiAnbWlycm9yIGRpcmVjdGl2ZSBwYXlsb2FkIG1pc3NpbmcgcmVxdWlyZWQgbWFya2VycycgfSxcbiAgKTtcblxuY29uc3QgTWlycm9yU3ltYm9saWNXZWF0aGVyU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBfZm9ybWF0OiB6LmxpdGVyYWwoJ21pcnJvci1zeW1ib2xpYy13ZWF0aGVyLXYxJykub3B0aW9uYWwoKSxcbiAgICBtaXJyb3JfY29udHJhY3Q6IE1pcnJvckNvbnRyYWN0U2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY29udHJhY3Q6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgICBwZXJzb25fYTogUGVyc29uQVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHN5bWJvbGljX3dlYXRoZXI6IHpcbiAgICAgIC5vYmplY3Qoe1xuICAgICAgICBwZXJpb2RzOiB6LmFycmF5KFBlcmlvZFNjaGVtYSkubWluKDEpLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgICAgLnBhcnRpYWwoKVxuICAgICAgLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5wYXNzdGhyb3VnaCgpXG4gIC5yZWZpbmUoXG4gICAgKG9iaikgPT4gQm9vbGVhbihvYmouX2Zvcm1hdCB8fCBvYmouc3ltYm9saWNfd2VhdGhlciB8fCBvYmoubWlycm9yX2NvbnRyYWN0IHx8IG9iai5jb250cmFjdCB8fCBvYmoucGVyc29uX2EpLFxuICAgIHsgbWVzc2FnZTogJ2NvbWJpbmVkIG1pcnJvcit3ZWF0aGVyIHBheWxvYWQgbWlzc2luZyByZXF1aXJlZCBtYXJrZXJzJyB9LFxuICApO1xuXG5mdW5jdGlvbiBleHRyYWN0TmFtZShwYXlsb2FkOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgYSA9IHBheWxvYWQ/LnBlcnNvbl9hIHx8IHBheWxvYWQ/LnBlcnNvbkEgfHwge307XG4gIHJldHVybiAoXG4gICAgYT8ubmFtZSB8fFxuICAgIGE/LmRldGFpbHM/Lm5hbWUgfHxcbiAgICBwYXlsb2FkPy5taXJyb3JfY29udHJhY3Q/LnBlcnNvbl9hPy5uYW1lIHx8XG4gICAgbnVsbFxuICApO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0V2luZG93KHBheWxvYWQ6IGFueSk6IHsgc3RhcnQ/OiBzdHJpbmc7IGVuZD86IHN0cmluZyB9IHtcbiAgY29uc3QgbWMgPSBwYXlsb2FkPy5taXJyb3JfY29udHJhY3QgfHwgcGF5bG9hZD8uY29udHJhY3QgfHwge307XG4gIGNvbnN0IHN0YXJ0ID0gbWM/LnN0YXJ0X2RhdGUgfHwgcGF5bG9hZD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcz8uWzBdPy5zdGFydDtcbiAgY29uc3QgZW5kID0gbWM/LmVuZF9kYXRlIHx8IHBheWxvYWQ/LnN5bWJvbGljX3dlYXRoZXI/LnBlcmlvZHM/LlswXT8uZW5kO1xuICByZXR1cm4geyBzdGFydCwgZW5kIH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50cyhwYXlsb2FkOiBhbnkpOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbCB7XG4gIGNvbnN0IHAgPSBwYXlsb2FkPy5zeW1ib2xpY193ZWF0aGVyPy5wZXJpb2RzPy5bMF07XG4gIGlmIChwPy5lbGVtZW50cyAmJiB0eXBlb2YgcC5lbGVtZW50cyA9PT0gJ29iamVjdCcpIHJldHVybiBwLmVsZW1lbnRzIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwaWNrUHJpbWFyeUVsZW1lbnQoZWxlbWVudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghZWxlbWVudHMpIHJldHVybiBudWxsO1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpLmZpbHRlcigoWywgdl0pID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyk7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IChiWzFdIGFzIG51bWJlcikgLSAoYVsxXSBhcyBudW1iZXIpKTtcbiAgcmV0dXJuIGVudHJpZXNbMF1bMF07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBBY2NlcHQgZWl0aGVyIG1pcnJvciBkaXJlY3RpdmUgb3IgY29tYmluZWQgZm9ybWF0XG4gICAgY29uc3QgaXNEaXJlY3RpdmUgPSBNaXJyb3JEaXJlY3RpdmVTY2hlbWEuc2FmZVBhcnNlKGRhdGEpLnN1Y2Nlc3M7XG4gICAgY29uc3QgaXNDb21iaW5lZCA9IE1pcnJvclN5bWJvbGljV2VhdGhlclNjaGVtYS5zYWZlUGFyc2UoZGF0YSkuc3VjY2VzcztcbiAgICBpZiAoIWlzRGlyZWN0aXZlICYmICFpc0NvbWJpbmVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVbnN1cHBvcnRlZCBwYXlsb2FkLiBQcm92aWRlIG1pcnJvcl9kaXJlY3RpdmVfanNvbiBvciBtaXJyb3Itc3ltYm9saWMtd2VhdGhlci12MS4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfSxcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIFBpcGVsaW5lOiBkZXJpdmUgbWluaW1hbCBnZW9tZXRyeSwgdGhlbiByZW5kZXIgbWlycm9yIGRyYWZ0XG4gICAgY29uc3QgZ2VvbWV0cnkgPSBhd2FpdCBwcm9jZXNzV2l0aE1hdGhCcmFpbihkYXRhKTtcbiAgICBjb25zdCBkcmFmdCA9IGF3YWl0IHJlbmRlck1pcnJvckRyYWZ0KGRhdGEsIGdlb21ldHJ5KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHR5cGU6ICdtaXJyb3InLCB2ZXJzaW9uOiAnMS4wJywgZHJhZnQgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHBvZXRpYyBicmFpbiByZXF1ZXN0OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInoiLCJwcm9jZXNzV2l0aE1hdGhCcmFpbiIsInJlbmRlck1pcnJvckRyYWZ0IiwiTmFtZUxpa2UiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJQZXJzb25BU2NoZW1hIiwib2JqZWN0IiwibmFtZSIsIm9wdGlvbmFsIiwiZGV0YWlscyIsInBhcnRpYWwiLCJFbGVtZW50c1NjaGVtYSIsInJlY29yZCIsIm51bWJlciIsImZpbml0ZSIsInJlZmluZSIsInJlYyIsIk9iamVjdCIsInZhbHVlcyIsImV2ZXJ5IiwidiIsIk51bWJlciIsImlzRmluaXRlIiwibWVzc2FnZSIsIkFzcGVjdFNjaGVtYSIsInBsYW5ldHMiLCJhcnJheSIsImFzcGVjdCIsIm9yYiIsImV4YWN0X3RpbWUiLCJQZXJpb2RTY2hlbWEiLCJzdGFydCIsImVuZCIsImVsZW1lbnRzIiwiYXNwZWN0cyIsIk1pcnJvckNvbnRyYWN0U2NoZW1hIiwicGVyc29uX2EiLCJzdGFydF9kYXRlIiwiZW5kX2RhdGUiLCJwYXNzdGhyb3VnaCIsIk1pcnJvckRpcmVjdGl2ZVNjaGVtYSIsIl9mb3JtYXQiLCJsaXRlcmFsIiwibWlycm9yX2NvbnRyYWN0IiwiY29udHJhY3QiLCJhbnkiLCJvYmoiLCJCb29sZWFuIiwiTWlycm9yU3ltYm9saWNXZWF0aGVyU2NoZW1hIiwic3ltYm9saWNfd2VhdGhlciIsInBlcmlvZHMiLCJleHRyYWN0TmFtZSIsInBheWxvYWQiLCJhIiwicGVyc29uQSIsImV4dHJhY3RXaW5kb3ciLCJtYyIsImV4dHJhY3RFbGVtZW50cyIsInAiLCJwaWNrUHJpbWFyeUVsZW1lbnQiLCJlbnRyaWVzIiwiZmlsdGVyIiwibGVuZ3RoIiwic29ydCIsImIiLCJQT1NUIiwicmVxdWVzdCIsImRhdGEiLCJqc29uIiwiaXNEaXJlY3RpdmUiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiaXNDb21iaW5lZCIsImVycm9yIiwic3RhdHVzIiwiZ2VvbWV0cnkiLCJkcmFmdCIsInR5cGUiLCJ2ZXJzaW9uIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/poetic-brain/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pipeline/mathBrainAdapter.ts":
/*!******************************************!*\
  !*** ./lib/pipeline/mathBrainAdapter.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processWithMathBrain: () => (/* binding */ processWithMathBrain)\n/* harmony export */ });\n// Lightweight adapter: derive a minimal geometry from the incoming payload.\n// In a full build this would call Math Brain. Here we synthesize a usable shape\n// from symbolic_weather periods and elements if present.\nasync function processWithMathBrain(input) {\n    const periods = input?.symbolic_weather?.periods;\n    const first = Array.isArray(periods) && periods.length > 0 ? periods[0] : null;\n    const aspects = [];\n    if (first?.aspects && Array.isArray(first.aspects)) {\n        for (const a of first.aspects){\n            const planets = Array.isArray(a.planets) ? a.planets : [];\n            if (planets.length >= 2) {\n                aspects.push({\n                    from: String(planets[0]).trim(),\n                    to: String(planets[1]).trim(),\n                    type: String(a.aspect || \"\").trim() || \"link\",\n                    orb: typeof a.orb === \"number\" ? a.orb : undefined\n                });\n            }\n        }\n    }\n    const elements = first?.elements && typeof first.elements === \"object\" ? first.elements : null;\n    const summary = {};\n    if (elements) {\n        const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\").sort((a, b)=>b[1] - a[1]);\n        if (entries.length) summary.dominantElement = entries[0][0];\n    }\n    return {\n        placements: [],\n        aspects,\n        summary\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBaUJBLDRFQUE0RTtBQUM1RSxnRkFBZ0Y7QUFDaEYseURBQXlEO0FBQ2xELGVBQWVBLHFCQUFxQkMsS0FBVTtJQUNuRCxNQUFNQyxVQUFVRCxPQUFPRSxrQkFBa0JEO0lBQ3pDLE1BQU1FLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ0osWUFBWUEsUUFBUUssTUFBTSxHQUFHLElBQUlMLE9BQU8sQ0FBQyxFQUFFLEdBQUc7SUFDMUUsTUFBTU0sVUFBNEIsRUFBRTtJQUNwQyxJQUFJSixPQUFPSSxXQUFXSCxNQUFNQyxPQUFPLENBQUNGLE1BQU1JLE9BQU8sR0FBRztRQUNsRCxLQUFLLE1BQU1DLEtBQUtMLE1BQU1JLE9BQU8sQ0FBRTtZQUM3QixNQUFNRSxVQUFVTCxNQUFNQyxPQUFPLENBQUNHLEVBQUVDLE9BQU8sSUFBSUQsRUFBRUMsT0FBTyxHQUFHLEVBQUU7WUFDekQsSUFBSUEsUUFBUUgsTUFBTSxJQUFJLEdBQUc7Z0JBQ3ZCQyxRQUFRRyxJQUFJLENBQUM7b0JBQ1hDLE1BQU1DLE9BQU9ILE9BQU8sQ0FBQyxFQUFFLEVBQUVJLElBQUk7b0JBQzdCQyxJQUFJRixPQUFPSCxPQUFPLENBQUMsRUFBRSxFQUFFSSxJQUFJO29CQUMzQkUsTUFBTUgsT0FBT0osRUFBRVEsTUFBTSxJQUFJLElBQUlILElBQUksTUFBTTtvQkFDdkNJLEtBQUssT0FBT1QsRUFBRVMsR0FBRyxLQUFLLFdBQVdULEVBQUVTLEdBQUcsR0FBR0M7Z0JBQzNDO1lBQ0Y7UUFDRjtJQUNGO0lBQ0EsTUFBTUMsV0FBV2hCLE9BQU9nQixZQUFZLE9BQU9oQixNQUFNZ0IsUUFBUSxLQUFLLFdBQVdoQixNQUFNZ0IsUUFBUSxHQUFHO0lBQzFGLE1BQU1DLFVBQTJCLENBQUM7SUFDbEMsSUFBSUQsVUFBVTtRQUNaLE1BQU1FLFVBQVVDLE9BQU9ELE9BQU8sQ0FBQ0YsVUFDNUJJLE1BQU0sQ0FBQyxDQUFDLEdBQUdDLEVBQUUsR0FBSyxPQUFPQSxNQUFNLFVBQy9CQyxJQUFJLENBQUMsQ0FBQ2pCLEdBQUdrQixJQUFNLENBQUUsQ0FBQyxFQUFFLEdBQWVsQixDQUFDLENBQUMsRUFBRTtRQUMxQyxJQUFJYSxRQUFRZixNQUFNLEVBQUVjLFFBQVFPLGVBQWUsR0FBR04sT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQzdEO0lBQ0EsT0FBTztRQUNMTyxZQUFZLEVBQUU7UUFDZHJCO1FBQ0FhO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdmVuLXdlYi1hcHAvLi9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlci50cz9kNDZiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEdlb21ldHJ5QXNwZWN0ID0ge1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgb3JiPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgR2VvbWV0cnlTdW1tYXJ5ID0ge1xuICBkb21pbmFudEVsZW1lbnQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBOb3JtYWxpemVkR2VvbWV0cnkgPSB7XG4gIHBsYWNlbWVudHM6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+O1xuICBhc3BlY3RzOiBHZW9tZXRyeUFzcGVjdFtdO1xuICBzdW1tYXJ5OiBHZW9tZXRyeVN1bW1hcnk7XG59O1xuXG4vLyBMaWdodHdlaWdodCBhZGFwdGVyOiBkZXJpdmUgYSBtaW5pbWFsIGdlb21ldHJ5IGZyb20gdGhlIGluY29taW5nIHBheWxvYWQuXG4vLyBJbiBhIGZ1bGwgYnVpbGQgdGhpcyB3b3VsZCBjYWxsIE1hdGggQnJhaW4uIEhlcmUgd2Ugc3ludGhlc2l6ZSBhIHVzYWJsZSBzaGFwZVxuLy8gZnJvbSBzeW1ib2xpY193ZWF0aGVyIHBlcmlvZHMgYW5kIGVsZW1lbnRzIGlmIHByZXNlbnQuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1dpdGhNYXRoQnJhaW4oaW5wdXQ6IGFueSk6IFByb21pc2U8Tm9ybWFsaXplZEdlb21ldHJ5PiB7XG4gIGNvbnN0IHBlcmlvZHMgPSBpbnB1dD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcztcbiAgY29uc3QgZmlyc3QgPSBBcnJheS5pc0FycmF5KHBlcmlvZHMpICYmIHBlcmlvZHMubGVuZ3RoID4gMCA/IHBlcmlvZHNbMF0gOiBudWxsO1xuICBjb25zdCBhc3BlY3RzOiBHZW9tZXRyeUFzcGVjdFtdID0gW107XG4gIGlmIChmaXJzdD8uYXNwZWN0cyAmJiBBcnJheS5pc0FycmF5KGZpcnN0LmFzcGVjdHMpKSB7XG4gICAgZm9yIChjb25zdCBhIG9mIGZpcnN0LmFzcGVjdHMpIHtcbiAgICAgIGNvbnN0IHBsYW5ldHMgPSBBcnJheS5pc0FycmF5KGEucGxhbmV0cykgPyBhLnBsYW5ldHMgOiBbXTtcbiAgICAgIGlmIChwbGFuZXRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIGFzcGVjdHMucHVzaCh7XG4gICAgICAgICAgZnJvbTogU3RyaW5nKHBsYW5ldHNbMF0pLnRyaW0oKSxcbiAgICAgICAgICB0bzogU3RyaW5nKHBsYW5ldHNbMV0pLnRyaW0oKSxcbiAgICAgICAgICB0eXBlOiBTdHJpbmcoYS5hc3BlY3QgfHwgJycpLnRyaW0oKSB8fCAnbGluaycsXG4gICAgICAgICAgb3JiOiB0eXBlb2YgYS5vcmIgPT09ICdudW1iZXInID8gYS5vcmIgOiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBlbGVtZW50cyA9IGZpcnN0Py5lbGVtZW50cyAmJiB0eXBlb2YgZmlyc3QuZWxlbWVudHMgPT09ICdvYmplY3QnID8gZmlyc3QuZWxlbWVudHMgOiBudWxsO1xuICBjb25zdCBzdW1tYXJ5OiBHZW9tZXRyeVN1bW1hcnkgPSB7fTtcbiAgaWYgKGVsZW1lbnRzKSB7XG4gICAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGVsZW1lbnRzKVxuICAgICAgLmZpbHRlcigoWywgdl0pID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJylcbiAgICAgIC5zb3J0KChhLCBiKSA9PiAoYlsxXSBhcyBudW1iZXIpIC0gKGFbMV0gYXMgbnVtYmVyKSk7XG4gICAgaWYgKGVudHJpZXMubGVuZ3RoKSBzdW1tYXJ5LmRvbWluYW50RWxlbWVudCA9IGVudHJpZXNbMF1bMF07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwbGFjZW1lbnRzOiBbXSxcbiAgICBhc3BlY3RzLFxuICAgIHN1bW1hcnksXG4gIH07XG59XG5cbiJdLCJuYW1lcyI6WyJwcm9jZXNzV2l0aE1hdGhCcmFpbiIsImlucHV0IiwicGVyaW9kcyIsInN5bWJvbGljX3dlYXRoZXIiLCJmaXJzdCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImFzcGVjdHMiLCJhIiwicGxhbmV0cyIsInB1c2giLCJmcm9tIiwiU3RyaW5nIiwidHJpbSIsInRvIiwidHlwZSIsImFzcGVjdCIsIm9yYiIsInVuZGVmaW5lZCIsImVsZW1lbnRzIiwic3VtbWFyeSIsImVudHJpZXMiLCJPYmplY3QiLCJmaWx0ZXIiLCJ2Iiwic29ydCIsImIiLCJkb21pbmFudEVsZW1lbnQiLCJwbGFjZW1lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/pipeline/mathBrainAdapter.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pipeline/mirrorRenderer.ts":
/*!****************************************!*\
  !*** ./lib/pipeline/mirrorRenderer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderMirrorDraft: () => (/* binding */ renderMirrorDraft)\n/* harmony export */ });\nfunction pickPrimaryElement(elements) {\n    if (!elements) return null;\n    const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\");\n    if (!entries.length) return null;\n    entries.sort((a, b)=>b[1] - a[1]);\n    return entries[0][0];\n}\nfunction extractWindow(payload) {\n    const mc = payload?.mirror_contract || payload?.contract || {};\n    const start = mc?.start_date || payload?.symbolic_weather?.periods?.[0]?.start;\n    const end = mc?.end_date || payload?.symbolic_weather?.periods?.[0]?.end;\n    return {\n        start,\n        end\n    };\n}\nfunction extractElements(payload) {\n    const p = payload?.symbolic_weather?.periods?.[0];\n    if (p?.elements && typeof p.elements === \"object\") return p.elements;\n    return null;\n}\nfunction extractName(payload) {\n    const a = payload?.person_a || payload?.personA || {};\n    return a?.name || a?.details?.name || payload?.mirror_contract?.person_a?.name || null;\n}\nasync function renderMirrorDraft(payload, geometry) {\n    // Attempt to use the existing Raven renderer when available. Fallback to local draft otherwise.\n    try {\n        // Allow opt-out via env if needed\n        const allowIntegration = process.env.RAVEN_RENDER_INTEGRATION !== \"0\";\n        if (allowIntegration) {\n            // Dynamic import to avoid build-time hard dependency in minimal test harnesses\n            // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n            const mod = await __webpack_require__.e(/*! import() */ \"_rsc_lib_raven_render_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/raven/render */ \"(rsc)/./lib/raven/render.ts\")).catch(()=>null);\n            const renderFn = mod?.renderShareableMirror || mod?.renderMirror || mod?.default;\n            if (typeof renderFn === \"function\") {\n                const prov = {\n                    source: \"Poetic Brain (Pipeline)\"\n                };\n                const options = {};\n                const draft = await renderFn({\n                    geo: geometry,\n                    prov,\n                    options\n                });\n                if (draft && typeof draft === \"object\") {\n                    // Ensure required fields exist; if missing, merge with local defaults\n                    const local = await buildLocalDraft(payload, geometry);\n                    return {\n                        picture: draft.picture ?? local.picture,\n                        feeling: draft.feeling ?? local.feeling,\n                        container: draft.container ?? local.container,\n                        option: draft.option ?? local.option,\n                        next_step: draft.next_step ?? local.next_step,\n                        appendix: {\n                            ...local.appendix || {},\n                            ...draft.appendix || {}\n                        }\n                    };\n                }\n            }\n        }\n    } catch  {\n    // Swallow integration errors and fall back to local rendering\n    }\n    return buildLocalDraft(payload, geometry);\n}\nasync function buildLocalDraft(payload, geometry) {\n    const name = extractName(payload) || \"Person A\";\n    const { start, end } = extractWindow(payload);\n    const elements = extractElements(payload);\n    const primary = pickPrimaryElement(elements) || geometry?.summary?.dominantElement || null;\n    const picture = [\n        start && end ? `Window ${start} → ${end}` : null,\n        primary ? `Elemental emphasis: ${primary}` : null,\n        `Mirror prepared for ${name}`\n    ].filter(Boolean).join(\" \\xb7 \");\n    const feeling = primary ? `Feels like ${primary} leaning through this window—track how that shows up today.` : `Feels steady; check where the pattern actually shows in your day.`;\n    const container = `Treat this as a natal/period mirror. Use it to notice tensions and name one concrete signal.`;\n    const option = `Pick one move that would test this mirror in the next 24 hours.`;\n    const next_step = `If this lands, what single moment confirms it—WB, ABE, or OSR?`;\n    const appendix = {\n        aspects: geometry?.aspects ?? []\n    };\n    if (elements) appendix.elements = elements;\n    if (start || end) {\n        appendix.period_start = start || null;\n        appendix.period_end = end || null;\n    }\n    return {\n        picture,\n        feeling,\n        container,\n        option,\n        next_step,\n        appendix\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cnJvclJlbmRlcmVyLnRzPzdlZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOb3JtYWxpemVkR2VvbWV0cnkgfSBmcm9tICcuL21hdGhCcmFpbkFkYXB0ZXInO1xuXG5mdW5jdGlvbiBwaWNrUHJpbWFyeUVsZW1lbnQoZWxlbWVudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghZWxlbWVudHMpIHJldHVybiBudWxsO1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpLmZpbHRlcigoWywgdl0pID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyk7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IChiWzFdIGFzIG51bWJlcikgLSAoYVsxXSBhcyBudW1iZXIpKTtcbiAgcmV0dXJuIGVudHJpZXNbMF1bMF07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RXaW5kb3cocGF5bG9hZDogYW55KTogeyBzdGFydD86IHN0cmluZzsgZW5kPzogc3RyaW5nIH0ge1xuICBjb25zdCBtYyA9IHBheWxvYWQ/Lm1pcnJvcl9jb250cmFjdCB8fCBwYXlsb2FkPy5jb250cmFjdCB8fCB7fTtcbiAgY29uc3Qgc3RhcnQgPSBtYz8uc3RhcnRfZGF0ZSB8fCBwYXlsb2FkPy5zeW1ib2xpY193ZWF0aGVyPy5wZXJpb2RzPy5bMF0/LnN0YXJ0O1xuICBjb25zdCBlbmQgPSBtYz8uZW5kX2RhdGUgfHwgcGF5bG9hZD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcz8uWzBdPy5lbmQ7XG4gIHJldHVybiB7IHN0YXJ0LCBlbmQgfTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEVsZW1lbnRzKHBheWxvYWQ6IGFueSk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsIHtcbiAgY29uc3QgcCA9IHBheWxvYWQ/LnN5bWJvbGljX3dlYXRoZXI/LnBlcmlvZHM/LlswXTtcbiAgaWYgKHA/LmVsZW1lbnRzICYmIHR5cGVvZiBwLmVsZW1lbnRzID09PSAnb2JqZWN0JykgcmV0dXJuIHAuZWxlbWVudHMgYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3ROYW1lKHBheWxvYWQ6IGFueSk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBhID0gcGF5bG9hZD8ucGVyc29uX2EgfHwgcGF5bG9hZD8ucGVyc29uQSB8fCB7fTtcbiAgcmV0dXJuIChcbiAgICBhPy5uYW1lIHx8XG4gICAgYT8uZGV0YWlscz8ubmFtZSB8fFxuICAgIHBheWxvYWQ/Lm1pcnJvcl9jb250cmFjdD8ucGVyc29uX2E/Lm5hbWUgfHxcbiAgICBudWxsXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJNaXJyb3JEcmFmdChwYXlsb2FkOiBhbnksIGdlb21ldHJ5OiBOb3JtYWxpemVkR2VvbWV0cnkpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGFueT4+IHtcbiAgLy8gQXR0ZW1wdCB0byB1c2UgdGhlIGV4aXN0aW5nIFJhdmVuIHJlbmRlcmVyIHdoZW4gYXZhaWxhYmxlLiBGYWxsYmFjayB0byBsb2NhbCBkcmFmdCBvdGhlcndpc2UuXG4gIHRyeSB7XG4gICAgLy8gQWxsb3cgb3B0LW91dCB2aWEgZW52IGlmIG5lZWRlZFxuICAgIGNvbnN0IGFsbG93SW50ZWdyYXRpb24gPSBwcm9jZXNzLmVudi5SQVZFTl9SRU5ERVJfSU5URUdSQVRJT04gIT09ICcwJztcbiAgICBpZiAoYWxsb3dJbnRlZ3JhdGlvbikge1xuICAgICAgLy8gRHluYW1pYyBpbXBvcnQgdG8gYXZvaWQgYnVpbGQtdGltZSBoYXJkIGRlcGVuZGVuY3kgaW4gbWluaW1hbCB0ZXN0IGhhcm5lc3Nlc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtaW1wb3J0c1xuICAgICAgY29uc3QgbW9kOiBhbnkgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3JhdmVuL3JlbmRlcicpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgY29uc3QgcmVuZGVyRm46IGFueSA9IG1vZD8ucmVuZGVyU2hhcmVhYmxlTWlycm9yIHx8IG1vZD8ucmVuZGVyTWlycm9yIHx8IG1vZD8uZGVmYXVsdDtcbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgcHJvdiA9IHsgc291cmNlOiAnUG9ldGljIEJyYWluIChQaXBlbGluZSknIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICBjb25zdCBkcmFmdCA9IGF3YWl0IHJlbmRlckZuKHsgZ2VvOiBnZW9tZXRyeSwgcHJvdiwgb3B0aW9ucyB9KTtcbiAgICAgICAgaWYgKGRyYWZ0ICYmIHR5cGVvZiBkcmFmdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgcmVxdWlyZWQgZmllbGRzIGV4aXN0OyBpZiBtaXNzaW5nLCBtZXJnZSB3aXRoIGxvY2FsIGRlZmF1bHRzXG4gICAgICAgICAgY29uc3QgbG9jYWwgPSBhd2FpdCBidWlsZExvY2FsRHJhZnQocGF5bG9hZCwgZ2VvbWV0cnkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwaWN0dXJlOiBkcmFmdC5waWN0dXJlID8/IGxvY2FsLnBpY3R1cmUsXG4gICAgICAgICAgICBmZWVsaW5nOiBkcmFmdC5mZWVsaW5nID8/IGxvY2FsLmZlZWxpbmcsXG4gICAgICAgICAgICBjb250YWluZXI6IGRyYWZ0LmNvbnRhaW5lciA/PyBsb2NhbC5jb250YWluZXIsXG4gICAgICAgICAgICBvcHRpb246IGRyYWZ0Lm9wdGlvbiA/PyBsb2NhbC5vcHRpb24sXG4gICAgICAgICAgICBuZXh0X3N0ZXA6IGRyYWZ0Lm5leHRfc3RlcCA/PyBsb2NhbC5uZXh0X3N0ZXAsXG4gICAgICAgICAgICBhcHBlbmRpeDogeyAuLi4obG9jYWwuYXBwZW5kaXggfHwge30pLCAuLi4oZHJhZnQuYXBwZW5kaXggfHwge30pIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gU3dhbGxvdyBpbnRlZ3JhdGlvbiBlcnJvcnMgYW5kIGZhbGwgYmFjayB0byBsb2NhbCByZW5kZXJpbmdcbiAgfVxuXG4gIHJldHVybiBidWlsZExvY2FsRHJhZnQocGF5bG9hZCwgZ2VvbWV0cnkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBidWlsZExvY2FsRHJhZnQocGF5bG9hZDogYW55LCBnZW9tZXRyeTogTm9ybWFsaXplZEdlb21ldHJ5KTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG4gIGNvbnN0IG5hbWUgPSBleHRyYWN0TmFtZShwYXlsb2FkKSB8fCAnUGVyc29uIEEnO1xuICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGV4dHJhY3RXaW5kb3cocGF5bG9hZCk7XG4gIGNvbnN0IGVsZW1lbnRzID0gZXh0cmFjdEVsZW1lbnRzKHBheWxvYWQpO1xuICBjb25zdCBwcmltYXJ5ID0gcGlja1ByaW1hcnlFbGVtZW50KGVsZW1lbnRzKSB8fCBnZW9tZXRyeT8uc3VtbWFyeT8uZG9taW5hbnRFbGVtZW50IHx8IG51bGw7XG5cbiAgY29uc3QgcGljdHVyZSA9IFtcbiAgICBzdGFydCAmJiBlbmQgPyBgV2luZG93ICR7c3RhcnR9IOKGkiAke2VuZH1gIDogbnVsbCxcbiAgICBwcmltYXJ5ID8gYEVsZW1lbnRhbCBlbXBoYXNpczogJHtwcmltYXJ5fWAgOiBudWxsLFxuICAgIGBNaXJyb3IgcHJlcGFyZWQgZm9yICR7bmFtZX1gLFxuICBdXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICAgIC5qb2luKCcgwrcgJyk7XG5cbiAgY29uc3QgZmVlbGluZyA9IHByaW1hcnlcbiAgICA/IGBGZWVscyBsaWtlICR7cHJpbWFyeX0gbGVhbmluZyB0aHJvdWdoIHRoaXMgd2luZG934oCUdHJhY2sgaG93IHRoYXQgc2hvd3MgdXAgdG9kYXkuYFxuICAgIDogYEZlZWxzIHN0ZWFkeTsgY2hlY2sgd2hlcmUgdGhlIHBhdHRlcm4gYWN0dWFsbHkgc2hvd3MgaW4geW91ciBkYXkuYDtcblxuICBjb25zdCBjb250YWluZXIgPSBgVHJlYXQgdGhpcyBhcyBhIG5hdGFsL3BlcmlvZCBtaXJyb3IuIFVzZSBpdCB0byBub3RpY2UgdGVuc2lvbnMgYW5kIG5hbWUgb25lIGNvbmNyZXRlIHNpZ25hbC5gO1xuICBjb25zdCBvcHRpb24gPSBgUGljayBvbmUgbW92ZSB0aGF0IHdvdWxkIHRlc3QgdGhpcyBtaXJyb3IgaW4gdGhlIG5leHQgMjQgaG91cnMuYDtcbiAgY29uc3QgbmV4dF9zdGVwID0gYElmIHRoaXMgbGFuZHMsIHdoYXQgc2luZ2xlIG1vbWVudCBjb25maXJtcyBpdOKAlFdCLCBBQkUsIG9yIE9TUj9gO1xuXG4gIGNvbnN0IGFwcGVuZGl4OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0geyBhc3BlY3RzOiBnZW9tZXRyeT8uYXNwZWN0cyA/PyBbXSB9O1xuICBpZiAoZWxlbWVudHMpIGFwcGVuZGl4LmVsZW1lbnRzID0gZWxlbWVudHM7XG4gIGlmIChzdGFydCB8fCBlbmQpIHtcbiAgICBhcHBlbmRpeC5wZXJpb2Rfc3RhcnQgPSBzdGFydCB8fCBudWxsO1xuICAgIGFwcGVuZGl4LnBlcmlvZF9lbmQgPSBlbmQgfHwgbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7IHBpY3R1cmUsIGZlZWxpbmcsIGNvbnRhaW5lciwgb3B0aW9uLCBuZXh0X3N0ZXAsIGFwcGVuZGl4IH07XG59XG4iXSwibmFtZXMiOlsicGlja1ByaW1hcnlFbGVtZW50IiwiZWxlbWVudHMiLCJlbnRyaWVzIiwiT2JqZWN0IiwiZmlsdGVyIiwidiIsImxlbmd0aCIsInNvcnQiLCJhIiwiYiIsImV4dHJhY3RXaW5kb3ciLCJwYXlsb2FkIiwibWMiLCJtaXJyb3JfY29udHJhY3QiLCJjb250cmFjdCIsInN0YXJ0Iiwic3RhcnRfZGF0ZSIsInN5bWJvbGljX3dlYXRoZXIiLCJwZXJpb2RzIiwiZW5kIiwiZW5kX2RhdGUiLCJleHRyYWN0RWxlbWVudHMiLCJwIiwiZXh0cmFjdE5hbWUiLCJwZXJzb25fYSIsInBlcnNvbkEiLCJuYW1lIiwiZGV0YWlscyIsInJlbmRlck1pcnJvckRyYWZ0IiwiZ2VvbWV0cnkiLCJhbGxvd0ludGVncmF0aW9uIiwicHJvY2VzcyIsImVudiIsIlJBVkVOX1JFTkRFUl9JTlRFR1JBVElPTiIsIm1vZCIsImNhdGNoIiwicmVuZGVyRm4iLCJyZW5kZXJTaGFyZWFibGVNaXJyb3IiLCJyZW5kZXJNaXJyb3IiLCJkZWZhdWx0IiwicHJvdiIsInNvdXJjZSIsIm9wdGlvbnMiLCJkcmFmdCIsImdlbyIsImxvY2FsIiwiYnVpbGRMb2NhbERyYWZ0IiwicGljdHVyZSIsImZlZWxpbmciLCJjb250YWluZXIiLCJvcHRpb24iLCJuZXh0X3N0ZXAiLCJhcHBlbmRpeCIsInByaW1hcnkiLCJzdW1tYXJ5IiwiZG9taW5hbnRFbGVtZW50IiwiQm9vbGVhbiIsImpvaW4iLCJhc3BlY3RzIiwicGVyaW9kX3N0YXJ0IiwicGVyaW9kX2VuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/pipeline/mirrorRenderer.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();