"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/poetic-brain/route";
exports.ids = ["app/api/poetic-brain/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_dancross_Documents_GitHub_WovenWebApp_app_api_poetic_brain_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/poetic-brain/route.ts */ \"(rsc)/./app/api/poetic-brain/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/poetic-brain/route\",\n        pathname: \"/api/poetic-brain\",\n        filename: \"route\",\n        bundlePath: \"app/api/poetic-brain/route\"\n    },\n    resolvedPagePath: \"/Users/dancross/Documents/GitHub/WovenWebApp/app/api/poetic-brain/route.ts\",\n    nextConfigOutput,\n    userland: _Users_dancross_Documents_GitHub_WovenWebApp_app_api_poetic_brain_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/poetic-brain/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwb2V0aWMtYnJhaW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBvZXRpYy1icmFpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBvZXRpYy1icmFpbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRhbmNyb3NzJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGV292ZW5XZWJBcHAlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZGFuY3Jvc3MlMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZXb3ZlbldlYkFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Zlbi13ZWItYXBwLz9iZDBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9kYW5jcm9zcy9Eb2N1bWVudHMvR2l0SHViL1dvdmVuV2ViQXBwL2FwcC9hcGkvcG9ldGljLWJyYWluL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wb2V0aWMtYnJhaW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wb2V0aWMtYnJhaW5cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3BvZXRpYy1icmFpbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9kYW5jcm9zcy9Eb2N1bWVudHMvR2l0SHViL1dvdmVuV2ViQXBwL2FwcC9hcGkvcG9ldGljLWJyYWluL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wb2V0aWMtYnJhaW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/poetic-brain/route.ts":
/*!***************************************!*\
  !*** ./app/api/poetic-brain/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_pipeline_mathBrainAdapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/pipeline/mathBrainAdapter */ \"(rsc)/./lib/pipeline/mathBrainAdapter.ts\");\n/* harmony import */ var _lib_pipeline_mirrorRenderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/pipeline/mirrorRenderer */ \"(rsc)/./lib/pipeline/mirrorRenderer.ts\");\n\n\n\n\n// Permissive schemas for two common inputs\n// Common fragments\nconst NameLike = zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1).max(200);\nconst PersonASchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    name: NameLike.optional(),\n    details: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        name: NameLike.optional()\n    }).partial().optional()\n}).partial();\nconst ElementsSchema = zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.number().finite()).refine((rec)=>Object.values(rec).every((v)=>Number.isFinite(v) && v >= 0 && v <= 1), {\n    message: \"elements values must be between 0 and 1\"\n});\nconst AspectSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    planets: zod__WEBPACK_IMPORTED_MODULE_3__.array(NameLike).min(2).max(3),\n    aspect: NameLike,\n    orb: zod__WEBPACK_IMPORTED_MODULE_3__.number().finite().optional(),\n    exact_time: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n}).partial();\nconst PeriodSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    start: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    end: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    elements: ElementsSchema.optional(),\n    aspects: zod__WEBPACK_IMPORTED_MODULE_3__.array(AspectSchema).optional()\n}).partial();\nconst MirrorContractSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    person_a: PersonASchema.optional(),\n    start_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    end_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n}).passthrough();\nconst MirrorDirectiveSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    _format: zod__WEBPACK_IMPORTED_MODULE_3__.literal(\"mirror_directive_json\").optional(),\n    person_a: PersonASchema.optional(),\n    mirror_contract: MirrorContractSchema.optional(),\n    contract: zod__WEBPACK_IMPORTED_MODULE_3__.any().optional()\n}).passthrough().refine((obj)=>Boolean(obj._format || obj.person_a || obj.mirror_contract || obj.contract), {\n    message: \"mirror directive payload missing required markers\"\n});\nconst MirrorSymbolicWeatherSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    _format: zod__WEBPACK_IMPORTED_MODULE_3__.literal(\"mirror-symbolic-weather-v1\").optional(),\n    mirror_contract: MirrorContractSchema.optional(),\n    contract: zod__WEBPACK_IMPORTED_MODULE_3__.any().optional(),\n    person_a: PersonASchema.optional(),\n    symbolic_weather: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        periods: zod__WEBPACK_IMPORTED_MODULE_3__.array(PeriodSchema).min(1).optional()\n    }).partial().optional()\n}).passthrough().refine((obj)=>Boolean(obj._format || obj.symbolic_weather || obj.mirror_contract || obj.contract || obj.person_a), {\n    message: \"combined mirror+weather payload missing required markers\"\n});\nfunction extractName(payload) {\n    const a = payload?.person_a || payload?.personA || {};\n    return a?.name || a?.details?.name || payload?.mirror_contract?.person_a?.name || null;\n}\nfunction extractWindow(payload) {\n    const mc = payload?.mirror_contract || payload?.contract || {};\n    const start = mc?.start_date || payload?.symbolic_weather?.periods?.[0]?.start;\n    const end = mc?.end_date || payload?.symbolic_weather?.periods?.[0]?.end;\n    return {\n        start,\n        end\n    };\n}\nfunction extractElements(payload) {\n    const p = payload?.symbolic_weather?.periods?.[0];\n    if (p?.elements && typeof p.elements === \"object\") return p.elements;\n    return null;\n}\nfunction pickPrimaryElement(elements) {\n    if (!elements) return null;\n    const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\");\n    if (!entries.length) return null;\n    entries.sort((a, b)=>b[1] - a[1]);\n    return entries[0][0];\n}\nasync function POST(request) {\n    try {\n        const data = await request.json();\n        // Accept either mirror directive or combined format\n        const isDirective = MirrorDirectiveSchema.safeParse(data).success;\n        const isCombined = MirrorSymbolicWeatherSchema.safeParse(data).success;\n        if (!isDirective && !isCombined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unsupported payload. Provide mirror_directive_json or mirror-symbolic-weather-v1.\"\n            }, {\n                status: 400\n            });\n        }\n        // Pipeline: derive minimal geometry, then render mirror draft\n        const geometry = await (0,_lib_pipeline_mathBrainAdapter__WEBPACK_IMPORTED_MODULE_1__.processWithMathBrain)(data);\n        const draft = await (0,_lib_pipeline_mirrorRenderer__WEBPACK_IMPORTED_MODULE_2__.renderMirrorDraft)(data, geometry);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            type: \"mirror\",\n            version: \"1.0\",\n            draft\n        });\n    } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(\"Error processing poetic brain request:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0Isc0JBQXNCOEIsU0FBUyxDQUFDSCxNQUFNSSxPQUFPO1FBQ2pFLE1BQU1DLGFBQWF4Qiw0QkFBNEJzQixTQUFTLENBQUNILE1BQU1JLE9BQU87UUFDdEUsSUFBSSxDQUFDRixlQUFlLENBQUNHLFlBQVk7WUFDL0IsT0FBTzNFLHFEQUFZQSxDQUFDdUUsSUFBSSxDQUN0QjtnQkFBRUssT0FBTztZQUFvRixHQUM3RjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBQ0EsOERBQThEO1FBQzlELE1BQU1DLFdBQVcsTUFBTTVFLG9GQUFvQkEsQ0FBQ29FO1FBQzVDLE1BQU1TLFFBQVEsTUFBTTVFLCtFQUFpQkEsQ0FBQ21FLE1BQU1RO1FBRTVDLE9BQU85RSxxREFBWUEsQ0FBQ3VFLElBQUksQ0FBQztZQUFFUyxNQUFNO1lBQVVDLFNBQVM7WUFBT0Y7UUFBTTtJQUNuRSxFQUFFLE9BQU9ILE9BQU87UUFDZCxzQ0FBc0M7UUFDdENNLFFBQVFOLEtBQUssQ0FBQywwQ0FBMENBO1FBQ3hELE9BQU81RSxxREFBWUEsQ0FBQ3VFLElBQUksQ0FBQztZQUFFSyxPQUFPO1FBQXdCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Zlbi13ZWItYXBwLy4vYXBwL2FwaS9wb2V0aWMtYnJhaW4vcm91dGUudHM/N2Y3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHByb2Nlc3NXaXRoTWF0aEJyYWluIH0gZnJvbSAnQC9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlcic7XG5pbXBvcnQgeyByZW5kZXJNaXJyb3JEcmFmdCB9IGZyb20gJ0AvbGliL3BpcGVsaW5lL21pcnJvclJlbmRlcmVyJztcblxuLy8gUGVybWlzc2l2ZSBzY2hlbWFzIGZvciB0d28gY29tbW9uIGlucHV0c1xuLy8gQ29tbW9uIGZyYWdtZW50c1xuY29uc3QgTmFtZUxpa2UgPSB6LnN0cmluZygpLm1pbigxKS5tYXgoMjAwKTtcbmNvbnN0IFBlcnNvbkFTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIG5hbWU6IE5hbWVMaWtlLm9wdGlvbmFsKCksXG4gICAgZGV0YWlsczogei5vYmplY3QoeyBuYW1lOiBOYW1lTGlrZS5vcHRpb25hbCgpIH0pLnBhcnRpYWwoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFydGlhbCgpO1xuXG5jb25zdCBFbGVtZW50c1NjaGVtYSA9IHpcbiAgLnJlY29yZCh6Lm51bWJlcigpLmZpbml0ZSgpKVxuICAucmVmaW5lKFxuICAgIChyZWMpID0+IE9iamVjdC52YWx1ZXMocmVjKS5ldmVyeSgodikgPT4gTnVtYmVyLmlzRmluaXRlKHYpICYmIHYgPj0gMCAmJiB2IDw9IDEpLFxuICAgIHsgbWVzc2FnZTogJ2VsZW1lbnRzIHZhbHVlcyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMScgfSxcbiAgKTtcblxuY29uc3QgQXNwZWN0U2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBwbGFuZXRzOiB6LmFycmF5KE5hbWVMaWtlKS5taW4oMikubWF4KDMpLFxuICAgIGFzcGVjdDogTmFtZUxpa2UsXG4gICAgb3JiOiB6Lm51bWJlcigpLmZpbml0ZSgpLm9wdGlvbmFsKCksXG4gICAgZXhhY3RfdGltZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFydGlhbCgpO1xuXG5jb25zdCBQZXJpb2RTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHN0YXJ0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZW5kOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZWxlbWVudHM6IEVsZW1lbnRzU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgYXNwZWN0czogei5hcnJheShBc3BlY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5wYXJ0aWFsKCk7XG5cbmNvbnN0IE1pcnJvckNvbnRyYWN0U2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBwZXJzb25fYTogUGVyc29uQVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHN0YXJ0X2RhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlbmRfZGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9KVxuICAucGFzc3Rocm91Z2goKTtcblxuY29uc3QgTWlycm9yRGlyZWN0aXZlU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBfZm9ybWF0OiB6LmxpdGVyYWwoJ21pcnJvcl9kaXJlY3RpdmVfanNvbicpLm9wdGlvbmFsKCksXG4gICAgcGVyc29uX2E6IFBlcnNvbkFTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBtaXJyb3JfY29udHJhY3Q6IE1pcnJvckNvbnRyYWN0U2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY29udHJhY3Q6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgfSlcbiAgLnBhc3N0aHJvdWdoKClcbiAgLnJlZmluZShcbiAgICAob2JqKSA9PiBCb29sZWFuKG9iai5fZm9ybWF0IHx8IG9iai5wZXJzb25fYSB8fCBvYmoubWlycm9yX2NvbnRyYWN0IHx8IG9iai5jb250cmFjdCksXG4gICAgeyBtZXNzYWdlOiAnbWlycm9yIGRpcmVjdGl2ZSBwYXlsb2FkIG1pc3NpbmcgcmVxdWlyZWQgbWFya2VycycgfSxcbiAgKTtcblxuY29uc3QgTWlycm9yU3ltYm9saWNXZWF0aGVyU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBfZm9ybWF0OiB6LmxpdGVyYWwoJ21pcnJvci1zeW1ib2xpYy13ZWF0aGVyLXYxJykub3B0aW9uYWwoKSxcbiAgICBtaXJyb3JfY29udHJhY3Q6IE1pcnJvckNvbnRyYWN0U2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY29udHJhY3Q6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgICBwZXJzb25fYTogUGVyc29uQVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHN5bWJvbGljX3dlYXRoZXI6IHpcbiAgICAgIC5vYmplY3Qoe1xuICAgICAgICBwZXJpb2RzOiB6LmFycmF5KFBlcmlvZFNjaGVtYSkubWluKDEpLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgICAgLnBhcnRpYWwoKVxuICAgICAgLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5wYXNzdGhyb3VnaCgpXG4gIC5yZWZpbmUoXG4gICAgKG9iaikgPT4gQm9vbGVhbihvYmouX2Zvcm1hdCB8fCBvYmouc3ltYm9saWNfd2VhdGhlciB8fCBvYmoubWlycm9yX2NvbnRyYWN0IHx8IG9iai5jb250cmFjdCB8fCBvYmoucGVyc29uX2EpLFxuICAgIHsgbWVzc2FnZTogJ2NvbWJpbmVkIG1pcnJvcit3ZWF0aGVyIHBheWxvYWQgbWlzc2luZyByZXF1aXJlZCBtYXJrZXJzJyB9LFxuICApO1xuXG5mdW5jdGlvbiBleHRyYWN0TmFtZShwYXlsb2FkOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgYSA9IHBheWxvYWQ/LnBlcnNvbl9hIHx8IHBheWxvYWQ/LnBlcnNvbkEgfHwge307XG4gIHJldHVybiAoXG4gICAgYT8ubmFtZSB8fFxuICAgIGE/LmRldGFpbHM/Lm5hbWUgfHxcbiAgICBwYXlsb2FkPy5taXJyb3JfY29udHJhY3Q/LnBlcnNvbl9hPy5uYW1lIHx8XG4gICAgbnVsbFxuICApO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0V2luZG93KHBheWxvYWQ6IGFueSk6IHsgc3RhcnQ/OiBzdHJpbmc7IGVuZD86IHN0cmluZyB9IHtcbiAgY29uc3QgbWMgPSBwYXlsb2FkPy5taXJyb3JfY29udHJhY3QgfHwgcGF5bG9hZD8uY29udHJhY3QgfHwge307XG4gIGNvbnN0IHN0YXJ0ID0gbWM/LnN0YXJ0X2RhdGUgfHwgcGF5bG9hZD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcz8uWzBdPy5zdGFydDtcbiAgY29uc3QgZW5kID0gbWM/LmVuZF9kYXRlIHx8IHBheWxvYWQ/LnN5bWJvbGljX3dlYXRoZXI/LnBlcmlvZHM/LlswXT8uZW5kO1xuICByZXR1cm4geyBzdGFydCwgZW5kIH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50cyhwYXlsb2FkOiBhbnkpOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbCB7XG4gIGNvbnN0IHAgPSBwYXlsb2FkPy5zeW1ib2xpY193ZWF0aGVyPy5wZXJpb2RzPy5bMF07XG4gIGlmIChwPy5lbGVtZW50cyAmJiB0eXBlb2YgcC5lbGVtZW50cyA9PT0gJ29iamVjdCcpIHJldHVybiBwLmVsZW1lbnRzIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwaWNrUHJpbWFyeUVsZW1lbnQoZWxlbWVudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghZWxlbWVudHMpIHJldHVybiBudWxsO1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpLmZpbHRlcigoWywgdl0pID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyk7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IChiWzFdIGFzIG51bWJlcikgLSAoYVsxXSBhcyBudW1iZXIpKTtcbiAgcmV0dXJuIGVudHJpZXNbMF1bMF07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBBY2NlcHQgZWl0aGVyIG1pcnJvciBkaXJlY3RpdmUgb3IgY29tYmluZWQgZm9ybWF0XG4gICAgY29uc3QgaXNEaXJlY3RpdmUgPSBNaXJyb3JEaXJlY3RpdmVTY2hlbWEuc2FmZVBhcnNlKGRhdGEpLnN1Y2Nlc3M7XG4gICAgY29uc3QgaXNDb21iaW5lZCA9IE1pcnJvclN5bWJvbGljV2VhdGhlclNjaGVtYS5zYWZlUGFyc2UoZGF0YSkuc3VjY2VzcztcbiAgICBpZiAoIWlzRGlyZWN0aXZlICYmICFpc0NvbWJpbmVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVbnN1cHBvcnRlZCBwYXlsb2FkLiBQcm92aWRlIG1pcnJvcl9kaXJlY3RpdmVfanNvbiBvciBtaXJyb3Itc3ltYm9saWMtd2VhdGhlci12MS4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfSxcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIFBpcGVsaW5lOiBkZXJpdmUgbWluaW1hbCBnZW9tZXRyeSwgdGhlbiByZW5kZXIgbWlycm9yIGRyYWZ0XG4gICAgY29uc3QgZ2VvbWV0cnkgPSBhd2FpdCBwcm9jZXNzV2l0aE1hdGhCcmFpbihkYXRhKTtcbiAgICBjb25zdCBkcmFmdCA9IGF3YWl0IHJlbmRlck1pcnJvckRyYWZ0KGRhdGEsIGdlb21ldHJ5KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHR5cGU6ICdtaXJyb3InLCB2ZXJzaW9uOiAnMS4wJywgZHJhZnQgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHBvZXRpYyBicmFpbiByZXF1ZXN0OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInoiLCJwcm9jZXNzV2l0aE1hdGhCcmFpbiIsInJlbmRlck1pcnJvckRyYWZ0IiwiTmFtZUxpa2UiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJQZXJzb25BU2NoZW1hIiwib2JqZWN0IiwibmFtZSIsIm9wdGlvbmFsIiwiZGV0YWlscyIsInBhcnRpYWwiLCJFbGVtZW50c1NjaGVtYSIsInJlY29yZCIsIm51bWJlciIsImZpbml0ZSIsInJlZmluZSIsInJlYyIsIk9iamVjdCIsInZhbHVlcyIsImV2ZXJ5IiwidiIsIk51bWJlciIsImlzRmluaXRlIiwibWVzc2FnZSIsIkFzcGVjdFNjaGVtYSIsInBsYW5ldHMiLCJhcnJheSIsImFzcGVjdCIsIm9yYiIsImV4YWN0X3RpbWUiLCJQZXJpb2RTY2hlbWEiLCJzdGFydCIsImVuZCIsImVsZW1lbnRzIiwiYXNwZWN0cyIsIk1pcnJvckNvbnRyYWN0U2NoZW1hIiwicGVyc29uX2EiLCJzdGFydF9kYXRlIiwiZW5kX2RhdGUiLCJwYXNzdGhyb3VnaCIsIk1pcnJvckRpcmVjdGl2ZVNjaGVtYSIsIl9mb3JtYXQiLCJsaXRlcmFsIiwibWlycm9yX2NvbnRyYWN0IiwiY29udHJhY3QiLCJhbnkiLCJvYmoiLCJCb29sZWFuIiwiTWlycm9yU3ltYm9saWNXZWF0aGVyU2NoZW1hIiwic3ltYm9saWNfd2VhdGhlciIsInBlcmlvZHMiLCJleHRyYWN0TmFtZSIsInBheWxvYWQiLCJhIiwicGVyc29uQSIsImV4dHJhY3RXaW5kb3ciLCJtYyIsImV4dHJhY3RFbGVtZW50cyIsInAiLCJwaWNrUHJpbWFyeUVsZW1lbnQiLCJlbnRyaWVzIiwiZmlsdGVyIiwibGVuZ3RoIiwic29ydCIsImIiLCJQT1NUIiwicmVxdWVzdCIsImRhdGEiLCJqc29uIiwiaXNEaXJlY3RpdmUiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiaXNDb21iaW5lZCIsImVycm9yIiwic3RhdHVzIiwiZ2VvbWV0cnkiLCJkcmFmdCIsInR5cGUiLCJ2ZXJzaW9uIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/poetic-brain/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pipeline/mathBrainAdapter.ts":
/*!******************************************!*\
  !*** ./lib/pipeline/mathBrainAdapter.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processWithMathBrain: () => (/* binding */ processWithMathBrain)\n/* harmony export */ });\n// Lightweight adapter: derive a minimal geometry from the incoming payload.\n// In a full build this would call Math Brain. Here we synthesize a usable shape\n// from symbolic_weather periods and elements if present.\nasync function processWithMathBrain(input) {\n    const periods = input?.symbolic_weather?.periods;\n    const first = Array.isArray(periods) && periods.length > 0 ? periods[0] : null;\n    const aspects = [];\n    if (first?.aspects && Array.isArray(first.aspects)) {\n        for (const a of first.aspects){\n            const planets = Array.isArray(a.planets) ? a.planets : [];\n            if (planets.length >= 2) {\n                aspects.push({\n                    from: String(planets[0]).trim(),\n                    to: String(planets[1]).trim(),\n                    type: String(a.aspect || \"\").trim() || \"link\",\n                    orb: typeof a.orb === \"number\" ? a.orb : undefined\n                });\n            }\n        }\n    }\n    const elements = first?.elements && typeof first.elements === \"object\" ? first.elements : null;\n    const summary = {};\n    if (elements) {\n        const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\").sort((a, b)=>b[1] - a[1]);\n        if (entries.length) summary.dominantElement = entries[0][0];\n    }\n    return {\n        placements: [],\n        aspects,\n        summary\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBaUJBLDRFQUE0RTtBQUM1RSxnRkFBZ0Y7QUFDaEYseURBQXlEO0FBQ2xELGVBQWVBLHFCQUFxQkMsS0FBVTtJQUNuRCxNQUFNQyxVQUFVRCxPQUFPRSxrQkFBa0JEO0lBQ3pDLE1BQU1FLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ0osWUFBWUEsUUFBUUssTUFBTSxHQUFHLElBQUlMLE9BQU8sQ0FBQyxFQUFFLEdBQUc7SUFDMUUsTUFBTU0sVUFBNEIsRUFBRTtJQUNwQyxJQUFJSixPQUFPSSxXQUFXSCxNQUFNQyxPQUFPLENBQUNGLE1BQU1JLE9BQU8sR0FBRztRQUNsRCxLQUFLLE1BQU1DLEtBQUtMLE1BQU1JLE9BQU8sQ0FBRTtZQUM3QixNQUFNRSxVQUFVTCxNQUFNQyxPQUFPLENBQUNHLEVBQUVDLE9BQU8sSUFBSUQsRUFBRUMsT0FBTyxHQUFHLEVBQUU7WUFDekQsSUFBSUEsUUFBUUgsTUFBTSxJQUFJLEdBQUc7Z0JBQ3ZCQyxRQUFRRyxJQUFJLENBQUM7b0JBQ1hDLE1BQU1DLE9BQU9ILE9BQU8sQ0FBQyxFQUFFLEVBQUVJLElBQUk7b0JBQzdCQyxJQUFJRixPQUFPSCxPQUFPLENBQUMsRUFBRSxFQUFFSSxJQUFJO29CQUMzQkUsTUFBTUgsT0FBT0osRUFBRVEsTUFBTSxJQUFJLElBQUlILElBQUksTUFBTTtvQkFDdkNJLEtBQUssT0FBT1QsRUFBRVMsR0FBRyxLQUFLLFdBQVdULEVBQUVTLEdBQUcsR0FBR0M7Z0JBQzNDO1lBQ0Y7UUFDRjtJQUNGO0lBQ0EsTUFBTUMsV0FBV2hCLE9BQU9nQixZQUFZLE9BQU9oQixNQUFNZ0IsUUFBUSxLQUFLLFdBQVdoQixNQUFNZ0IsUUFBUSxHQUFHO0lBQzFGLE1BQU1DLFVBQTJCLENBQUM7SUFDbEMsSUFBSUQsVUFBVTtRQUNaLE1BQU1FLFVBQVVDLE9BQU9ELE9BQU8sQ0FBQ0YsVUFDNUJJLE1BQU0sQ0FBQyxDQUFDLEdBQUdDLEVBQUUsR0FBSyxPQUFPQSxNQUFNLFVBQy9CQyxJQUFJLENBQUMsQ0FBQ2pCLEdBQUdrQixJQUFNLENBQUUsQ0FBQyxFQUFFLEdBQWVsQixDQUFDLENBQUMsRUFBRTtRQUMxQyxJQUFJYSxRQUFRZixNQUFNLEVBQUVjLFFBQVFPLGVBQWUsR0FBR04sT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQzdEO0lBQ0EsT0FBTztRQUNMTyxZQUFZLEVBQUU7UUFDZHJCO1FBQ0FhO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdmVuLXdlYi1hcHAvLi9saWIvcGlwZWxpbmUvbWF0aEJyYWluQWRhcHRlci50cz9kNDZiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEdlb21ldHJ5QXNwZWN0ID0ge1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgb3JiPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgR2VvbWV0cnlTdW1tYXJ5ID0ge1xuICBkb21pbmFudEVsZW1lbnQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBOb3JtYWxpemVkR2VvbWV0cnkgPSB7XG4gIHBsYWNlbWVudHM6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+O1xuICBhc3BlY3RzOiBHZW9tZXRyeUFzcGVjdFtdO1xuICBzdW1tYXJ5OiBHZW9tZXRyeVN1bW1hcnk7XG59O1xuXG4vLyBMaWdodHdlaWdodCBhZGFwdGVyOiBkZXJpdmUgYSBtaW5pbWFsIGdlb21ldHJ5IGZyb20gdGhlIGluY29taW5nIHBheWxvYWQuXG4vLyBJbiBhIGZ1bGwgYnVpbGQgdGhpcyB3b3VsZCBjYWxsIE1hdGggQnJhaW4uIEhlcmUgd2Ugc3ludGhlc2l6ZSBhIHVzYWJsZSBzaGFwZVxuLy8gZnJvbSBzeW1ib2xpY193ZWF0aGVyIHBlcmlvZHMgYW5kIGVsZW1lbnRzIGlmIHByZXNlbnQuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1dpdGhNYXRoQnJhaW4oaW5wdXQ6IGFueSk6IFByb21pc2U8Tm9ybWFsaXplZEdlb21ldHJ5PiB7XG4gIGNvbnN0IHBlcmlvZHMgPSBpbnB1dD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcztcbiAgY29uc3QgZmlyc3QgPSBBcnJheS5pc0FycmF5KHBlcmlvZHMpICYmIHBlcmlvZHMubGVuZ3RoID4gMCA/IHBlcmlvZHNbMF0gOiBudWxsO1xuICBjb25zdCBhc3BlY3RzOiBHZW9tZXRyeUFzcGVjdFtdID0gW107XG4gIGlmIChmaXJzdD8uYXNwZWN0cyAmJiBBcnJheS5pc0FycmF5KGZpcnN0LmFzcGVjdHMpKSB7XG4gICAgZm9yIChjb25zdCBhIG9mIGZpcnN0LmFzcGVjdHMpIHtcbiAgICAgIGNvbnN0IHBsYW5ldHMgPSBBcnJheS5pc0FycmF5KGEucGxhbmV0cykgPyBhLnBsYW5ldHMgOiBbXTtcbiAgICAgIGlmIChwbGFuZXRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIGFzcGVjdHMucHVzaCh7XG4gICAgICAgICAgZnJvbTogU3RyaW5nKHBsYW5ldHNbMF0pLnRyaW0oKSxcbiAgICAgICAgICB0bzogU3RyaW5nKHBsYW5ldHNbMV0pLnRyaW0oKSxcbiAgICAgICAgICB0eXBlOiBTdHJpbmcoYS5hc3BlY3QgfHwgJycpLnRyaW0oKSB8fCAnbGluaycsXG4gICAgICAgICAgb3JiOiB0eXBlb2YgYS5vcmIgPT09ICdudW1iZXInID8gYS5vcmIgOiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBlbGVtZW50cyA9IGZpcnN0Py5lbGVtZW50cyAmJiB0eXBlb2YgZmlyc3QuZWxlbWVudHMgPT09ICdvYmplY3QnID8gZmlyc3QuZWxlbWVudHMgOiBudWxsO1xuICBjb25zdCBzdW1tYXJ5OiBHZW9tZXRyeVN1bW1hcnkgPSB7fTtcbiAgaWYgKGVsZW1lbnRzKSB7XG4gICAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGVsZW1lbnRzKVxuICAgICAgLmZpbHRlcigoWywgdl0pID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJylcbiAgICAgIC5zb3J0KChhLCBiKSA9PiAoYlsxXSBhcyBudW1iZXIpIC0gKGFbMV0gYXMgbnVtYmVyKSk7XG4gICAgaWYgKGVudHJpZXMubGVuZ3RoKSBzdW1tYXJ5LmRvbWluYW50RWxlbWVudCA9IGVudHJpZXNbMF1bMF07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwbGFjZW1lbnRzOiBbXSxcbiAgICBhc3BlY3RzLFxuICAgIHN1bW1hcnksXG4gIH07XG59XG5cbiJdLCJuYW1lcyI6WyJwcm9jZXNzV2l0aE1hdGhCcmFpbiIsImlucHV0IiwicGVyaW9kcyIsInN5bWJvbGljX3dlYXRoZXIiLCJmaXJzdCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImFzcGVjdHMiLCJhIiwicGxhbmV0cyIsInB1c2giLCJmcm9tIiwiU3RyaW5nIiwidHJpbSIsInRvIiwidHlwZSIsImFzcGVjdCIsIm9yYiIsInVuZGVmaW5lZCIsImVsZW1lbnRzIiwic3VtbWFyeSIsImVudHJpZXMiLCJPYmplY3QiLCJmaWx0ZXIiLCJ2Iiwic29ydCIsImIiLCJkb21pbmFudEVsZW1lbnQiLCJwbGFjZW1lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/pipeline/mathBrainAdapter.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pipeline/mirrorRenderer.ts":
/*!****************************************!*\
  !*** ./lib/pipeline/mirrorRenderer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderMirrorDraft: () => (/* binding */ renderMirrorDraft)\n/* harmony export */ });\n/* harmony import */ var _relationalAdapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./relationalAdapter */ \"(rsc)/./lib/pipeline/relationalAdapter.ts\");\n\nfunction extractWovenHeader(payload) {\n    if (!payload || typeof payload !== \"object\") return null;\n    const header = payload.Woven_Header || payload[\"Woven Header\"] || payload.WovenHeader || null;\n    if (!header || typeof header !== \"object\") return null;\n    const h = header;\n    return {\n        mode: typeof h.mode === \"string\" ? h.mode : undefined,\n        subject_name: typeof h.subject_name === \"string\" ? h.subject_name : undefined,\n        reader_id: typeof h.reader_id === \"string\" ? h.reader_id : undefined,\n        include_persona_context: typeof h.include_persona_context === \"boolean\" ? h.include_persona_context : undefined,\n        map_source: typeof h.map_source === \"string\" ? h.map_source : undefined,\n        integration_mode: typeof h.integration_mode === \"string\" ? h.integration_mode : undefined,\n        reference_date: typeof h.reference_date === \"string\" ? h.reference_date : undefined,\n        relational_context: h.relational_context && typeof h.relational_context === \"object\" ? h.relational_context : h.relationship_context && typeof h.relationship_context === \"object\" ? h.relationship_context : undefined\n    };\n}\nfunction extractRelationalContext(payload) {\n    const header = extractWovenHeader(payload);\n    if (header?.relational_context && typeof header.relational_context === \"object\") {\n        return header.relational_context;\n    }\n    // Fallback: top-level relationship/relational context if exposed outside the header\n    const top = payload && typeof payload === \"object\" && (payload.relational_context && typeof payload.relational_context === \"object\" && payload.relational_context || payload.relationship_context && typeof payload.relationship_context === \"object\" && payload.relationship_context) || undefined;\n    return top;\n}\nfunction pickPrimaryElement(elements) {\n    if (!elements) return null;\n    const entries = Object.entries(elements).filter(([, v])=>typeof v === \"number\");\n    if (!entries.length) return null;\n    entries.sort((a, b)=>b[1] - a[1]);\n    return entries[0][0];\n}\nfunction extractWindow(payload) {\n    const mc = payload?.mirror_contract || payload?.contract || {};\n    const start = mc?.start_date || payload?.symbolic_weather?.periods?.[0]?.start;\n    const end = mc?.end_date || payload?.symbolic_weather?.periods?.[0]?.end;\n    return {\n        start,\n        end\n    };\n}\nfunction extractElements(payload) {\n    const p = payload?.symbolic_weather?.periods?.[0];\n    if (p?.elements && typeof p.elements === \"object\") return p.elements;\n    return null;\n}\nfunction extractName(payload) {\n    const header = extractWovenHeader(payload);\n    if (header?.subject_name) return header.subject_name;\n    const a = payload?.person_a || payload?.personA || {};\n    return a?.name || a?.details?.name || payload?.mirror_contract?.person_a?.name || null;\n}\nasync function renderMirrorDraft(payload, geometry) {\n    // Attempt to use the existing Raven renderer when available. Fallback to local draft otherwise.\n    try {\n        // Allow opt-out via env if needed\n        const allowIntegration = process.env.RAVEN_RENDER_INTEGRATION !== \"0\";\n        if (allowIntegration) {\n            // Dynamic import to avoid build-time hard dependency in minimal test harnesses\n            const mod = await __webpack_require__.e(/*! import() */ \"_rsc_lib_raven_render_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/raven/render */ \"(rsc)/./lib/raven/render.ts\")).catch(()=>null);\n            const renderFn = mod?.renderShareableMirror || mod?.renderMirror || mod?.default;\n            if (typeof renderFn === \"function\") {\n                const header = extractWovenHeader(payload);\n                // Compute relational placeholders if relational context present\n                let relational;\n                try {\n                    const hasRel = Boolean(header?.relational_context) || Boolean(payload?.person_b);\n                    if (hasRel) {\n                        relational = await (0,_relationalAdapter__WEBPACK_IMPORTED_MODULE_0__.analyzeRelationship)(payload, geometry, header ?? undefined);\n                    }\n                } catch  {\n                    relational = undefined;\n                }\n                const prov = {\n                    source: \"Poetic Brain (Pipeline)\",\n                    reader_id: header?.reader_id,\n                    subject_name: header?.subject_name,\n                    reference_date: header?.reference_date,\n                    integration_mode: header?.integration_mode,\n                    relational_context: header?.relational_context\n                };\n                const options = {\n                    mode: header?.mode,\n                    include_persona_context: header?.include_persona_context,\n                    map_source: header?.map_source,\n                    relational\n                };\n                const draft = await renderFn({\n                    geo: geometry,\n                    prov,\n                    options\n                });\n                if (draft && typeof draft === \"object\") {\n                    // Ensure required fields exist; if missing, merge with local defaults\n                    const local = await buildLocalDraft(payload, geometry);\n                    return {\n                        picture: draft.picture ?? local.picture,\n                        feeling: draft.feeling ?? local.feeling,\n                        container: draft.container ?? local.container,\n                        option: draft.option ?? local.option,\n                        next_step: draft.next_step ?? local.next_step,\n                        appendix: {\n                            ...local.appendix || {},\n                            ...draft.appendix || {},\n                            ...options.relational ? {\n                                relational: options.relational\n                            } : {}\n                        }\n                    };\n                }\n            }\n        }\n    } catch  {\n    // Swallow integration errors and fall back to local rendering\n    }\n    return buildLocalDraft(payload, geometry);\n}\nasync function buildLocalDraft(payload, geometry) {\n    const name = extractName(payload) || \"Person A\";\n    const { start, end } = extractWindow(payload);\n    const elements = extractElements(payload);\n    const primary = pickPrimaryElement(elements) || geometry?.summary?.dominantElement || null;\n    const picture = [\n        start && end ? `Window ${start} → ${end}` : null,\n        primary ? `Elemental emphasis: ${primary}` : null,\n        `Mirror prepared for ${name}`\n    ].filter(Boolean).join(\" \\xb7 \");\n    // FIELD: Somatic texture — phenomenon, not verdict\n    const fieldMap = {\n        fire: \"A quickening, like a spark catching in dry grass. The heat reads as urgency held in suspension.\",\n        earth: \"A sense of density, like roots taking hold. The weight reads not as burden, but as anchor.\",\n        air: \"A current of change, like wind shifting direction. The movement reads as possibility, not chaos.\",\n        water: \"A pull toward depth, like a river's undertow. The pressure reads as invitation, not undertow.\"\n    };\n    const feeling = primary ? fieldMap[primary] : \"A point of balance—still water under a clear sky. The quiet reads not as absence, but as compression held in suspension.\";\n    // MAP: Structural description — geometry meeting activation\n    const hasTransits = Boolean(start && end);\n    const container = hasTransits ? \"Long-wave structure (natal geometry) meeting short-wave activation (current transit). The tension between them sketches a fulcrum rather than a fault. Here, pressure organizes instead of fragments.\" : \"Long-wave structure only (natal baseline). The permanent inner geometry that shapes how you meet the world. This is the map, not the weather.\";\n    // VOICE: Testable invitation — agency-preserving hypothesis\n    const option = hasTransits ? \"You could test this balance by naming one concrete signal—an action, a word, a silence—that feels like it sits on that fulcrum. Not to solve it, only to see if the stillness bends or holds.\" : \"You could test this pattern by noticing where it shows up in one concrete moment today. The geometry suggests a tendency; your experience confirms whether it translates to lived pressure or remains abstract.\";\n    // Resonance Test: Falsifiability gate\n    const next_step = \"One small, reversible act in the next 24 hours can test the reflection. If it resonates, notice where it lands: In the body (WB), in memory (ABE), or in the outer world (OSR).\";\n    const aspectCount = geometry?.aspects?.length ?? 0;\n    const aspectSummary = aspectCount > 0 ? geometry.aspects.map((a)=>`${a.from}–${a.to} ${a.type}${a.orb ? ` (${a.orb}° orb)` : \"\"}`).join(\"; \") : \"No significant aspects detected\";\n    const symbolicFootnotes = aspectCount > 0 ? \"### Symbolic Footnotes\\n\\n\" + geometry.aspects.map((a, i)=>{\n        const from = a.from.charAt(0).toUpperCase() + a.from.slice(1);\n        const to = a.to.charAt(0).toUpperCase() + a.to.slice(1);\n        const type = a.type;\n        let interpretation = \"\";\n        if (type === \"conjunction\") interpretation = `merges the energies of ${from} and ${to}, creating a focal point of intense, unified expression.`;\n        else if (type === \"opposition\") interpretation = `creates a tension between ${from} and ${to}, demanding balance and integration of seemingly opposite forces.`;\n        else if (type === \"trine\") interpretation = `forms a harmonious flow between ${from} and ${to}, indicating natural talent and ease.`;\n        else if (type === \"square\") interpretation = `builds dynamic friction between ${from} and ${to}, prompting action and demanding resolution.`;\n        else interpretation = `links ${from} and ${to} in a significant pattern.`;\n        return `${i + 1}. **${from} ${type} ${to}**: This aspect ${interpretation}`;\n    }).join(\"\\n\") : \"\";\n    // Generate personality reflection based on elemental emphasis\n    const personalityReflection = primary ? primary === \"fire\" ? \"You tend to learn through action. Movement precedes understanding; initiative reveals the path. When stuck, forward motion often dissolves the uncertainty.\" : primary === \"earth\" ? \"You tend to trust what can be built and tested. Stability arrives through consistent effort. When overwhelmed, return to what is tangible and verifiable.\" : primary === \"air\" ? \"You tend to understand through connection and exchange. Ideas clarify when shared; isolation can feel like stagnation. When uncertain, reach for conversation or new perspective.\" : \"You tend to navigate through feeling and depth. Emotional truth often arrives before rational clarity. When disconnected, stillness and introspection restore alignment.\" : \"Your pattern suggests balanced engagement with all elements—fire, earth, air, water. This creates versatility, but may require conscious choice about which mode serves the current moment.\";\n    const readerMarkdown = `# Mirror Reading for ${name}\n\n## Geometric Overview\nThis reflection translates symbolic geometry into testable language. The configuration shows **${aspectCount}** major aspect${aspectCount !== 1 ? \"s\" : \"\"}: *${aspectSummary}*.\n\n${primary ? `The dominant elemental pressure leans toward **${primary}**. This suggests a climate where themes of ${primary === \"fire\" ? \"initiative and action\" : primary === \"earth\" ? \"structure and stability\" : primary === \"air\" ? \"connection and ideas\" : \"emotion and depth\"} may feel more present.` : \"The elemental pressures are balanced, suggesting a climate of integration.\"}\n\n## Symbolic Weather\n${start && end ? `This reading covers the period from ${start} to ${end}, tracking how a current symbolic \"weather\" pattern interacts with your natal \"blueprint.\"` : \"This reading reflects your natal baseline—the permanent inner structure that shapes how you meet the world.\"}\n\nThe aspects above create channels of flow and points of friction. The most resonant insights often emerge where you can feel these geometric patterns as lived experience.\n\n${symbolicFootnotes}\n\n## Resonant Reflection\n${personalityReflection}\n\n${aspectCount > 0 ? \"The aspects in your chart create specific pressure points—moments where energy concentrates and choice becomes visible. These are not mandates, but invitations. Where the geometry suggests tension, you may feel the pull to act, integrate, or reframe.\" : \"With minimal major aspects detected, the chart suggests a more fluid, self-directed quality. The absence of strong geometric pressure can mean greater freedom—or the need to consciously create your own momentum.\"}\n\n## What to Track\nNotice where the feeling of **${primary || \"elemental balance\"}** shows up. The geometry is a map of potential; your experience is the ground truth. A testable mirror emerges when you can name one concrete moment where you felt the pull of these patterns. That is the beginning of a dialogue with the symbols.\n\n---\n\n*This reading offers hypotheses drawn from symbolic geometry. Its accuracy emerges only through comparison with lived experience. Mark what resonates: **WB** (fits), **ABE** (partially fits), **OSR** (doesn't fit). Testing creates truth.*`;\n    const appendix = {\n        aspects: geometry?.aspects ?? [],\n        reader_markdown: readerMarkdown\n    };\n    const relational = extractRelationalContext(payload);\n    if (elements) appendix.elements = elements;\n    if (start || end) {\n        appendix.period_start = start || null;\n        appendix.period_end = end || null;\n    }\n    if (relational) appendix.relational_context = relational;\n    return {\n        picture,\n        feeling,\n        container,\n        option,\n        next_step,\n        appendix\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDhKQUNBQSxZQUFZLFFBQ1osc0xBQ0EsNktBQ0Y7SUFFSixNQUFNeUIsaUJBQWlCLENBQUMscUJBQXFCLEVBQUV4RCxLQUFLOzs7K0ZBR3lDLEVBQUV5QyxZQUFZLGVBQWUsRUFBRUEsZ0JBQWdCLElBQUksTUFBTSxHQUFHLEdBQUcsRUFBRUUsY0FBYzs7QUFFOUssRUFBRVosVUFBVSxDQUFDLCtDQUErQyxFQUFFQSxRQUFRLDRDQUE0QyxFQUFFQSxZQUFZLFNBQVMsMEJBQTBCQSxZQUFZLFVBQVUsNEJBQTRCQSxZQUFZLFFBQVEseUJBQXlCLG9CQUFvQix1QkFBdUIsQ0FBQyxHQUFHLDZFQUE2RTs7O0FBRzlYLEVBQUUxQyxTQUFTSSxNQUFNLENBQUMsb0NBQW9DLEVBQUVKLE1BQU0sSUFBSSxFQUFFSSxJQUFJLDBGQUEwRixDQUFDLEdBQUcsOEdBQThHOzs7O0FBSXBSLEVBQUV3RCxrQkFBa0I7OztBQUdwQixFQUFFTSxzQkFBc0I7O0FBRXhCLEVBQUVkLGNBQWMsSUFBSSwrUEFBK1Asc05BQXNOOzs7OEJBRzNjLEVBQUVWLFdBQVcsb0JBQW9COzs7OzhPQUkrSyxDQUFDO0lBRTdPLE1BQU1ELFdBQWdDO1FBQ3BDWSxTQUFTdkMsVUFBVXVDLFdBQVcsRUFBRTtRQUNoQ2UsaUJBQWlCRDtJQUNuQjtJQUNBLE1BQU0xQyxhQUFhekMseUJBQXlCZjtJQUM1QyxJQUFJa0IsVUFBVXNELFNBQVN0RCxRQUFRLEdBQUdBO0lBQ2xDLElBQUlhLFNBQVNJLEtBQUs7UUFDaEJxQyxTQUFTNEIsWUFBWSxHQUFHckUsU0FBUztRQUNqQ3lDLFNBQVM2QixVQUFVLEdBQUdsRSxPQUFPO0lBQy9CO0lBQ0EsSUFBSXFCLFlBQVlnQixTQUFTM0Qsa0JBQWtCLEdBQUcyQztJQUU5QyxPQUFPO1FBQUVXO1FBQVNDO1FBQVNDO1FBQVdDO1FBQVFDO1FBQVdDO0lBQVM7QUFDcEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Zlbi13ZWItYXBwLy4vbGliL3BpcGVsaW5lL21pcnJvclJlbmRlcmVyLnRzPzdlZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOb3JtYWxpemVkR2VvbWV0cnkgfSBmcm9tICcuL21hdGhCcmFpbkFkYXB0ZXInO1xuaW1wb3J0IHsgYW5hbHl6ZVJlbGF0aW9uc2hpcCB9IGZyb20gJy4vcmVsYXRpb25hbEFkYXB0ZXInO1xuXG50eXBlIFdvdmVuSGVhZGVyID0ge1xuICBtb2RlPzogc3RyaW5nO1xuICBzdWJqZWN0X25hbWU/OiBzdHJpbmc7XG4gIHJlYWRlcl9pZD86IHN0cmluZztcbiAgaW5jbHVkZV9wZXJzb25hX2NvbnRleHQ/OiBib29sZWFuO1xuICBtYXBfc291cmNlPzogc3RyaW5nO1xuICBpbnRlZ3JhdGlvbl9tb2RlPzogc3RyaW5nO1xuICByZWZlcmVuY2VfZGF0ZT86IHN0cmluZztcbiAgcmVsYXRpb25hbF9jb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn07XG5cbmZ1bmN0aW9uIGV4dHJhY3RXb3ZlbkhlYWRlcihwYXlsb2FkOiBhbnkpOiBXb3ZlbkhlYWRlciB8IG51bGwge1xuICBpZiAoIXBheWxvYWQgfHwgdHlwZW9mIHBheWxvYWQgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgaGVhZGVyID1cbiAgICBwYXlsb2FkLldvdmVuX0hlYWRlciB8fFxuICAgIHBheWxvYWRbJ1dvdmVuIEhlYWRlciddIHx8XG4gICAgcGF5bG9hZC5Xb3ZlbkhlYWRlciB8fFxuICAgIG51bGw7XG4gIGlmICghaGVhZGVyIHx8IHR5cGVvZiBoZWFkZXIgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgaCA9IGhlYWRlciBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICByZXR1cm4ge1xuICAgIG1vZGU6IHR5cGVvZiBoLm1vZGUgPT09ICdzdHJpbmcnID8gaC5tb2RlIDogdW5kZWZpbmVkLFxuICAgIHN1YmplY3RfbmFtZTogdHlwZW9mIGguc3ViamVjdF9uYW1lID09PSAnc3RyaW5nJyA/IGguc3ViamVjdF9uYW1lIDogdW5kZWZpbmVkLFxuICAgIHJlYWRlcl9pZDogdHlwZW9mIGgucmVhZGVyX2lkID09PSAnc3RyaW5nJyA/IGgucmVhZGVyX2lkIDogdW5kZWZpbmVkLFxuICAgIGluY2x1ZGVfcGVyc29uYV9jb250ZXh0OlxuICAgICAgdHlwZW9mIGguaW5jbHVkZV9wZXJzb25hX2NvbnRleHQgPT09ICdib29sZWFuJyA/IGguaW5jbHVkZV9wZXJzb25hX2NvbnRleHQgOiB1bmRlZmluZWQsXG4gICAgbWFwX3NvdXJjZTogdHlwZW9mIGgubWFwX3NvdXJjZSA9PT0gJ3N0cmluZycgPyBoLm1hcF9zb3VyY2UgOiB1bmRlZmluZWQsXG4gICAgaW50ZWdyYXRpb25fbW9kZTogdHlwZW9mIGguaW50ZWdyYXRpb25fbW9kZSA9PT0gJ3N0cmluZycgPyBoLmludGVncmF0aW9uX21vZGUgOiB1bmRlZmluZWQsXG4gICAgcmVmZXJlbmNlX2RhdGU6IHR5cGVvZiBoLnJlZmVyZW5jZV9kYXRlID09PSAnc3RyaW5nJyA/IGgucmVmZXJlbmNlX2RhdGUgOiB1bmRlZmluZWQsXG4gICAgcmVsYXRpb25hbF9jb250ZXh0OlxuICAgICAgaC5yZWxhdGlvbmFsX2NvbnRleHQgJiYgdHlwZW9mIGgucmVsYXRpb25hbF9jb250ZXh0ID09PSAnb2JqZWN0J1xuICAgICAgICA/IChoLnJlbGF0aW9uYWxfY29udGV4dCBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVxuICAgICAgICA6IGgucmVsYXRpb25zaGlwX2NvbnRleHQgJiYgdHlwZW9mIGgucmVsYXRpb25zaGlwX2NvbnRleHQgPT09ICdvYmplY3QnXG4gICAgICAgID8gKGgucmVsYXRpb25zaGlwX2NvbnRleHQgYXMgUmVjb3JkPHN0cmluZywgYW55PilcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RSZWxhdGlvbmFsQ29udGV4dChwYXlsb2FkOiBhbnkpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgaGVhZGVyID0gZXh0cmFjdFdvdmVuSGVhZGVyKHBheWxvYWQpO1xuICBpZiAoaGVhZGVyPy5yZWxhdGlvbmFsX2NvbnRleHQgJiYgdHlwZW9mIGhlYWRlci5yZWxhdGlvbmFsX2NvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGhlYWRlci5yZWxhdGlvbmFsX2NvbnRleHQgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgfVxuICAvLyBGYWxsYmFjazogdG9wLWxldmVsIHJlbGF0aW9uc2hpcC9yZWxhdGlvbmFsIGNvbnRleHQgaWYgZXhwb3NlZCBvdXRzaWRlIHRoZSBoZWFkZXJcbiAgY29uc3QgdG9wID1cbiAgICAocGF5bG9hZCAmJiB0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICgocGF5bG9hZC5yZWxhdGlvbmFsX2NvbnRleHQgJiYgdHlwZW9mIHBheWxvYWQucmVsYXRpb25hbF9jb250ZXh0ID09PSAnb2JqZWN0JyAmJiBwYXlsb2FkLnJlbGF0aW9uYWxfY29udGV4dCkgfHxcbiAgICAgICAgKHBheWxvYWQucmVsYXRpb25zaGlwX2NvbnRleHQgJiYgdHlwZW9mIHBheWxvYWQucmVsYXRpb25zaGlwX2NvbnRleHQgPT09ICdvYmplY3QnICYmIHBheWxvYWQucmVsYXRpb25zaGlwX2NvbnRleHQpKSkgfHxcbiAgICB1bmRlZmluZWQ7XG4gIHJldHVybiB0b3AgYXMgUmVjb3JkPHN0cmluZywgYW55PiB8IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcGlja1ByaW1hcnlFbGVtZW50KGVsZW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWVsZW1lbnRzKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGVsZW1lbnRzKS5maWx0ZXIoKFssIHZdKSA9PiB0eXBlb2YgdiA9PT0gJ251bWJlcicpO1xuICBpZiAoIWVudHJpZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgZW50cmllcy5zb3J0KChhLCBiKSA9PiAoYlsxXSBhcyBudW1iZXIpIC0gKGFbMV0gYXMgbnVtYmVyKSk7XG4gIHJldHVybiBlbnRyaWVzWzBdWzBdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0V2luZG93KHBheWxvYWQ6IGFueSk6IHsgc3RhcnQ/OiBzdHJpbmc7IGVuZD86IHN0cmluZyB9IHtcbiAgY29uc3QgbWMgPSBwYXlsb2FkPy5taXJyb3JfY29udHJhY3QgfHwgcGF5bG9hZD8uY29udHJhY3QgfHwge307XG4gIGNvbnN0IHN0YXJ0ID0gbWM/LnN0YXJ0X2RhdGUgfHwgcGF5bG9hZD8uc3ltYm9saWNfd2VhdGhlcj8ucGVyaW9kcz8uWzBdPy5zdGFydDtcbiAgY29uc3QgZW5kID0gbWM/LmVuZF9kYXRlIHx8IHBheWxvYWQ/LnN5bWJvbGljX3dlYXRoZXI/LnBlcmlvZHM/LlswXT8uZW5kO1xuICByZXR1cm4geyBzdGFydCwgZW5kIH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50cyhwYXlsb2FkOiBhbnkpOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbCB7XG4gIGNvbnN0IHAgPSBwYXlsb2FkPy5zeW1ib2xpY193ZWF0aGVyPy5wZXJpb2RzPy5bMF07XG4gIGlmIChwPy5lbGVtZW50cyAmJiB0eXBlb2YgcC5lbGVtZW50cyA9PT0gJ29iamVjdCcpIHJldHVybiBwLmVsZW1lbnRzIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0TmFtZShwYXlsb2FkOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgaGVhZGVyID0gZXh0cmFjdFdvdmVuSGVhZGVyKHBheWxvYWQpO1xuICBpZiAoaGVhZGVyPy5zdWJqZWN0X25hbWUpIHJldHVybiBoZWFkZXIuc3ViamVjdF9uYW1lO1xuICBjb25zdCBhID0gcGF5bG9hZD8ucGVyc29uX2EgfHwgcGF5bG9hZD8ucGVyc29uQSB8fCB7fTtcbiAgcmV0dXJuIChcbiAgICBhPy5uYW1lIHx8XG4gICAgYT8uZGV0YWlscz8ubmFtZSB8fFxuICAgIHBheWxvYWQ/Lm1pcnJvcl9jb250cmFjdD8ucGVyc29uX2E/Lm5hbWUgfHxcbiAgICBudWxsXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJNaXJyb3JEcmFmdChwYXlsb2FkOiBhbnksIGdlb21ldHJ5OiBOb3JtYWxpemVkR2VvbWV0cnkpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGFueT4+IHtcbiAgLy8gQXR0ZW1wdCB0byB1c2UgdGhlIGV4aXN0aW5nIFJhdmVuIHJlbmRlcmVyIHdoZW4gYXZhaWxhYmxlLiBGYWxsYmFjayB0byBsb2NhbCBkcmFmdCBvdGhlcndpc2UuXG4gIHRyeSB7XG4gICAgLy8gQWxsb3cgb3B0LW91dCB2aWEgZW52IGlmIG5lZWRlZFxuICAgIGNvbnN0IGFsbG93SW50ZWdyYXRpb24gPSBwcm9jZXNzLmVudi5SQVZFTl9SRU5ERVJfSU5URUdSQVRJT04gIT09ICcwJztcbiAgICBpZiAoYWxsb3dJbnRlZ3JhdGlvbikge1xuICAgICAgLy8gRHluYW1pYyBpbXBvcnQgdG8gYXZvaWQgYnVpbGQtdGltZSBoYXJkIGRlcGVuZGVuY3kgaW4gbWluaW1hbCB0ZXN0IGhhcm5lc3Nlc1xuICAgICAgY29uc3QgbW9kOiBhbnkgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3JhdmVuL3JlbmRlcicpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgY29uc3QgcmVuZGVyRm46IGFueSA9IG1vZD8ucmVuZGVyU2hhcmVhYmxlTWlycm9yIHx8IG1vZD8ucmVuZGVyTWlycm9yIHx8IG1vZD8uZGVmYXVsdDtcbiAgICAgIGlmICh0eXBlb2YgcmVuZGVyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZXh0cmFjdFdvdmVuSGVhZGVyKHBheWxvYWQpO1xuICAgICAgICAvLyBDb21wdXRlIHJlbGF0aW9uYWwgcGxhY2Vob2xkZXJzIGlmIHJlbGF0aW9uYWwgY29udGV4dCBwcmVzZW50XG4gICAgICAgIGxldCByZWxhdGlvbmFsOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGhhc1JlbCA9IEJvb2xlYW4oaGVhZGVyPy5yZWxhdGlvbmFsX2NvbnRleHQpIHx8IEJvb2xlYW4ocGF5bG9hZD8ucGVyc29uX2IpO1xuICAgICAgICAgIGlmIChoYXNSZWwpIHtcbiAgICAgICAgICAgIHJlbGF0aW9uYWwgPSBhd2FpdCBhbmFseXplUmVsYXRpb25zaGlwKHBheWxvYWQsIGdlb21ldHJ5LCBoZWFkZXIgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHJlbGF0aW9uYWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvdiA9IHtcbiAgICAgICAgICBzb3VyY2U6ICdQb2V0aWMgQnJhaW4gKFBpcGVsaW5lKScsXG4gICAgICAgICAgcmVhZGVyX2lkOiBoZWFkZXI/LnJlYWRlcl9pZCxcbiAgICAgICAgICBzdWJqZWN0X25hbWU6IGhlYWRlcj8uc3ViamVjdF9uYW1lLFxuICAgICAgICAgIHJlZmVyZW5jZV9kYXRlOiBoZWFkZXI/LnJlZmVyZW5jZV9kYXRlLFxuICAgICAgICAgIGludGVncmF0aW9uX21vZGU6IGhlYWRlcj8uaW50ZWdyYXRpb25fbW9kZSxcbiAgICAgICAgICByZWxhdGlvbmFsX2NvbnRleHQ6IGhlYWRlcj8ucmVsYXRpb25hbF9jb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIG1vZGU6IGhlYWRlcj8ubW9kZSxcbiAgICAgICAgICBpbmNsdWRlX3BlcnNvbmFfY29udGV4dDogaGVhZGVyPy5pbmNsdWRlX3BlcnNvbmFfY29udGV4dCxcbiAgICAgICAgICBtYXBfc291cmNlOiBoZWFkZXI/Lm1hcF9zb3VyY2UsXG4gICAgICAgICAgcmVsYXRpb25hbCxcbiAgICAgICAgfSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICBjb25zdCBkcmFmdCA9IGF3YWl0IHJlbmRlckZuKHsgZ2VvOiBnZW9tZXRyeSwgcHJvdiwgb3B0aW9ucyB9KTtcbiAgICAgICAgaWYgKGRyYWZ0ICYmIHR5cGVvZiBkcmFmdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgcmVxdWlyZWQgZmllbGRzIGV4aXN0OyBpZiBtaXNzaW5nLCBtZXJnZSB3aXRoIGxvY2FsIGRlZmF1bHRzXG4gICAgICAgICAgY29uc3QgbG9jYWwgPSBhd2FpdCBidWlsZExvY2FsRHJhZnQocGF5bG9hZCwgZ2VvbWV0cnkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwaWN0dXJlOiBkcmFmdC5waWN0dXJlID8/IGxvY2FsLnBpY3R1cmUsXG4gICAgICAgICAgICBmZWVsaW5nOiBkcmFmdC5mZWVsaW5nID8/IGxvY2FsLmZlZWxpbmcsXG4gICAgICAgICAgICBjb250YWluZXI6IGRyYWZ0LmNvbnRhaW5lciA/PyBsb2NhbC5jb250YWluZXIsXG4gICAgICAgICAgICBvcHRpb246IGRyYWZ0Lm9wdGlvbiA/PyBsb2NhbC5vcHRpb24sXG4gICAgICAgICAgICBuZXh0X3N0ZXA6IGRyYWZ0Lm5leHRfc3RlcCA/PyBsb2NhbC5uZXh0X3N0ZXAsXG4gICAgICAgICAgICBhcHBlbmRpeDoge1xuICAgICAgICAgICAgICAuLi4obG9jYWwuYXBwZW5kaXggfHwge30pLFxuICAgICAgICAgICAgICAuLi4oZHJhZnQuYXBwZW5kaXggfHwge30pLFxuICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5yZWxhdGlvbmFsID8geyByZWxhdGlvbmFsOiBvcHRpb25zLnJlbGF0aW9uYWwgfSA6IHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gU3dhbGxvdyBpbnRlZ3JhdGlvbiBlcnJvcnMgYW5kIGZhbGwgYmFjayB0byBsb2NhbCByZW5kZXJpbmdcbiAgfVxuXG4gIHJldHVybiBidWlsZExvY2FsRHJhZnQocGF5bG9hZCwgZ2VvbWV0cnkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBidWlsZExvY2FsRHJhZnQocGF5bG9hZDogYW55LCBnZW9tZXRyeTogTm9ybWFsaXplZEdlb21ldHJ5KTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG4gIGNvbnN0IG5hbWUgPSBleHRyYWN0TmFtZShwYXlsb2FkKSB8fCAnUGVyc29uIEEnO1xuICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGV4dHJhY3RXaW5kb3cocGF5bG9hZCk7XG4gIGNvbnN0IGVsZW1lbnRzID0gZXh0cmFjdEVsZW1lbnRzKHBheWxvYWQpO1xuICBjb25zdCBwcmltYXJ5ID0gcGlja1ByaW1hcnlFbGVtZW50KGVsZW1lbnRzKSB8fCBnZW9tZXRyeT8uc3VtbWFyeT8uZG9taW5hbnRFbGVtZW50IHx8IG51bGw7XG5cbiAgY29uc3QgcGljdHVyZSA9IFtcbiAgICBzdGFydCAmJiBlbmQgPyBgV2luZG93ICR7c3RhcnR9IOKGkiAke2VuZH1gIDogbnVsbCxcbiAgICBwcmltYXJ5ID8gYEVsZW1lbnRhbCBlbXBoYXNpczogJHtwcmltYXJ5fWAgOiBudWxsLFxuICAgIGBNaXJyb3IgcHJlcGFyZWQgZm9yICR7bmFtZX1gLFxuICBdXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICAgIC5qb2luKCcgwrcgJyk7XG5cbiAgLy8gRklFTEQ6IFNvbWF0aWMgdGV4dHVyZSDigJQgcGhlbm9tZW5vbiwgbm90IHZlcmRpY3RcbiAgY29uc3QgZmllbGRNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgZmlyZTogJ0EgcXVpY2tlbmluZywgbGlrZSBhIHNwYXJrIGNhdGNoaW5nIGluIGRyeSBncmFzcy4gVGhlIGhlYXQgcmVhZHMgYXMgdXJnZW5jeSBoZWxkIGluIHN1c3BlbnNpb24uJyxcbiAgICBlYXJ0aDogJ0Egc2Vuc2Ugb2YgZGVuc2l0eSwgbGlrZSByb290cyB0YWtpbmcgaG9sZC4gVGhlIHdlaWdodCByZWFkcyBub3QgYXMgYnVyZGVuLCBidXQgYXMgYW5jaG9yLicsXG4gICAgYWlyOiAnQSBjdXJyZW50IG9mIGNoYW5nZSwgbGlrZSB3aW5kIHNoaWZ0aW5nIGRpcmVjdGlvbi4gVGhlIG1vdmVtZW50IHJlYWRzIGFzIHBvc3NpYmlsaXR5LCBub3QgY2hhb3MuJyxcbiAgICB3YXRlcjogXCJBIHB1bGwgdG93YXJkIGRlcHRoLCBsaWtlIGEgcml2ZXIncyB1bmRlcnRvdy4gVGhlIHByZXNzdXJlIHJlYWRzIGFzIGludml0YXRpb24sIG5vdCB1bmRlcnRvdy5cIixcbiAgfTtcblxuICBjb25zdCBmZWVsaW5nID0gcHJpbWFyeVxuICAgID8gZmllbGRNYXBbcHJpbWFyeV1cbiAgICA6ICdBIHBvaW50IG9mIGJhbGFuY2XigJRzdGlsbCB3YXRlciB1bmRlciBhIGNsZWFyIHNreS4gVGhlIHF1aWV0IHJlYWRzIG5vdCBhcyBhYnNlbmNlLCBidXQgYXMgY29tcHJlc3Npb24gaGVsZCBpbiBzdXNwZW5zaW9uLic7XG5cbiAgLy8gTUFQOiBTdHJ1Y3R1cmFsIGRlc2NyaXB0aW9uIOKAlCBnZW9tZXRyeSBtZWV0aW5nIGFjdGl2YXRpb25cbiAgY29uc3QgaGFzVHJhbnNpdHMgPSBCb29sZWFuKHN0YXJ0ICYmIGVuZCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGhhc1RyYW5zaXRzXG4gICAgPyAnTG9uZy13YXZlIHN0cnVjdHVyZSAobmF0YWwgZ2VvbWV0cnkpIG1lZXRpbmcgc2hvcnQtd2F2ZSBhY3RpdmF0aW9uIChjdXJyZW50IHRyYW5zaXQpLiBUaGUgdGVuc2lvbiBiZXR3ZWVuIHRoZW0gc2tldGNoZXMgYSBmdWxjcnVtIHJhdGhlciB0aGFuIGEgZmF1bHQuIEhlcmUsIHByZXNzdXJlIG9yZ2FuaXplcyBpbnN0ZWFkIG9mIGZyYWdtZW50cy4nXG4gICAgOiAnTG9uZy13YXZlIHN0cnVjdHVyZSBvbmx5IChuYXRhbCBiYXNlbGluZSkuIFRoZSBwZXJtYW5lbnQgaW5uZXIgZ2VvbWV0cnkgdGhhdCBzaGFwZXMgaG93IHlvdSBtZWV0IHRoZSB3b3JsZC4gVGhpcyBpcyB0aGUgbWFwLCBub3QgdGhlIHdlYXRoZXIuJztcblxuICAvLyBWT0lDRTogVGVzdGFibGUgaW52aXRhdGlvbiDigJQgYWdlbmN5LXByZXNlcnZpbmcgaHlwb3RoZXNpc1xuICBjb25zdCBvcHRpb24gPSBoYXNUcmFuc2l0c1xuICAgID8gJ1lvdSBjb3VsZCB0ZXN0IHRoaXMgYmFsYW5jZSBieSBuYW1pbmcgb25lIGNvbmNyZXRlIHNpZ25hbOKAlGFuIGFjdGlvbiwgYSB3b3JkLCBhIHNpbGVuY2XigJR0aGF0IGZlZWxzIGxpa2UgaXQgc2l0cyBvbiB0aGF0IGZ1bGNydW0uIE5vdCB0byBzb2x2ZSBpdCwgb25seSB0byBzZWUgaWYgdGhlIHN0aWxsbmVzcyBiZW5kcyBvciBob2xkcy4nXG4gICAgOiAnWW91IGNvdWxkIHRlc3QgdGhpcyBwYXR0ZXJuIGJ5IG5vdGljaW5nIHdoZXJlIGl0IHNob3dzIHVwIGluIG9uZSBjb25jcmV0ZSBtb21lbnQgdG9kYXkuIFRoZSBnZW9tZXRyeSBzdWdnZXN0cyBhIHRlbmRlbmN5OyB5b3VyIGV4cGVyaWVuY2UgY29uZmlybXMgd2hldGhlciBpdCB0cmFuc2xhdGVzIHRvIGxpdmVkIHByZXNzdXJlIG9yIHJlbWFpbnMgYWJzdHJhY3QuJztcblxuICAvLyBSZXNvbmFuY2UgVGVzdDogRmFsc2lmaWFiaWxpdHkgZ2F0ZVxuICBjb25zdCBuZXh0X3N0ZXAgPVxuICAgICdPbmUgc21hbGwsIHJldmVyc2libGUgYWN0IGluIHRoZSBuZXh0IDI0IGhvdXJzIGNhbiB0ZXN0IHRoZSByZWZsZWN0aW9uLiBJZiBpdCByZXNvbmF0ZXMsIG5vdGljZSB3aGVyZSBpdCBsYW5kczogSW4gdGhlIGJvZHkgKFdCKSwgaW4gbWVtb3J5IChBQkUpLCBvciBpbiB0aGUgb3V0ZXIgd29ybGQgKE9TUikuJztcblxuICBjb25zdCBhc3BlY3RDb3VudCA9IGdlb21ldHJ5Py5hc3BlY3RzPy5sZW5ndGggPz8gMDtcbiAgY29uc3QgYXNwZWN0U3VtbWFyeSA9IGFzcGVjdENvdW50ID4gMFxuICAgID8gZ2VvbWV0cnkuYXNwZWN0cy5tYXAoKGE6IGFueSkgPT4gYCR7YS5mcm9tfeKAkyR7YS50b30gJHthLnR5cGV9JHthLm9yYiA/IGAgKCR7YS5vcmJ9wrAgb3JiKWAgOiAnJ31gKS5qb2luKCc7ICcpXG4gICAgOiAnTm8gc2lnbmlmaWNhbnQgYXNwZWN0cyBkZXRlY3RlZCc7XG5cbiAgY29uc3Qgc3ltYm9saWNGb290bm90ZXMgPSBhc3BlY3RDb3VudCA+IDBcbiAgICA/ICcjIyMgU3ltYm9saWMgRm9vdG5vdGVzXFxuXFxuJyArIGdlb21ldHJ5LmFzcGVjdHMubWFwKChhOiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBmcm9tID0gYS5mcm9tLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYS5mcm9tLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCB0byA9IGEudG8uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBhLnRvLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCB0eXBlID0gYS50eXBlO1xuICAgICAgICBsZXQgaW50ZXJwcmV0YXRpb24gPSAnJztcbiAgICAgICAgaWYgKHR5cGUgPT09ICdjb25qdW5jdGlvbicpIGludGVycHJldGF0aW9uID0gYG1lcmdlcyB0aGUgZW5lcmdpZXMgb2YgJHtmcm9tfSBhbmQgJHt0b30sIGNyZWF0aW5nIGEgZm9jYWwgcG9pbnQgb2YgaW50ZW5zZSwgdW5pZmllZCBleHByZXNzaW9uLmA7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdvcHBvc2l0aW9uJykgaW50ZXJwcmV0YXRpb24gPSBgY3JlYXRlcyBhIHRlbnNpb24gYmV0d2VlbiAke2Zyb219IGFuZCAke3RvfSwgZGVtYW5kaW5nIGJhbGFuY2UgYW5kIGludGVncmF0aW9uIG9mIHNlZW1pbmdseSBvcHBvc2l0ZSBmb3JjZXMuYDtcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3RyaW5lJykgaW50ZXJwcmV0YXRpb24gPSBgZm9ybXMgYSBoYXJtb25pb3VzIGZsb3cgYmV0d2VlbiAke2Zyb219IGFuZCAke3RvfSwgaW5kaWNhdGluZyBuYXR1cmFsIHRhbGVudCBhbmQgZWFzZS5gO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnc3F1YXJlJykgaW50ZXJwcmV0YXRpb24gPSBgYnVpbGRzIGR5bmFtaWMgZnJpY3Rpb24gYmV0d2VlbiAke2Zyb219IGFuZCAke3RvfSwgcHJvbXB0aW5nIGFjdGlvbiBhbmQgZGVtYW5kaW5nIHJlc29sdXRpb24uYDtcbiAgICAgICAgZWxzZSBpbnRlcnByZXRhdGlvbiA9IGBsaW5rcyAke2Zyb219IGFuZCAke3RvfSBpbiBhIHNpZ25pZmljYW50IHBhdHRlcm4uYDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgJHtpICsgMX0uICoqJHtmcm9tfSAke3R5cGV9ICR7dG99Kio6IFRoaXMgYXNwZWN0ICR7aW50ZXJwcmV0YXRpb259YDtcbiAgICAgIH0pLmpvaW4oJ1xcbicpXG4gICAgOiAnJztcblxuICAvLyBHZW5lcmF0ZSBwZXJzb25hbGl0eSByZWZsZWN0aW9uIGJhc2VkIG9uIGVsZW1lbnRhbCBlbXBoYXNpc1xuICBjb25zdCBwZXJzb25hbGl0eVJlZmxlY3Rpb24gPSBwcmltYXJ5XG4gICAgPyBwcmltYXJ5ID09PSAnZmlyZSdcbiAgICAgID8gJ1lvdSB0ZW5kIHRvIGxlYXJuIHRocm91Z2ggYWN0aW9uLiBNb3ZlbWVudCBwcmVjZWRlcyB1bmRlcnN0YW5kaW5nOyBpbml0aWF0aXZlIHJldmVhbHMgdGhlIHBhdGguIFdoZW4gc3R1Y2ssIGZvcndhcmQgbW90aW9uIG9mdGVuIGRpc3NvbHZlcyB0aGUgdW5jZXJ0YWludHkuJ1xuICAgICAgOiBwcmltYXJ5ID09PSAnZWFydGgnXG4gICAgICA/ICdZb3UgdGVuZCB0byB0cnVzdCB3aGF0IGNhbiBiZSBidWlsdCBhbmQgdGVzdGVkLiBTdGFiaWxpdHkgYXJyaXZlcyB0aHJvdWdoIGNvbnNpc3RlbnQgZWZmb3J0LiBXaGVuIG92ZXJ3aGVsbWVkLCByZXR1cm4gdG8gd2hhdCBpcyB0YW5naWJsZSBhbmQgdmVyaWZpYWJsZS4nXG4gICAgICA6IHByaW1hcnkgPT09ICdhaXInXG4gICAgICA/ICdZb3UgdGVuZCB0byB1bmRlcnN0YW5kIHRocm91Z2ggY29ubmVjdGlvbiBhbmQgZXhjaGFuZ2UuIElkZWFzIGNsYXJpZnkgd2hlbiBzaGFyZWQ7IGlzb2xhdGlvbiBjYW4gZmVlbCBsaWtlIHN0YWduYXRpb24uIFdoZW4gdW5jZXJ0YWluLCByZWFjaCBmb3IgY29udmVyc2F0aW9uIG9yIG5ldyBwZXJzcGVjdGl2ZS4nXG4gICAgICA6ICdZb3UgdGVuZCB0byBuYXZpZ2F0ZSB0aHJvdWdoIGZlZWxpbmcgYW5kIGRlcHRoLiBFbW90aW9uYWwgdHJ1dGggb2Z0ZW4gYXJyaXZlcyBiZWZvcmUgcmF0aW9uYWwgY2xhcml0eS4gV2hlbiBkaXNjb25uZWN0ZWQsIHN0aWxsbmVzcyBhbmQgaW50cm9zcGVjdGlvbiByZXN0b3JlIGFsaWdubWVudC4nXG4gICAgOiAnWW91ciBwYXR0ZXJuIHN1Z2dlc3RzIGJhbGFuY2VkIGVuZ2FnZW1lbnQgd2l0aCBhbGwgZWxlbWVudHPigJRmaXJlLCBlYXJ0aCwgYWlyLCB3YXRlci4gVGhpcyBjcmVhdGVzIHZlcnNhdGlsaXR5LCBidXQgbWF5IHJlcXVpcmUgY29uc2Npb3VzIGNob2ljZSBhYm91dCB3aGljaCBtb2RlIHNlcnZlcyB0aGUgY3VycmVudCBtb21lbnQuJztcblxuICBjb25zdCByZWFkZXJNYXJrZG93biA9IGAjIE1pcnJvciBSZWFkaW5nIGZvciAke25hbWV9XG5cbiMjIEdlb21ldHJpYyBPdmVydmlld1xuVGhpcyByZWZsZWN0aW9uIHRyYW5zbGF0ZXMgc3ltYm9saWMgZ2VvbWV0cnkgaW50byB0ZXN0YWJsZSBsYW5ndWFnZS4gVGhlIGNvbmZpZ3VyYXRpb24gc2hvd3MgKioke2FzcGVjdENvdW50fSoqIG1ham9yIGFzcGVjdCR7YXNwZWN0Q291bnQgIT09IDEgPyAncycgOiAnJ306ICoke2FzcGVjdFN1bW1hcnl9Ki5cblxuJHtwcmltYXJ5ID8gYFRoZSBkb21pbmFudCBlbGVtZW50YWwgcHJlc3N1cmUgbGVhbnMgdG93YXJkICoqJHtwcmltYXJ5fSoqLiBUaGlzIHN1Z2dlc3RzIGEgY2xpbWF0ZSB3aGVyZSB0aGVtZXMgb2YgJHtwcmltYXJ5ID09PSAnZmlyZScgPyAnaW5pdGlhdGl2ZSBhbmQgYWN0aW9uJyA6IHByaW1hcnkgPT09ICdlYXJ0aCcgPyAnc3RydWN0dXJlIGFuZCBzdGFiaWxpdHknIDogcHJpbWFyeSA9PT0gJ2FpcicgPyAnY29ubmVjdGlvbiBhbmQgaWRlYXMnIDogJ2Vtb3Rpb24gYW5kIGRlcHRoJ30gbWF5IGZlZWwgbW9yZSBwcmVzZW50LmAgOiAnVGhlIGVsZW1lbnRhbCBwcmVzc3VyZXMgYXJlIGJhbGFuY2VkLCBzdWdnZXN0aW5nIGEgY2xpbWF0ZSBvZiBpbnRlZ3JhdGlvbi4nfVxuXG4jIyBTeW1ib2xpYyBXZWF0aGVyXG4ke3N0YXJ0ICYmIGVuZCA/IGBUaGlzIHJlYWRpbmcgY292ZXJzIHRoZSBwZXJpb2QgZnJvbSAke3N0YXJ0fSB0byAke2VuZH0sIHRyYWNraW5nIGhvdyBhIGN1cnJlbnQgc3ltYm9saWMgXCJ3ZWF0aGVyXCIgcGF0dGVybiBpbnRlcmFjdHMgd2l0aCB5b3VyIG5hdGFsIFwiYmx1ZXByaW50LlwiYCA6ICdUaGlzIHJlYWRpbmcgcmVmbGVjdHMgeW91ciBuYXRhbCBiYXNlbGluZeKAlHRoZSBwZXJtYW5lbnQgaW5uZXIgc3RydWN0dXJlIHRoYXQgc2hhcGVzIGhvdyB5b3UgbWVldCB0aGUgd29ybGQuJ31cblxuVGhlIGFzcGVjdHMgYWJvdmUgY3JlYXRlIGNoYW5uZWxzIG9mIGZsb3cgYW5kIHBvaW50cyBvZiBmcmljdGlvbi4gVGhlIG1vc3QgcmVzb25hbnQgaW5zaWdodHMgb2Z0ZW4gZW1lcmdlIHdoZXJlIHlvdSBjYW4gZmVlbCB0aGVzZSBnZW9tZXRyaWMgcGF0dGVybnMgYXMgbGl2ZWQgZXhwZXJpZW5jZS5cblxuJHtzeW1ib2xpY0Zvb3Rub3Rlc31cblxuIyMgUmVzb25hbnQgUmVmbGVjdGlvblxuJHtwZXJzb25hbGl0eVJlZmxlY3Rpb259XG5cbiR7YXNwZWN0Q291bnQgPiAwID8gJ1RoZSBhc3BlY3RzIGluIHlvdXIgY2hhcnQgY3JlYXRlIHNwZWNpZmljIHByZXNzdXJlIHBvaW50c+KAlG1vbWVudHMgd2hlcmUgZW5lcmd5IGNvbmNlbnRyYXRlcyBhbmQgY2hvaWNlIGJlY29tZXMgdmlzaWJsZS4gVGhlc2UgYXJlIG5vdCBtYW5kYXRlcywgYnV0IGludml0YXRpb25zLiBXaGVyZSB0aGUgZ2VvbWV0cnkgc3VnZ2VzdHMgdGVuc2lvbiwgeW91IG1heSBmZWVsIHRoZSBwdWxsIHRvIGFjdCwgaW50ZWdyYXRlLCBvciByZWZyYW1lLicgOiAnV2l0aCBtaW5pbWFsIG1ham9yIGFzcGVjdHMgZGV0ZWN0ZWQsIHRoZSBjaGFydCBzdWdnZXN0cyBhIG1vcmUgZmx1aWQsIHNlbGYtZGlyZWN0ZWQgcXVhbGl0eS4gVGhlIGFic2VuY2Ugb2Ygc3Ryb25nIGdlb21ldHJpYyBwcmVzc3VyZSBjYW4gbWVhbiBncmVhdGVyIGZyZWVkb23igJRvciB0aGUgbmVlZCB0byBjb25zY2lvdXNseSBjcmVhdGUgeW91ciBvd24gbW9tZW50dW0uJ31cblxuIyMgV2hhdCB0byBUcmFja1xuTm90aWNlIHdoZXJlIHRoZSBmZWVsaW5nIG9mICoqJHtwcmltYXJ5IHx8ICdlbGVtZW50YWwgYmFsYW5jZSd9Kiogc2hvd3MgdXAuIFRoZSBnZW9tZXRyeSBpcyBhIG1hcCBvZiBwb3RlbnRpYWw7IHlvdXIgZXhwZXJpZW5jZSBpcyB0aGUgZ3JvdW5kIHRydXRoLiBBIHRlc3RhYmxlIG1pcnJvciBlbWVyZ2VzIHdoZW4geW91IGNhbiBuYW1lIG9uZSBjb25jcmV0ZSBtb21lbnQgd2hlcmUgeW91IGZlbHQgdGhlIHB1bGwgb2YgdGhlc2UgcGF0dGVybnMuIFRoYXQgaXMgdGhlIGJlZ2lubmluZyBvZiBhIGRpYWxvZ3VlIHdpdGggdGhlIHN5bWJvbHMuXG5cbi0tLVxuXG4qVGhpcyByZWFkaW5nIG9mZmVycyBoeXBvdGhlc2VzIGRyYXduIGZyb20gc3ltYm9saWMgZ2VvbWV0cnkuIEl0cyBhY2N1cmFjeSBlbWVyZ2VzIG9ubHkgdGhyb3VnaCBjb21wYXJpc29uIHdpdGggbGl2ZWQgZXhwZXJpZW5jZS4gTWFyayB3aGF0IHJlc29uYXRlczogKipXQioqIChmaXRzKSwgKipBQkUqKiAocGFydGlhbGx5IGZpdHMpLCAqKk9TUioqIChkb2Vzbid0IGZpdCkuIFRlc3RpbmcgY3JlYXRlcyB0cnV0aC4qYDtcblxuICBjb25zdCBhcHBlbmRpeDogUmVjb3JkPHN0cmluZywgYW55PiA9IHsgXG4gICAgYXNwZWN0czogZ2VvbWV0cnk/LmFzcGVjdHMgPz8gW10sXG4gICAgcmVhZGVyX21hcmtkb3duOiByZWFkZXJNYXJrZG93blxuICB9O1xuICBjb25zdCByZWxhdGlvbmFsID0gZXh0cmFjdFJlbGF0aW9uYWxDb250ZXh0KHBheWxvYWQpO1xuICBpZiAoZWxlbWVudHMpIGFwcGVuZGl4LmVsZW1lbnRzID0gZWxlbWVudHM7XG4gIGlmIChzdGFydCB8fCBlbmQpIHtcbiAgICBhcHBlbmRpeC5wZXJpb2Rfc3RhcnQgPSBzdGFydCB8fCBudWxsO1xuICAgIGFwcGVuZGl4LnBlcmlvZF9lbmQgPSBlbmQgfHwgbnVsbDtcbiAgfVxuICBpZiAocmVsYXRpb25hbCkgYXBwZW5kaXgucmVsYXRpb25hbF9jb250ZXh0ID0gcmVsYXRpb25hbDtcblxuICByZXR1cm4geyBwaWN0dXJlLCBmZWVsaW5nLCBjb250YWluZXIsIG9wdGlvbiwgbmV4dF9zdGVwLCBhcHBlbmRpeCB9O1xufVxuIl0sIm5hbWVzIjpbImFuYWx5emVSZWxhdGlvbnNoaXAiLCJleHRyYWN0V292ZW5IZWFkZXIiLCJwYXlsb2FkIiwiaGVhZGVyIiwiV292ZW5fSGVhZGVyIiwiV292ZW5IZWFkZXIiLCJoIiwibW9kZSIsInVuZGVmaW5lZCIsInN1YmplY3RfbmFtZSIsInJlYWRlcl9pZCIsImluY2x1ZGVfcGVyc29uYV9jb250ZXh0IiwibWFwX3NvdXJjZSIsImludGVncmF0aW9uX21vZGUiLCJyZWZlcmVuY2VfZGF0ZSIsInJlbGF0aW9uYWxfY29udGV4dCIsInJlbGF0aW9uc2hpcF9jb250ZXh0IiwiZXh0cmFjdFJlbGF0aW9uYWxDb250ZXh0IiwidG9wIiwicGlja1ByaW1hcnlFbGVtZW50IiwiZWxlbWVudHMiLCJlbnRyaWVzIiwiT2JqZWN0IiwiZmlsdGVyIiwidiIsImxlbmd0aCIsInNvcnQiLCJhIiwiYiIsImV4dHJhY3RXaW5kb3ciLCJtYyIsIm1pcnJvcl9jb250cmFjdCIsImNvbnRyYWN0Iiwic3RhcnQiLCJzdGFydF9kYXRlIiwic3ltYm9saWNfd2VhdGhlciIsInBlcmlvZHMiLCJlbmQiLCJlbmRfZGF0ZSIsImV4dHJhY3RFbGVtZW50cyIsInAiLCJleHRyYWN0TmFtZSIsInBlcnNvbl9hIiwicGVyc29uQSIsIm5hbWUiLCJkZXRhaWxzIiwicmVuZGVyTWlycm9yRHJhZnQiLCJnZW9tZXRyeSIsImFsbG93SW50ZWdyYXRpb24iLCJwcm9jZXNzIiwiZW52IiwiUkFWRU5fUkVOREVSX0lOVEVHUkFUSU9OIiwibW9kIiwiY2F0Y2giLCJyZW5kZXJGbiIsInJlbmRlclNoYXJlYWJsZU1pcnJvciIsInJlbmRlck1pcnJvciIsImRlZmF1bHQiLCJyZWxhdGlvbmFsIiwiaGFzUmVsIiwiQm9vbGVhbiIsInBlcnNvbl9iIiwicHJvdiIsInNvdXJjZSIsIm9wdGlvbnMiLCJkcmFmdCIsImdlbyIsImxvY2FsIiwiYnVpbGRMb2NhbERyYWZ0IiwicGljdHVyZSIsImZlZWxpbmciLCJjb250YWluZXIiLCJvcHRpb24iLCJuZXh0X3N0ZXAiLCJhcHBlbmRpeCIsInByaW1hcnkiLCJzdW1tYXJ5IiwiZG9taW5hbnRFbGVtZW50Iiwiam9pbiIsImZpZWxkTWFwIiwiZmlyZSIsImVhcnRoIiwiYWlyIiwid2F0ZXIiLCJoYXNUcmFuc2l0cyIsImFzcGVjdENvdW50IiwiYXNwZWN0cyIsImFzcGVjdFN1bW1hcnkiLCJtYXAiLCJmcm9tIiwidG8iLCJ0eXBlIiwib3JiIiwic3ltYm9saWNGb290bm90ZXMiLCJpIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImludGVycHJldGF0aW9uIiwicGVyc29uYWxpdHlSZWZsZWN0aW9uIiwicmVhZGVyTWFya2Rvd24iLCJyZWFkZXJfbWFya2Rvd24iLCJwZXJpb2Rfc3RhcnQiLCJwZXJpb2RfZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/pipeline/mirrorRenderer.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pipeline/relationalAdapter.ts":
/*!*******************************************!*\
  !*** ./lib/pipeline/relationalAdapter.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeRelationship: () => (/* binding */ analyzeRelationship)\n/* harmony export */ });\n// Minimal relational adapter scaffold.\n// Computes placeholder outputs for synastry/composite and symbolic climates.\n/**\n * Analyze relationship between two fields.\n * Placeholder implementation that derives a stable shape only.\n */ async function analyzeRelationship(payload, geometryA, _header) {\n    const aspectsA = Array.isArray(geometryA?.aspects) ? geometryA.aspects : [];\n    // Placeholder: echo a subset as \"synastry\" to prove shape wiring.\n    const synastry_aspects = aspectsA.slice(0, 3).map((a)=>({\n            from: String(a.from ?? a.planets?.[0] ?? \"A\"),\n            to: String(a.to ?? a.planets?.[1] ?? \"B\"),\n            type: String(a.type ?? a.aspect ?? \"link\"),\n            orb_deg: typeof a.orb === \"number\" ? a.orb : undefined,\n            weight: 1\n        }));\n    // Placeholder: one composite midpoint marker\n    const composite_midpoints = [\n        {\n            point: \"Sun/Moon midpoint\"\n        }\n    ];\n    // Minimal symbolic climate placeholders\n    const shared_symbolic_climate = {\n        magnitude: 1,\n        valence: 0,\n        volatility: 0,\n        drivers: [\n            \"placeholder-shared\"\n        ]\n    };\n    const cross_symbolic_climate = {\n        magnitude: 1,\n        valence: 0,\n        volatility: 0,\n        drivers: [\n            \"placeholder-cross\"\n        ]\n    };\n    return {\n        synastry_aspects,\n        composite_midpoints,\n        shared_symbolic_climate,\n        cross_symbolic_climate\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGlwZWxpbmUvcmVsYXRpb25hbEFkYXB0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHVDQUF1QztBQUN2Qyw2RUFBNkU7QUErQjdFOzs7Q0FHQyxHQUNNLGVBQWVBLG9CQUNwQkMsT0FBWSxFQUNaQyxTQUFrRixFQUNsRkMsT0FBb0M7SUFFcEMsTUFBTUMsV0FBV0MsTUFBTUMsT0FBTyxDQUFDSixXQUFXSyxXQUFXTCxVQUFVSyxPQUFPLEdBQUcsRUFBRTtJQUMzRSxrRUFBa0U7SUFDbEUsTUFBTUMsbUJBQXFDSixTQUFTSyxLQUFLLENBQUMsR0FBRyxHQUFHQyxHQUFHLENBQUMsQ0FBQ0MsSUFBWTtZQUMvRUMsTUFBTUMsT0FBT0YsRUFBRUMsSUFBSSxJQUFJRCxFQUFFRyxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUk7WUFDekNDLElBQUlGLE9BQU9GLEVBQUVJLEVBQUUsSUFBSUosRUFBRUcsT0FBTyxFQUFFLENBQUMsRUFBRSxJQUFJO1lBQ3JDRSxNQUFNSCxPQUFPRixFQUFFSyxJQUFJLElBQUlMLEVBQUVNLE1BQU0sSUFBSTtZQUNuQ0MsU0FBUyxPQUFPUCxFQUFFUSxHQUFHLEtBQUssV0FBV1IsRUFBRVEsR0FBRyxHQUFHQztZQUM3Q0MsUUFBUTtRQUNWO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU1DLHNCQUF3QztRQUM1QztZQUFFQyxPQUFPO1FBQW9CO0tBQzlCO0lBRUQsd0NBQXdDO0lBQ3hDLE1BQU1DLDBCQUEyQztRQUMvQ0MsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLFlBQVk7UUFDWkMsU0FBUztZQUFDO1NBQXFCO0lBQ2pDO0lBQ0EsTUFBTUMseUJBQTBDO1FBQzlDSixXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsWUFBWTtRQUNaQyxTQUFTO1lBQUM7U0FBb0I7SUFDaEM7SUFFQSxPQUFPO1FBQUVwQjtRQUFrQmM7UUFBcUJFO1FBQXlCSztJQUF1QjtBQUNsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdmVuLXdlYi1hcHAvLi9saWIvcGlwZWxpbmUvcmVsYXRpb25hbEFkYXB0ZXIudHM/NzgzZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNaW5pbWFsIHJlbGF0aW9uYWwgYWRhcHRlciBzY2FmZm9sZC5cbi8vIENvbXB1dGVzIHBsYWNlaG9sZGVyIG91dHB1dHMgZm9yIHN5bmFzdHJ5L2NvbXBvc2l0ZSBhbmQgc3ltYm9saWMgY2xpbWF0ZXMuXG5cbmV4cG9ydCB0eXBlIFN5bmFzdHJ5QXNwZWN0ID0ge1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgb3JiX2RlZz86IG51bWJlcjtcbiAgd2VpZ2h0PzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgQ29tcG9zaXRlUG9pbnQgPSB7XG4gIHBvaW50OiBzdHJpbmc7XG4gIGxvbmdpdHVkZT86IG51bWJlcjtcbiAgc2lnbj86IHN0cmluZztcbiAgaG91c2U/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBTeW1ib2xpY0NsaW1hdGUgPSB7XG4gIG1hZ25pdHVkZT86IG51bWJlcjtcbiAgdmFsZW5jZT86IG51bWJlcjtcbiAgdm9sYXRpbGl0eT86IG51bWJlcjtcbiAgZHJpdmVycz86IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IHR5cGUgUmVsYXRpb25hbE91dHB1dCA9IHtcbiAgc3luYXN0cnlfYXNwZWN0czogU3luYXN0cnlBc3BlY3RbXTtcbiAgY29tcG9zaXRlX21pZHBvaW50czogQ29tcG9zaXRlUG9pbnRbXTtcbiAgc2hhcmVkX3N5bWJvbGljX2NsaW1hdGU/OiBTeW1ib2xpY0NsaW1hdGU7XG4gIGNyb3NzX3N5bWJvbGljX2NsaW1hdGU/OiBTeW1ib2xpY0NsaW1hdGU7XG59O1xuXG4vKipcbiAqIEFuYWx5emUgcmVsYXRpb25zaGlwIGJldHdlZW4gdHdvIGZpZWxkcy5cbiAqIFBsYWNlaG9sZGVyIGltcGxlbWVudGF0aW9uIHRoYXQgZGVyaXZlcyBhIHN0YWJsZSBzaGFwZSBvbmx5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZVJlbGF0aW9uc2hpcChcbiAgcGF5bG9hZDogYW55LFxuICBnZW9tZXRyeUE6IHsgYXNwZWN0cz86IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+OyBzdW1tYXJ5PzogUmVjb3JkPHN0cmluZywgYW55PiB9LFxuICBfaGVhZGVyPzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGxcbik6IFByb21pc2U8UmVsYXRpb25hbE91dHB1dD4ge1xuICBjb25zdCBhc3BlY3RzQSA9IEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlBPy5hc3BlY3RzKSA/IGdlb21ldHJ5QS5hc3BlY3RzIDogW107XG4gIC8vIFBsYWNlaG9sZGVyOiBlY2hvIGEgc3Vic2V0IGFzIFwic3luYXN0cnlcIiB0byBwcm92ZSBzaGFwZSB3aXJpbmcuXG4gIGNvbnN0IHN5bmFzdHJ5X2FzcGVjdHM6IFN5bmFzdHJ5QXNwZWN0W10gPSBhc3BlY3RzQS5zbGljZSgwLCAzKS5tYXAoKGE6IGFueSkgPT4gKHtcbiAgICBmcm9tOiBTdHJpbmcoYS5mcm9tID8/IGEucGxhbmV0cz8uWzBdID8/ICdBJyksXG4gICAgdG86IFN0cmluZyhhLnRvID8/IGEucGxhbmV0cz8uWzFdID8/ICdCJyksXG4gICAgdHlwZTogU3RyaW5nKGEudHlwZSA/PyBhLmFzcGVjdCA/PyAnbGluaycpLFxuICAgIG9yYl9kZWc6IHR5cGVvZiBhLm9yYiA9PT0gJ251bWJlcicgPyBhLm9yYiA6IHVuZGVmaW5lZCxcbiAgICB3ZWlnaHQ6IDEsXG4gIH0pKTtcblxuICAvLyBQbGFjZWhvbGRlcjogb25lIGNvbXBvc2l0ZSBtaWRwb2ludCBtYXJrZXJcbiAgY29uc3QgY29tcG9zaXRlX21pZHBvaW50czogQ29tcG9zaXRlUG9pbnRbXSA9IFtcbiAgICB7IHBvaW50OiAnU3VuL01vb24gbWlkcG9pbnQnIH0sXG4gIF07XG5cbiAgLy8gTWluaW1hbCBzeW1ib2xpYyBjbGltYXRlIHBsYWNlaG9sZGVyc1xuICBjb25zdCBzaGFyZWRfc3ltYm9saWNfY2xpbWF0ZTogU3ltYm9saWNDbGltYXRlID0ge1xuICAgIG1hZ25pdHVkZTogMSxcbiAgICB2YWxlbmNlOiAwLFxuICAgIHZvbGF0aWxpdHk6IDAsXG4gICAgZHJpdmVyczogWydwbGFjZWhvbGRlci1zaGFyZWQnXSxcbiAgfTtcbiAgY29uc3QgY3Jvc3Nfc3ltYm9saWNfY2xpbWF0ZTogU3ltYm9saWNDbGltYXRlID0ge1xuICAgIG1hZ25pdHVkZTogMSxcbiAgICB2YWxlbmNlOiAwLFxuICAgIHZvbGF0aWxpdHk6IDAsXG4gICAgZHJpdmVyczogWydwbGFjZWhvbGRlci1jcm9zcyddLFxuICB9O1xuXG4gIHJldHVybiB7IHN5bmFzdHJ5X2FzcGVjdHMsIGNvbXBvc2l0ZV9taWRwb2ludHMsIHNoYXJlZF9zeW1ib2xpY19jbGltYXRlLCBjcm9zc19zeW1ib2xpY19jbGltYXRlIH07XG59XG4iXSwibmFtZXMiOlsiYW5hbHl6ZVJlbGF0aW9uc2hpcCIsInBheWxvYWQiLCJnZW9tZXRyeUEiLCJfaGVhZGVyIiwiYXNwZWN0c0EiLCJBcnJheSIsImlzQXJyYXkiLCJhc3BlY3RzIiwic3luYXN0cnlfYXNwZWN0cyIsInNsaWNlIiwibWFwIiwiYSIsImZyb20iLCJTdHJpbmciLCJwbGFuZXRzIiwidG8iLCJ0eXBlIiwiYXNwZWN0Iiwib3JiX2RlZyIsIm9yYiIsInVuZGVmaW5lZCIsIndlaWdodCIsImNvbXBvc2l0ZV9taWRwb2ludHMiLCJwb2ludCIsInNoYXJlZF9zeW1ib2xpY19jbGltYXRlIiwibWFnbml0dWRlIiwidmFsZW5jZSIsInZvbGF0aWxpdHkiLCJkcml2ZXJzIiwiY3Jvc3Nfc3ltYm9saWNfY2xpbWF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/pipeline/relationalAdapter.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpoetic-brain%2Froute&page=%2Fapi%2Fpoetic-brain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpoetic-brain%2Froute.ts&appDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdancross%2FDocuments%2FGitHub%2FWovenWebApp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();