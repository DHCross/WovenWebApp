"use strict";(()=>{var e={};e.id=153,e.ids=[153],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9934:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>q,staticGenerationAsyncStorage:()=>c});var r={};s.r(r),s.d(r,{GET:()=>d});var a=s(9303),u=s(8716),n=s(670),o=s(7070),i=s(6206);async function d(){try{let e=(0,i.AQ)();return o.NextResponse.json(e)}catch(e){return console.error("Error fetching usage stats:",e),o.NextResponse.json({error:"Failed to fetch usage stats"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/usage/route",pathname:"/api/usage",filename:"route",bundlePath:"app/api/usage/route"},resolvedPagePath:"/Users/dancross/Documents/GitHub/WovenWebApp/app/api/usage/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:q}=l,y="/api/usage/route";function h(){return(0,n.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:c})}},6206:(e,t,s)=>{s.d(t,{AQ:()=>o,EV:()=>i,sT:()=>n});let r={requestsPerMinute:15,requestsPerDay:1500,tokensPerMinute:32e3,tokensPerDay:5e4},a={requestsToday:0,tokensToday:0,lastResetDate:new Date().toDateString(),requestsThisMinute:0,lastMinuteReset:Date.now()};function u(){let e=new Date().toDateString(),t=Date.now();a.lastResetDate!==e&&(a.requestsToday=0,a.tokensToday=0,a.lastResetDate=e),t-a.lastMinuteReset>6e4&&(a.requestsThisMinute=0,a.lastMinuteReset=t)}function n(e=1e3){u(),a.requestsToday++,a.requestsThisMinute++,a.tokensToday+=e,console.log(`Gemini API Usage - Requests today: ${a.requestsToday}/${r.requestsPerDay}, This minute: ${a.requestsThisMinute}/${r.requestsPerMinute}`)}function o(){return u(),{...a,limits:r,percentages:{dailyRequests:Math.round(a.requestsToday/r.requestsPerDay*100),dailyTokens:Math.round(a.tokensToday/r.tokensPerDay*100),minuteRequests:Math.round(a.requestsThisMinute/r.requestsPerMinute*100)}}}function i(){return(u(),a.requestsThisMinute>=r.requestsPerMinute)?{allowed:!1,reason:"Rate limit exceeded (requests per minute)"}:a.requestsToday>=r.requestsPerDay?{allowed:!1,reason:"Daily quota exceeded"}:{allowed:!0}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972],()=>s(9934));module.exports=r})();