"use strict";(()=>{var e={};e.id=935,e.ids=[935],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2866:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>A,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{GET:()=>c,OPTIONS:()=>p,POST:()=>d});var o=r(9303),a=r(8716),s=r(670),i=r(7070),l=r(4770);let u=r(4155);async function c(e){let t=new URL(e.url),r={};e.headers.forEach((e,t)=>{r[t]=e});let n={httpMethod:"GET",queryStringParameters:Object.fromEntries(t.searchParams),headers:r,body:null,path:t.pathname,pathParameters:null,requestContext:{},resource:"",stageVariables:null,isBase64Encoded:!1},o={callbackWaitsForEmptyEventLoop:!1,functionName:"astrology-mathbrain",functionVersion:"$LATEST",invokedFunctionArn:"",memoryLimitInMB:"1024",awsRequestId:(0,l.randomUUID)(),logGroupName:"",logStreamName:"",getRemainingTimeInMillis:()=>3e4};try{let e=await u.handler(n,o);return new i.NextResponse(e.body,{status:e.statusCode,headers:new Headers(e.headers||{})})}catch(e){return console.error("Astrology MathBrain API error:",e),i.NextResponse.json({success:!1,error:"Internal server error",code:"ASTROLOGY_API_ERROR"},{status:500})}}async function d(e){try{let t=await e.json().catch(()=>null),r=(e,t)=>e?.nation||t?.nation||e?.country||t?.country||e?.country_code||t?.country_code||e?.nation_code||void 0,n=function(e){if(!e||!e.subjectA&&!e.subjectB)return JSON.stringify(e??{});let t=e.subjectA||{},n=e.subjectB||null,o=t.birth||{},a=n?.birth||{},s=(e,t,n,o)=>({name:e,year:parseInt(n.date?.split("-")[0]||n.year,10),month:parseInt(n.date?.split("-")[1]||n.month,10),day:parseInt(n.date?.split("-")[2]||n.day,10),hour:parseInt((n.time||"").split(":")[0]||n.hour,10),minute:parseInt((n.time||"").split(":")[1]||n.minute,10),latitude:n.lat??n.latitude??t?.latitude,longitude:n.lon??n.lng??n.longitude??t?.longitude,timezone:n.tz??n.timezone??t?.timezone,city:n.city||t?.city,state:n.state||t?.state,nation:r(t,n),...o?{A_local:o,B_local:o}:{}}),i=s(t.name,t,o,t.A_local),l=n?s(n.name,n,a,n.B_local):void 0,u=e.transits||{},c=u.from&&u.to?{start:u.from,end:u.to,step:u.step||"daily"}:void 0,d=function(e){if(e)return({placidus:"P",whole_sign:"W",wholesign:"W","whole sign":"W",regiomontanus:"R",koch:"K",campanus:"C",equal:"E"})[String(e).toLowerCase()]||e}(e.houses),p={personA:i,...l?{personB:l}:{},...c?{window:c}:{},context:{mode:(()=>{let t=String(e.report_type||"").toLowerCase();return t.includes("synastry_transits")?"synastry_transits":t.includes("synastry")?"synastry":t.includes("balance_meter")?"balance_meter":e.context?.mode||"mirror"})()},relocation_mode:e.relocation_mode,orbs_profile:e.orbs_profile,...d?{houses_system_identifier:d}:{}};return(e.relationship_context||e.relationshipContext)&&(p.relationship_context=e.relationship_context||e.relationshipContext),JSON.stringify(p)}(t),o=new URL(e.url),a={};e.headers.forEach((e,t)=>{a[t]=e});let s={httpMethod:"POST",queryStringParameters:Object.fromEntries(o.searchParams),headers:a,body:n,path:o.pathname,pathParameters:null,requestContext:{},resource:"",stageVariables:null,isBase64Encoded:!1},c={callbackWaitsForEmptyEventLoop:!1,functionName:"astrology-mathbrain",functionVersion:"$LATEST",invokedFunctionArn:"",memoryLimitInMB:"1024",awsRequestId:(0,l.randomUUID)(),logGroupName:"",logStreamName:"",getRemainingTimeInMillis:()=>3e4},d=await u.handler(s,c);return new i.NextResponse(d.body,{status:d.statusCode,headers:new Headers(d.headers||{})})}catch(e){return console.error("Astrology MathBrain API error:",e),i.NextResponse.json({success:!1,error:"Internal server error",code:"ASTROLOGY_API_ERROR"},{status:500})}}async function p(e){return new i.NextResponse("",{status:200,headers:new Headers({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET, POST, OPTIONS"})})}let m=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/astrology-mathbrain/route",pathname:"/api/astrology-mathbrain",filename:"route",bundlePath:"app/api/astrology-mathbrain/route"},resolvedPagePath:"/Users/dancross/Documents/GitHub/WovenWebApp/app/api/astrology-mathbrain/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:g}=m,b="/api/astrology-mathbrain/route";function A(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:y})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972,318,155],()=>r(2866));module.exports=n})();