"use strict";(()=>{var t={};t.id=935,t.ids=[935],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3561:(t,e,o)=>{o.r(e),o.d(e,{originalPathname:()=>P,patchFetch:()=>f,requestAsyncStorage:()=>x,routeModule:()=>_,serverHooks:()=>g,staticGenerationAsyncStorage:()=>A});var a={};o.r(a),o.d(a,{GET:()=>R,OPTIONS:()=>y,POST:()=>h,runtime:()=>c});var s=o(9303),r=o(8716),n=o(670),i=o(7070),l=o(1067);let u=l.Ry({personA:l.Ry({name:l.Z_(),year:l.Rx(),month:l.Rx(),day:l.Rx(),hour:l.Rx().optional(),minute:l.Rx().optional(),latitude:l.Rx(),longitude:l.Rx(),city:l.Z_().optional(),state:l.Z_().optional(),nation:l.Z_().optional(),timezone:l.Z_().optional(),zodiac_type:l.Z_().optional()}),personB:l.Ry({name:l.Z_(),year:l.Rx(),month:l.Rx(),day:l.Rx(),hour:l.Rx().optional(),minute:l.Rx().optional(),latitude:l.Rx(),longitude:l.Rx(),city:l.Z_().optional(),state:l.Z_().optional(),nation:l.Z_().optional(),timezone:l.Z_().optional(),zodiac_type:l.Z_().optional()}).optional(),context:l.Ry({mode:l.Z_().optional()}).optional(),window:l.Ry({start:l.Z_(),end:l.Z_(),step:l.Z_().optional()}).optional(),relationship_context:l.Yj().optional(),orbs_profile:l.Z_().optional(),relocation_mode:l.Yj().optional(),houses_system_identifier:l.Z_().optional()});async function p(t){let e=u.safeParse(t);if(!e.success)return{ok:!1,status:400,error:"Validation failed",issues:e.error.issues};let o=process.env.RAPIDAPI_KEY;if(!o)return{ok:!1,status:500,error:"Missing RAPIDAPI_KEY"};try{let e=await fetch("https://astrologer.p.rapidapi.com/api/v2/natal-chart",{method:"POST",headers:{"Content-Type":"application/json","X-RapidAPI-Key":o,"X-RapidAPI-Host":"astrologer.p.rapidapi.com"},body:JSON.stringify(t)});if(!e.ok){let t=await e.text();return{ok:!1,status:e.status,error:"Upstream error",detail:t.slice(0,1500)}}let a=await e.json();return{ok:!0,data:a}}catch(t){return{ok:!1,status:500,error:"Internal error",detail:t?.message||String(t)}}}let c="nodejs",d={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type, Authorization","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Cache-Control":"no-store"};function m(t,e={}){return i.NextResponse.json(t,{status:e.status??200,headers:d})}async function R(){return m({success:!0,message:"Math Brain API is available",endpoints:["GET","POST"],timestamp:new Date().toISOString()})}async function y(){return new i.NextResponse(null,{status:204,headers:d})}async function h(t){let e;try{e=await t.json()}catch{return m({success:!1,error:"Invalid JSON payload",code:"INVALID_JSON"},{status:400})}let o=u.safeParse(e);if(!o.success)return m({success:!1,error:"Validation failed",code:"INVALID_REQUEST",issues:o.error.issues},{status:400});let a=await p(o.data);return a.ok?m({success:!0,data:a.data}):m({success:!1,error:a.error,code:500===a.status?"UPSTREAM_ERROR":"BAD_REQUEST",detail:a.detail,issues:a.issues},{status:a.status})}let _=new s.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/astrology-mathbrain/route",pathname:"/api/astrology-mathbrain",filename:"route",bundlePath:"app/api/astrology-mathbrain/route"},resolvedPagePath:"/Users/dancross/Documents/GitHub/WovenWebApp/app/api/astrology-mathbrain/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:x,staticGenerationAsyncStorage:A,serverHooks:g}=_,P="/api/astrology-mathbrain/route";function f(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:A})}}};var e=require("../../../webpack-runtime.js");e.C(t);var o=t=>e(e.s=t),a=e.X(0,[948,972,67],()=>o(3561));module.exports=a})();