(()=>{var e={};e.id=780,e.ids=[780],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8188:e=>{"use strict";e.exports=require("module")},900:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(8429),s(746),s(6083),s(6560);var a=s(3191),l=s(8716),i=s(7922),r=s.n(i),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["math-brain",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8429)),"/Users/dancross/Documents/GitHub/WovenWebApp/app/math-brain/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,746)),"/Users/dancross/Documents/GitHub/WovenWebApp/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,6083)),"/Users/dancross/Documents/GitHub/WovenWebApp/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,6560)),"/Users/dancross/Documents/GitHub/WovenWebApp/app/not-found.tsx"]}],c=["/Users/dancross/Documents/GitHub/WovenWebApp/app/math-brain/page.tsx"],m="/math-brain/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/math-brain/page",pathname:"/math-brain",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4050:(e,t,s)=>{Promise.resolve().then(s.bind(s,7733))},1553:()=>{},4980:(e,t,s)=>{Promise.resolve().then(s.bind(s,9848))},5406:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5303:()=>{},7733:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(326);function l({error:e,reset:t}){return a.jsx("html",{children:a.jsx("body",{style:{fontFamily:"ui-sans-serif, system-ui",background:"#0f1115",color:"#e8ecf3",minHeight:"100vh",padding:"24px"},children:(0,a.jsxs)("div",{style:{maxWidth:860,margin:"0 auto"},children:[a.jsx("h1",{style:{fontSize:28,marginBottom:8},children:"Something went wrong"}),a.jsx("p",{style:{opacity:.9,marginBottom:16},children:"An error occurred while rendering this page."}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"#111827",padding:12,borderRadius:8,border:"1px solid #1f2937",overflow:"auto"},children:String(e?.message||"Unknown error")}),e?.digest?(0,a.jsxs)("p",{style:{opacity:.7,marginTop:8},children:["Digest: ",e.digest]}):null,a.jsx("button",{onClick:t,style:{marginTop:16,background:"#7c5cff",border:"none",padding:"10px 16px",borderRadius:8,color:"#fff",cursor:"pointer"},children:"Try again"})]})})})}},9848:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,dynamic:()=>m});var a=s(326),l=s(7577);function i(e,t={}){if(!e)return null;let s=e.trim(),a=s.match(/^\s*(-?\d+(?:\.\d+)?)\s*[,\s]+\s*(-?\d+(?:\.\d+)?)\s*$/);if(a){let e=Number(a[1]),s=Number(a[2]);return!Number.isFinite(e)||!Number.isFinite(s)||Math.abs(e)>90||Math.abs(s)>180||t.rejectZeroZero&&0===e&&0===s?null:{lat:e,lon:s}}let l=s.replace(/[°º]/g,"\xb0").replace(/'/g,"′").replace(/"/g,"″").replace(/\s+/g," ").trim(),i=l.split(",").map(e=>e.trim()).filter(Boolean);if(2!==i.length){let e=l.split(" "),t=e.findIndex(e=>/[NS]$/i.test(e));if(t>-1&&t<e.length-1&&(i=[e.slice(0,t+1).join(" "),e.slice(t+1).join(" ")]),2!==i.length)return null}let n=r(i[0],["N","S"]),o=r(i[1],["E","W"]);return null==n||null==o||Math.abs(n)>90||Math.abs(o)>180||t.rejectZeroZero&&0===n&&0===o?null:{lat:n,lon:o}}function r(e,t){let s=e.toUpperCase().replace(/[°º]/g,"\xb0").replace(/'/g,"′").replace(/"/g,"″").replace(/[^0-9NSEW°′″\s\.\-]/g," ").replace(/\s+/g," ").trim(),a=s.match(/([NSEW])$/),l=a?a[1]:void 0,i=s.replace(/[NSEW]$/,"").trim().split(/[°′″\s]+/).filter(Boolean).map(Number);if(!i.length)return null;let r=i[0],n=i[1]||0,o=i[2]||0;if([r,n,o].some(e=>Number.isNaN(e))||n<0||n>=60||o<0||o>=60)return null;let d=Math.abs(r)+Math.abs(n)/60+Math.abs(o)/3600;return l?("S"===l||"W"===l)&&(d=-d):r<0&&(d=-d),d}function n(e,t){return Number.isFinite(e)&&Number.isFinite(t)?`${e.toFixed(6)}, ${t.toFixed(6)}`:""}var o=s(2991);function d({onStateChange:e}){let t=(0,l.useRef)(null),[s,a]=(0,l.useState)({authReady:!1,authed:!1,authEnvOk:!0,authStatus:null}),i=(0,l.useCallback)(async()=>{try{if(!t.current){console.error("Auth client not ready.");return}await t.current?.loginWithRedirect({authorizationParams:{redirect_uri:o.g(),connection:"google-oauth2"}})}catch(e){console.error("Login failed",e)}},[]);return(0,l.useCallback)(()=>({...s,login:i}),[s,i]),null}var c=s(910);let m="force-dynamic";function u({title:e,children:t,className:s=""}){return(0,a.jsxs)("section",{className:`rounded-lg border border-slate-700 bg-slate-800/60 p-4 ${s}`,children:[a.jsx("h2",{className:"text-lg font-medium text-slate-100",children:e}),a.jsx("div",{className:"mt-3",children:t})]})}function x(){let e="true"===process.env.NEXT_PUBLIC_ENABLE_LEGACY_LINK,t=(0,l.useMemo)(()=>new Date,[]),r=e=>e.toISOString().slice(0,10),o=r(t),m=r(new Date(t.getTime()+5184e5)),[x,p]=(0,l.useState)({name:"Dan",year:1973,month:7,day:24,hour:14,minute:30,city:"Bryn Mawr",state:"PA",latitude:40.0167,longitude:-75.3,timezone:"America/New_York",zodiac_type:"Tropic"}),[h,b]=(0,l.useState)("40\xb01'N, 75\xb018'W"),[g,v]=(0,l.useState)(null),[N,j]=(0,l.useState)(!0),[y,f]=(0,l.useState)(o),[S,w]=(0,l.useState)(m),[_,A]=(0,l.useState)("NATAL_ONLY"),[k,T]=(0,l.useState)("daily"),[C,M]=(0,l.useState)(!1),[P,R]=(0,l.useState)(null),[B,D]=(0,l.useState)(null),[F,O]=(0,l.useState)(!1),[L,z]=(0,l.useState)({name:"",year:"",month:"",day:"",hour:"",minute:"",city:"",state:"",latitude:"",longitude:"",timezone:"",zodiac_type:"Tropic"}),[I,E]=(0,l.useState)(""),[U,Y]=(0,l.useState)(null),[W,$]=(0,l.useState)(!0),[H,q]=(0,l.useState)("PARTNER"),[G,J]=(0,l.useState)(""),[Z,V]=(0,l.useState)(""),[X,K]=(0,l.useState)(!1),[Q,ee]=(0,l.useState)(""),et=(0,l.useMemo)(()=>(0,c.jA)(x),[x]),[es,ea]=(0,l.useState)(()=>(0,c.jA)(x)?"planetary_only":"user_provided"),el=(0,l.useMemo)(()=>(0,c.jA)(L),[L]),ei=(0,l.useMemo)(()=>et&&"user_provided"!==es,[et,es]);(0,l.useMemo)(()=>el&&"user_provided"!==es,[el,es]);let er=(0,l.useMemo)(()=>["GMT","UTC","US/Eastern","US/Central","US/Mountain","US/Pacific","US/Alaska","US/Hawaii","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Phoenix","America/Anchorage"],[]);(0,l.useMemo)(()=>[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}],[]);let en=(e,t)=>e.replace(/\D+/g,"").slice(0,t),eo=(e,t,s)=>{let a=Number(e);return Number.isNaN(a)?NaN:Math.min(s,Math.max(t,a))},[ed,ec]=(0,l.useState)("A_LOCAL"),[em,eu]=(0,l.useState)("30\xb010'N, 85\xb040'W"),[ex,ep]=(0,l.useState)(null),[eh,eb]=(0,l.useState)(()=>i("30\xb010'N, 85\xb040'W")),[eg,ev]=(0,l.useState)("Panama City, FL"),[eN,ej]=(0,l.useState)("US/Central"),[ey,ef]=(0,l.useState)(!1),[eS,ew]=(0,l.useState)(!1),[e_,eA]=(0,l.useState)(!0),[ek,eT]=(0,l.useState)(null),[eC,eM]=(0,l.useState)(!0),[eP,eR]=(0,l.useState)(null);(0,l.useRef)(null);let eB=(0,l.useRef)(null),eD=(0,l.useRef)(null),eF=(0,l.useRef)(0),[eO,eL]=(0,l.useState)(null),[ez,eI]=(0,l.useState)(()=>"mirror"),[eE,eU]=(0,l.useState)(!1),[eY,eW]=(0,l.useState)(!0),[e$,eH]=(0,l.useState)(null),eq=(0,l.useRef)(null),[eG,eJ]=(0,l.useState)(()=>"mean");async function eZ(){try{let e=eB.current||document.body,t=(await s.e(378).then(s.t.bind(s,1378,23))).default,a=new Date().toISOString().slice(0,10),l={margin:.5,filename:`math-brain-report-${a}.pdf`,image:{type:"jpeg",quality:.95},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#0f1115"},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};await t().from(e).set(l).save()}catch(e){eL("Could not generate PDF"),setTimeout(()=>eL(null),2e3)}}function eV(e="AUTO"){try{let t={schema:"mb-1",mode:_,step:k,startDate:y,endDate:S,includePersonB:F,translocation:ed,personA:x,personB:L,relationshipType:H,relationshipTier:G,relationshipRole:Z,exEstranged:X,relationshipNotes:Q},s=!!(F&&L&&(L.name?.toString().trim()||null!=L.latitude||null!=L.longitude||L.timezone||L.year||L.month||L.day||L.hour||L.minute)),a="A_B"===e?F:s;"A_ONLY"!==e&&a||(delete t.personB,t.includePersonB=!1);let l=JSON.stringify(t,null,2),i=new Blob([l],{type:"application/json"}),r=new Date().toISOString().replace(/[-:]/g,"").replace(/\..+$/,""),n="A_ONLY"===e?`math_brain_setup_A_${r}.json`:`math_brain_setup_${r}.json`,o=window;if("function"==typeof o.showSaveFilePicker){(async()=>{try{let e=await o.showSaveFilePicker({suggestedName:n,types:[{description:"JSON files",accept:{"application/json":[".json"]}}]}),t=await e.createWritable();await t.write(i),await t.close();try{eL("Saved setup JSON"),setTimeout(()=>eL(null),1800)}catch{}}catch(s){let e=URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download=n,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(e);try{eL("Saved setup JSON"),setTimeout(()=>eL(null),1800)}catch{}},150)}})();return}let d=URL.createObjectURL(i),c=document.createElement("a");c.href=d,c.download=n,document.body.appendChild(c),"download"in HTMLAnchorElement.prototype?c.click():window.open(d,"_blank","noopener"),setTimeout(()=>{try{document.body.removeChild(c)}catch{}try{URL.revokeObjectURL(d)}catch{}try{eL("Saved setup JSON"),setTimeout(()=>eL(null),1800)}catch{}},300)}catch(e){console.error("Save setup failed:",e);try{navigator?.clipboard?.writeText?.(JSON.stringify({mode:_,step:k,startDate:y,endDate:S,includePersonB:F,translocation:ed,personA:x,personB:L},null,2)).then(()=>{eL("Saved to clipboard (download blocked)"),setTimeout(()=>eL(null),2200)}).catch(()=>{eL("Save setup failed"),setTimeout(()=>eL(null),2200)})}catch{}}}async function eX(e){let t=e.target.files?.[0];if(t){try{let e=await t.text(),s=JSON.parse(e);eH(null);let a="object"==typeof s&&!!s&&(s.personA||s.period||s.relocation),l="object"==typeof s&&!!s&&s.personA&&(null!=s.personA.latitude||s.personA.coords),r="string"==typeof s?.schema;if(!a&&!l&&!r)throw Error("Invalid setup shape: expected .math_brain.json minimal schema or internal export.");if((a||r)&&!l){let e=s.personA||{},t=e.coords||"",a=t?i(String(t),{rejectZeroZero:!0}):null,[l,r,o]=String(e.date||"").split("-").map(e=>Number(e)),[d,c]=String(e.time||"").split(":").map(e=>Number(e));if(t&&!a)throw Error("Invalid personA.coords");let m={...x};if(e.name&&(m.name=String(e.name)),Number.isFinite(l)&&(m.year=l),Number.isFinite(r)&&(m.month=r),Number.isFinite(o)&&(m.day=o),Number.isFinite(d)&&(m.hour=d),Number.isFinite(c)&&(m.minute=c),e.timezone&&(m.timezone=String(e.timezone)),a&&(m.latitude=a.lat,m.longitude=a.lon,b(n(a.lat,a.lon)),v(null),j(!0)),s.zodiacType&&(m.zodiac_type=String(s.zodiacType)),p(m),s.personB){let e=s.personB,t=e.coords?i(String(e.coords),{rejectZeroZero:!0}):null,a={...L};e.name&&(a.name=String(e.name)),t&&(a.latitude=String(t.lat),a.longitude=String(t.lon),E(n(t.lat,t.lon)),Y(null),$(!0)),e.timezone&&(a.timezone=String(e.timezone)),z(a),O(!0)}if(s.relationship_context){let e=s.relationship_context;e.type&&q(String(e.type).toUpperCase()),e.intimacy_tier&&J(String(e.intimacy_tier))}if(s.period){let e=s.period;e.start&&f(String(e.start)),e.end&&w(String(e.end)),e.step&&T(String(e.step).toLowerCase())}if(s.relocation){let e=s.relocation;if(e.mode&&ec(String(e.mode)),e.coords){let t=i(String(e.coords),{rejectZeroZero:!0});t&&(eb(t),eu(String(e.coords)))}}}else s.personA&&p(s.personA),s.personB&&z(s.personB),"boolean"==typeof s.includePersonB&&O(s.includePersonB),s.mode&&A(s.mode),s.step&&T(s.step),s.startDate&&f(s.startDate),s.endDate&&w(s.endDate),"boolean"==typeof s.exEstranged&&K(s.exEstranged),"string"==typeof s.relationshipNotes&&ee(s.relationshipNotes),"string"==typeof s.relationshipTier&&J(s.relationshipTier),"string"==typeof s.relationshipRole&&V(s.relationshipRole),s.translocation&&ec(s.translocation),s.personA?.latitude!=null&&s.personA?.longitude!=null&&(b(n(Number(s.personA.latitude),Number(s.personA.longitude))),v(null),j(!0)),s.personB?.latitude!=null&&s.personB?.longitude!=null&&(E(n(Number(s.personB.latitude),Number(s.personB.longitude))),Y(null),$(!0))}catch{}e.currentTarget&&(e.currentTarget.value="")}}(0,l.useMemo)(()=>["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"],[]);let eK=(0,l.useMemo)(()=>{let e=[x.name,x.city,x.state,x.timezone,x.zodiac_type],t=et&&"user_provided"!==es,s="balance"===ez,a=[Number(x.year),Number(x.month),Number(x.day),...t?[]:[Number(x.hour),Number(x.minute)],...s?[Number(x.latitude),Number(x.longitude)]:[]],l=e.every(Boolean)&&a.every(e=>!Number.isNaN(e))&&N;if(!["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(_))return"mirror"===ez?l:l&&!!y&&!!S;if(!F)return!1;let i=[L.name,L.city,L.state,L.timezone,L.zodiac_type],r=el&&"user_provided"!==es,n=[Number(L.year),Number(L.month),Number(L.day),...r?[]:[Number(L.hour),Number(L.minute)],Number(L.latitude),Number(L.longitude)],o=i.every(Boolean)&&n.every(e=>!Number.isNaN(e))&&W,d=!0;return"PARTNER"===H&&(d=!!G),"FAMILY"===H&&(d=!!Z),l&&o&&d&&!!y&&!!S},[x,L,F,H,G,Z,_,y,S,N,W,et,el,es]),eQ=(0,l.useMemo)(()=>{let e=(0,c.N8)(ez,!1,x);return"balance"===ez&&!e.hasLoc||!eK||!!C},[eK,C,x,ez]),e0=(0,l.useMemo)(()=>{try{return!1}catch{return!1}},[]),e1=(0,l.useMemo)(()=>({reportType:ez,needsLocation:(0,c.N8)(ez,!1,x),canSubmit:eK,submitDisabled:eQ,authReady:ey,authed:eS,aCoordsValid:N,bCoordsValid:W,includePersonB:F,timeUnknown:et,timeUnknownB:el,timePolicy:es,personA_lat_type:typeof x.latitude,personA_lon_type:typeof x.longitude}),[ez,eK,eQ,ey,eS,N,W,F,et,el,es,x]);async function e2(e){e.preventDefault();let t=(0,c.N8)(ez,!1,x);if("balance"===ez&&!t.hasLoc){eL("Transits need current location to place houses correctly. Add a location or switch to Mirror (no transits)."),setTimeout(()=>eL(null),2500);return}if(!eK)return;let s=Date.now();if(!(s-eF.current<800)){eF.current=s,"undefined"!=typeof performance&&performance.now(),M(!0),R(null),D(null);try{let e={mode:_,personA:{...x,nation:"US",year:Number(x.year),month:Number(x.month),day:Number(x.day),hour:Number(x.hour),minute:Number(x.minute),latitude:Number(x.latitude),longitude:Number(x.longitude)},time_policy:et?es:"user_provided",transitStartDate:y,transitEndDate:S,transitStep:k,context:{mode:"balance"===ez?"balance_meter":"mirror"},translocation:"A_LOCAL"===ed||"B_LOCAL"===ed||"MIDPOINT"===ed?{applies:!0,method:"A_LOCAL"===ed?"A_local":"B_LOCAL"===ed?"B_local":"Midpoint",coords:eh?{latitude:eh.lat,longitude:eh.lon}:void 0,current_location:eg||void 0,tz:eN||void 0}:{applies:!1,method:"Natal"}};try{eY&&(window.localStorage.setItem("mb.lastInputs",JSON.stringify({mode:_,step:k,startDate:y,endDate:S,includePersonB:F,translocation:ed,relationshipType:H,relationshipTier:G,relationshipRole:Z,exEstranged:X,relationshipNotes:Q,personA:x,personB:L})),eU(!0))}catch{}["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(_)&&F&&(e.personB={...L,nation:"US",year:Number(L.year),month:Number(L.month),day:Number(L.day),hour:Number(L.hour),minute:Number(L.minute),latitude:Number(L.latitude),longitude:Number(L.longitude)},e.relationship_context={type:H,intimacy_tier:"PARTNER"===H?G:void 0,role:"PARTNER"!==H?Z:void 0,ex_estranged:"FRIEND"===H?void 0:X,notes:Q||void 0});let t=await fetch("/api/astrology-mathbrain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok||s?.success===!1){let e=s?.error||`Request failed (${t.status})`;throw"mirror"===ez&&(eL("Mirror preparation failed"),setTimeout(()=>eL(null),2500)),Error(e)}D(s);try{s?.person_a?.meta||s?.provenance?.time_meta_a}catch{}}catch(e){"mirror"===ez&&(eL("Mirror preparation failed"),setTimeout(()=>eL(null),2500)),R(e?.message||"Unexpected error")}finally{M(!1)}}}return(0,a.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-12",children:[a.jsx(d,{onStateChange:(0,l.useCallback)(e=>{ef(e.authReady),ew(e.authed),eA(e.authEnvOk),eT(e.authStatus),eR(()=>e.login)},[])}),!e_&&eC&&(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between gap-3 rounded-md border border-amber-700 bg-amber-900/30 p-3 text-amber-200",children:[a.jsx("p",{className:"text-sm",children:"Auth0 environment not configured (AUTH0_*). Sign-in is disabled; Poetic Brain gating will be unavailable."}),a.jsx("button",{type:"button",onClick:()=>eM(!1),className:"rounded-md border border-amber-700 px-2 py-1 text-xs text-amber-100 hover:bg-amber-800/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-400","aria-label":"Dismiss banner",children:"Dismiss"})]}),(0,a.jsxs)("header",{className:"text-center print:hidden",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold tracking-tight text-slate-100",children:"Math Brain"}),a.jsx("p",{className:"mt-4 text-base md:text-lg text-slate-300",children:"Run the geometry first. Then, once you're signed in, jump into Chat to synthesize the narrative."}),(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4 text-sm text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"rounded bg-amber-600 px-2 py-1 text-xs font-medium text-slate-100",children:"FIELD"}),a.jsx("span",{className:"text-xs",children:"Geometric calculation engine"})]}),a.jsx("span",{className:"text-slate-600",children:"→"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[a.jsx("span",{className:"rounded bg-slate-700 px-2 py-1 text-xs font-medium text-slate-400",children:"MAP"}),a.jsx("span",{className:"text-xs",children:"Raven handles"})]}),a.jsx("span",{className:"text-slate-600",children:"→"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[a.jsx("span",{className:"rounded bg-slate-700 px-2 py-1 text-xs font-medium text-slate-400",children:"VOICE"}),a.jsx("span",{className:"text-xs",children:"Raven handles"})]})]})]}),ey&&a.jsx("div",{className:"mt-3 mx-auto max-w-3xl rounded-md border border-slate-700 bg-slate-900/50 p-2 text-[12px] text-slate-300 print:hidden",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${e_?"bg-emerald-500":"bg-amber-500"}`,"aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Auth status"}),a.jsx("span",{className:"text-slate-400",children:e_?"Configured":"Misconfigured"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-slate-400",children:[(0,a.jsxs)("div",{title:"Auth0 Domain (from /api/auth-config)",children:["Domain: ",a.jsx("span",{className:"text-slate-200",children:ek?.domain||"—"})]}),(0,a.jsxs)("div",{title:"Auth0 Client ID (redacted)",children:["Client: ",a.jsx("span",{className:"text-slate-200",children:ek?.clientId?String(ek.clientId).slice(0,4)+"…":"—"})]}),(0,a.jsxs)("div",{title:"Google connection expected to be enabled in Auth0 app",children:["Google: ",a.jsx("span",{className:"text-slate-200",children:"expected"})]})]})]})}),(0,a.jsxs)("div",{className:"mt-8 flex flex-wrap gap-3 justify-center print:hidden",children:[a.jsx("a",{href:"/",className:"rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-slate-100 hover:bg-slate-700",children:"Back Home"}),e&&a.jsx("a",{href:"/index.html",className:"rounded-md bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-500",target:"_blank",rel:"noopener noreferrer",children:"Open Legacy Math Brain"}),ey&&eS?a.jsx("a",{href:"/chat",className:"rounded-md bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-500",children:"Go to Poetic Brain"}):a.jsx("button",{type:"button",onClick:()=>{eP?eP():R("Sign-in is disabled. Configure AUTH0_* and reload.")},disabled:!ey||!eP,className:"rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-slate-100 hover:bg-slate-700 disabled:opacity-50",title:"Sign in to enable Poetic Brain",children:"Sign in for Poetic Brain"})]}),eE&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-3 print:hidden",children:[a.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-800/60 px-3 py-2 text-slate-200 text-sm",children:"Saved people found."}),a.jsx("button",{type:"button",onClick:function(){try{let e=window.localStorage.getItem("mb.lastInputs");if(!e)return;let t=JSON.parse(e);t.personA&&p(t.personA),t.personB&&z(t.personB),"boolean"==typeof t.includePersonB&&O(t.includePersonB),t.mode&&A(t.mode),t.step&&T(t.step),t.startDate&&f(t.startDate),t.endDate&&w(t.endDate),t.relationshipType&&q(t.relationshipType),"boolean"==typeof t.exEstranged&&K(t.exEstranged),"string"==typeof t.relationshipNotes&&ee(t.relationshipNotes),"string"==typeof t.relationshipTier&&J(t.relationshipTier),"string"==typeof t.relationshipRole&&V(t.relationshipRole),t.translocation&&ec(t.translocation)}catch{}},className:"rounded-md bg-indigo-600 px-3 py-2 text-white hover:bg-indigo-500 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",children:"Load People"}),a.jsx("button",{type:"button",onClick:function(){try{window.localStorage.removeItem("mb.lastInputs"),eU(!1),eW(!0)}catch{}},className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-100 hover:bg-slate-700 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",children:"Clear"})]}),(0,a.jsxs)("form",{onSubmit:e2,className:"mt-10 print:hidden",children:[e0&&(0,a.jsxs)("div",{className:"mb-4 rounded-md border border-slate-600 bg-slate-900/60 p-3 text-xs text-slate-200",children:[a.jsx("div",{className:"font-medium mb-2",children:"Debug — gating state"}),a.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px]",children:JSON.stringify(e1,null,2)})]}),(0,a.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3 rounded-md border border-slate-700 bg-slate-900/50 p-3",children:[(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-slate-200",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-600 focus:ring-indigo-500",checked:eY,onChange:e=>eW(e.target.checked)}),"Remember people for next time"]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"inline-flex overflow-hidden rounded-md border border-slate-700 bg-slate-800",children:[a.jsx("button",{type:"button",onClick:()=>eV("A_ONLY"),className:"px-3 py-1.5 text-slate-100 hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",title:"Save only Person A’s setup to JSON","aria-label":"Save only Person A setup",children:"Save A"}),a.jsx("div",{className:"h-6 w-px bg-slate-700 my-1"}),a.jsx("button",{type:"button",onClick:()=>eV("A_B"),className:"px-3 py-1.5 text-slate-100 hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",title:"Save Person A + B (if included)","aria-label":"Save Person A and B setup",children:"Save A+B"})]}),a.jsx("button",{type:"button",onClick:()=>eq.current?.click(),className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-slate-100 hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400","aria-label":"Load a setup from a JSON file",children:"Load setup…"}),a.jsx("input",{ref:eq,type:"file",accept:"application/json",onChange:eX,className:"hidden","aria-label":"Upload setup JSON file"})]}),e$&&a.jsx("div",{className:"mt-2 text-xs text-red-400",children:e$})]}),(0,a.jsxs)("section",{"aria-labelledby":"report-type-heading",className:"mb-6 rounded-lg border border-slate-700 bg-slate-800/60 p-4",children:[a.jsx("h3",{id:"report-type-heading",className:"text-sm font-medium text-slate-200",children:"Report Type"}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between gap-3",children:[(0,a.jsxs)("fieldset",{className:"inline-flex overflow-hidden rounded-md border border-slate-700 bg-slate-800 px-0 py-0",children:[a.jsx("legend",{className:"sr-only",children:"Choose report type"}),(0,a.jsxs)("label",{className:`px-3 py-1.5 text-sm cursor-pointer ${"mirror"===ez?"bg-indigo-600 text-white":"text-slate-200 hover:bg-slate-700"}`,title:"Send to Poetic Brain",onClick:()=>eI("mirror"),children:[a.jsx("input",{type:"radio",name:"reportType",value:"mirror",className:"sr-only",checked:"mirror"===ez,onChange:()=>eI("mirror")}),"Mirror",a.jsx("span",{className:"ml-1 text-[11px] text-slate-300/80",children:"(send to Poetic Brain)"})]}),(0,a.jsxs)("label",{className:`px-3 py-1.5 text-sm cursor-pointer ${"balance"===ez?"bg-indigo-600 text-white":"text-slate-200 hover:bg-slate-700"}`,title:"Show gauges on screen",onClick:()=>eI("balance"),children:[a.jsx("input",{type:"radio",name:"reportType",value:"balance",className:"sr-only",checked:"balance"===ez,onChange:()=>eI("balance")}),"Balance Meter",a.jsx("span",{className:"ml-1 text-[11px] text-slate-300/80",children:"(gauges on screen)"})]})]}),"mirror"===ez&&a.jsx("div",{className:"text-xs text-slate-400",children:ey&&!eS?"Sign in to deliver Mirror to Poetic Brain":"Handoff only — no on-screen gauges"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 items-start",children:[a.jsx(u,{title:"Person A (required)",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-name",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Name"}),a.jsx("input",{id:"a-name",placeholder:"Your Name",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-center text-slate-100 placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:x.name,onChange:e=>p({...x,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-year",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Year"}),a.jsx("input",{id:"a-year",type:"text",inputMode:"numeric",className:"mt-1 w-full min-w-[80px] h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(x.year),onChange:e=>p({...x,year:en(e.target.value,4)}),placeholder:"YYYY",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-month",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Month"}),a.jsx("input",{id:"a-month",type:"text",inputMode:"numeric",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-center text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(x.month??""),onChange:e=>{let t=en(e.target.value,2);p({...x,month:t})},onBlur:e=>{let t=eo(en(e.target.value,2),1,12);p(e=>({...e,month:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"MM",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-day",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Day"}),a.jsx("input",{id:"a-day",type:"text",inputMode:"numeric",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-center text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(x.day??""),onChange:e=>{let t=en(e.target.value,2);p({...x,day:t})},onBlur:e=>{let t=eo(en(e.target.value,2),1,31);p(e=>({...e,day:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"DD",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-hour",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Hour"}),a.jsx("input",{id:"a-hour",type:"text",inputMode:"numeric",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(x.hour??""),onChange:e=>{let t=en(e.target.value,2);p({...x,hour:t})},onBlur:e=>{let t=eo(en(e.target.value,2),0,23);p(e=>({...e,hour:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"HH",required:!ei})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-minute",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Minute"}),a.jsx("input",{id:"a-minute",type:"text",inputMode:"numeric",className:"mt-1 w-full min-w-[60px] h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(x.minute??""),onChange:e=>{let t=en(e.target.value,2);p({...x,minute:t})},onBlur:e=>{let t=eo(en(e.target.value,2),0,59);p(e=>({...e,minute:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"MM",required:!ei})]})]}),"            ",(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-city",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"City"}),a.jsx("input",{id:"a-city",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:x.city,onChange:e=>p({...x,city:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-state",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"State / Province"}),a.jsx("input",{id:"a-state",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:x.state,onChange:e=>p({...x,state:e.target.value}),required:!0}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Nation assumed “US” for API compatibility."})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[a.jsx("label",{htmlFor:"a-coords",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Birth Coordinates"}),a.jsx("input",{id:"a-coords",type:"text",className:`mt-1 w-full rounded-md border bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 ${g?"border-red-600":"border-slate-600"}`,value:h,onChange:e=>{let t=e.target.value;b(t);let s=i(t,{rejectZeroZero:!0});s?(p({...x,latitude:s.lat,longitude:s.lon}),v(null),j(!0)):(v('Invalid coordinates. Try "40\xb042′N, 74\xb00′W" or "40.7128, -74.006".'),j(!1))},"aria-describedby":"a-coords-help",placeholder:"e.g., 40\xb042′N, 74\xb00′W or 40.7128, -74.006",required:!0}),a.jsx("p",{id:"a-coords-help",className:"mt-1 text-xs text-slate-400",children:"Examples: 40\xb042′N, 74\xb00′W \xb7 34\xb03′S, 18\xb025′E \xb7 40.7128, -74.006"}),g?a.jsx("p",{className:"mt-1 text-xs text-red-400",children:g}):(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Normalized: ",n(Number(x.latitude),Number(x.longitude))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-tz",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Timezone"}),a.jsx("select",{id:"a-tz",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:x.timezone,onChange:e=>p({...x,timezone:e.target.value}),required:!0,children:er.map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"a-zodiac",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Zodiac Type"}),(0,a.jsxs)("select",{id:"a-zodiac",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100",value:x.zodiac_type,onChange:e=>p({...x,zodiac_type:e.target.value}),children:[a.jsx("option",{value:"Tropic",children:"Tropic"}),a.jsx("option",{value:"Sidereal",children:"Sidereal"})]})]}),et&&a.jsx("div",{className:"sm:col-span-2",children:(0,a.jsxs)("fieldset",{className:"rounded-md border border-slate-700 bg-slate-900/50 p-3",children:[a.jsx("legend",{className:"px-1 text-xs font-medium text-slate-200",children:"Birth time policy"}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-3",children:[(0,a.jsxs)("label",{className:`flex cursor-pointer items-start gap-2 rounded-md border px-3 py-2 text-xs ${"planetary_only"===es?"border-indigo-600 bg-indigo-900/20 text-slate-100":"border-slate-700 bg-slate-800/50 text-slate-300 hover:bg-slate-800"}`,children:[a.jsx("input",{type:"radio",name:"time-policy",className:"mt-0.5",checked:"planetary_only"===es,onChange:()=>ea("planetary_only")}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Planetary-only"}),a.jsx("div",{className:"text-slate-400",children:"No houses/angles; tightest, falsifiable geometry"})]})]}),(0,a.jsxs)("label",{className:`flex cursor-pointer items-start gap-2 rounded-md border px-3 py-2 text-xs ${"whole_sign"===es?"border-indigo-600 bg-indigo-900/20 text-slate-100":"border-slate-700 bg-slate-800/50 text-slate-300 hover:bg-slate-800"}`,children:[a.jsx("input",{type:"radio",name:"time-policy",className:"mt-0.5",checked:"whole_sign"===es,onChange:()=>ea("whole_sign")}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Whole-sign houses"}),a.jsx("div",{className:"text-slate-400",children:"House semantics without exact time; angles still suppressed"})]})]}),(0,a.jsxs)("label",{className:`flex cursor-pointer items-start gap-2 rounded-md border px-3 py-2 text-xs ${"sensitivity_scan"===es?"border-indigo-600 bg-indigo-900/20 text-slate-100":"border-slate-700 bg-slate-800/50 text-slate-300 hover:bg-slate-800"}`,children:[a.jsx("input",{type:"radio",name:"time-policy",className:"mt-0.5",checked:"sensitivity_scan"===es,onChange:()=>ea("sensitivity_scan")}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Sensitivity scan"}),a.jsx("div",{className:"text-slate-400",children:"Test a window of possible times; house-dependent insights flagged"})]})]})]})]})})]})}),(0,a.jsxs)(u,{title:"Person B (optional for relational)",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("p",{className:"text-xs text-slate-400",children:"Add a second person for synastry/composite modes."}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-800 p-1",children:[a.jsx("button",{type:"button",onClick:function(){F&&z(e=>({...e,year:String(x.year),month:String(x.month),day:String(x.day),hour:String(x.hour),minute:String(x.minute),city:x.city,state:x.state,latitude:String(x.latitude),longitude:String(x.longitude),timezone:x.timezone,zodiac_type:x.zodiac_type}))},disabled:!F,className:"px-2 py-1 text-xs text-slate-100 hover:bg-slate-700 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",title:"Copy Person A details to Person B (keeps B name)",children:"Copy A→B"}),a.jsx("div",{className:"mx-1 h-5 w-px bg-slate-700"}),a.jsx("button",{type:"button",onClick:function(){F&&(p(e=>({...e,name:L.name||e.name,year:L.year??e.year,month:L.month??e.month,day:L.day??e.day,hour:L.hour??e.hour,minute:L.minute??e.minute,city:L.city||e.city,state:L.state||e.state,latitude:L.latitude??e.latitude,longitude:L.longitude??e.longitude,timezone:L.timezone||e.timezone,zodiac_type:L.zodiac_type||e.zodiac_type})),z(e=>({...e,year:String(x.year),month:String(x.month),day:String(x.day),hour:String(x.hour),minute:String(x.minute),city:x.city,state:x.state,latitude:String(x.latitude),longitude:String(x.longitude),timezone:x.timezone,zodiac_type:x.zodiac_type})))},disabled:!F,className:"px-2 py-1 text-xs text-slate-100 hover:bg-slate-700 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",title:"Swap A/B (relationship settings unchanged)",children:"Swap A/B"}),a.jsx("div",{className:"mx-1 h-5 w-px bg-slate-700"}),a.jsx("button",{type:"button",onClick:function(){F&&z({name:"",year:"",month:"",day:"",hour:"",minute:"",city:"",state:"",latitude:"",longitude:"",timezone:"",zodiac_type:"Tropic"})},disabled:!F,className:"px-2 py-1 text-xs text-slate-100 hover:bg-slate-700 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",title:"Clear all Person B fields",children:"Clear B"}),a.jsx("div",{className:"mx-1 h-5 w-px bg-slate-700"}),a.jsx("button",{type:"button",onClick:function(){if(!F)return;let e=new Date;z(t=>({...t,year:String(e.getUTCFullYear()),month:String(e.getUTCMonth()+1),day:String(e.getUTCDate()),hour:String(e.getUTCHours()),minute:String(e.getUTCMinutes()),timezone:"UTC",city:t.city||"",state:t.state||"",latitude:t.latitude||"",longitude:t.longitude||""}))},disabled:!F,className:"px-2 py-1 text-xs text-slate-100 hover:bg-slate-700 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",title:"Set Person B date/time to now (UTC)",children:"Set B = Now (UTC)"})]}),(0,a.jsxs)("label",{htmlFor:"toggle-include-b-a",className:"inline-flex items-center gap-2 text-sm text-slate-200 cursor-pointer",children:[a.jsx("input",{id:"toggle-include-b-a",type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-600 focus:ring-indigo-500",checked:F,onChange:e=>O(e.target.checked)}),"Include Person B"]})]})]}),a.jsx("div",{className:`mt-4 ${F?"":"opacity-50"}`,children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-name",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Name"}),a.jsx("input",{id:"b-name",ref:eD,placeholder:"Their Name",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-center text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50",value:L.name,onChange:e=>z({...L,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-year",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Year"}),a.jsx("input",{id:"b-year",type:"text",inputMode:"numeric",disabled:!F,className:"mt-1 w-full min-w-[80px] h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(L.year),onChange:e=>z({...L,year:en(e.target.value,4)}),placeholder:"YYYY"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-month",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Month"}),a.jsx("input",{id:"b-month",type:"text",inputMode:"numeric",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-center text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(L.month??""),onChange:e=>{let t=en(e.target.value,2);z({...L,month:t})},onBlur:e=>{let t=eo(en(e.target.value,2),1,12);z(e=>({...e,month:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"MM"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-day",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Day"}),a.jsx("input",{id:"b-day",type:"text",inputMode:"numeric",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(L.day??""),onChange:e=>{let t=en(e.target.value,2);z({...L,day:t})},onBlur:e=>{let t=eo(en(e.target.value,2),1,31);z(e=>({...e,day:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"DD"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-hour",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Hour"}),a.jsx("input",{id:"b-hour",type:"text",inputMode:"numeric",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(L.hour??""),onChange:e=>{let t=en(e.target.value,2);z({...L,hour:t})},onBlur:e=>{let t=eo(en(e.target.value,2),0,23);z(e=>({...e,hour:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"HH"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-minute",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Minute"}),a.jsx("input",{id:"b-minute",type:"text",inputMode:"numeric",disabled:!F,className:"mt-1 w-full min-w-[60px] h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:String(L.minute??""),onChange:e=>{let t=en(e.target.value,2);z({...L,minute:t})},onBlur:e=>{let t=eo(en(e.target.value,2),0,59);z(e=>({...e,minute:Number.isNaN(t)?"":String(t).padStart(2,"0")}))},placeholder:"MM"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-city",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"City"}),a.jsx("input",{id:"b-city",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:L.city,onChange:e=>z({...L,city:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-state",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"State / Province"}),a.jsx("input",{id:"b-state",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:L.state,onChange:e=>z({...L,state:e.target.value})}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Nation assumed “US” for API compatibility."})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[a.jsx("label",{htmlFor:"b-coords",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Birth Coordinates (B)"}),a.jsx("input",{id:"b-coords",type:"text",disabled:!F,className:`mt-1 w-full rounded-md border bg-slate-900 px-3 py-2 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 ${U?"border-red-600":"border-slate-600"}`,value:I,onChange:e=>{let t=e.target.value;if(E(t),!F)return;let s=i(t,{rejectZeroZero:!0});s?(z({...L,latitude:s.lat,longitude:s.lon}),Y(null),$(!0)):(Y("Invalid coordinates"),$(!1))},placeholder:"e.g., 34\xb003′S, 18\xb025′E or -34.0500, 18.4167"}),a.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Examples: 40\xb042′N, 74\xb00′W \xb7 34\xb03′S, 18\xb025′E \xb7 40.7128, -74.006"}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Normalized: ",Number(L.latitude)||Number(L.longitude)?n(Number(L.latitude),Number(L.longitude)):"—"]}),U&&a.jsx("p",{className:"mt-1 text-xs text-red-400",children:U})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-tz",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Timezone"}),a.jsx("select",{id:"b-tz",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:L.timezone,onChange:e=>z({...L,timezone:e.target.value}),children:er.map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"b-zodiac",className:"block text-[11px] uppercase tracking-wide text-slate-300",children:"Zodiac Type"}),(0,a.jsxs)("select",{id:"b-zodiac",disabled:!F,className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 disabled:opacity-50",value:L.zodiac_type,onChange:e=>z({...L,zodiac_type:e.target.value}),children:[a.jsx("option",{value:"Tropic",children:"Tropic"}),a.jsx("option",{value:"Sidereal",children:"Sidereal"})]})]})]})})]}),(0,a.jsxs)(u,{title:"Relationship Context",children:[a.jsx("div",{className:"mb-2 flex items-center justify-between",children:a.jsx("p",{className:"text-xs text-slate-400",children:"These fields unlock when Person B is included."})}),(0,a.jsxs)("div",{className:`grid grid-cols-1 gap-4 sm:grid-cols-2 ${F?"":"opacity-50"}`,children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"rel-type",className:"block text-sm text-slate-300",children:"Type"}),(0,a.jsxs)("select",{id:"rel-type",disabled:!F,className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100",value:H,onChange:e=>{q(e.target.value),J(""),V("")},children:[a.jsx("option",{value:"PARTNER",children:"Partner"}),a.jsx("option",{value:"FRIEND",children:"Friend / Colleague"}),a.jsx("option",{value:"FAMILY",children:"Family"})]}),(0,a.jsxs)("div",{className:"mt-2 text-[11px] text-slate-400",children:[a.jsx("div",{className:"font-medium text-slate-300",children:"Primary Relational Tiers (scope):"}),a.jsx("div",{children:"• Partner — full map access, including intimacy arcs & legacy patterns."}),a.jsx("div",{children:"• Friend / Colleague — emotional, behavioral, social dynamics; intimacy overlays de-emphasized."}),a.jsx("div",{children:"• Family — legacy patterns and behavioral overlays; sexual resonance suppressed."}),a.jsx("div",{children:"• Acquaintance — light pattern echoes only; intimacy dynamics locked."})]})]}),"PARTNER"===H&&(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"rel-tier",className:"block text-sm text-slate-300",children:"Intimacy Tier"}),(0,a.jsxs)("select",{id:"rel-tier",disabled:!F,className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100",value:G,onChange:e=>J(e.target.value),children:[a.jsx("option",{value:"",children:"Select…"}),a.jsx("option",{value:"P1",children:"P1 — Platonic partners"}),a.jsx("option",{value:"P2",children:"P2 — Friends-with-benefits"}),a.jsx("option",{value:"P3",children:"P3 — Situationship (unclear/unstable)"}),a.jsx("option",{value:"P4",children:"P4 — Low-commitment romantic or sexual"}),a.jsx("option",{value:"P5a",children:"P5a — Committed romantic + sexual"}),a.jsx("option",{value:"P5b",children:"P5b — Committed romantic, non-sexual"})]}),F&&["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(_)&&!G&&a.jsx("p",{className:"mt-1 text-xs text-amber-400",children:"Partner relationships require an intimacy tier."})]}),"FAMILY"===H&&(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"rel-role",className:"block text-sm text-slate-300",children:"Role"}),(0,a.jsxs)("select",{id:"rel-role",disabled:!F,className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100",value:Z,onChange:e=>V(e.target.value),children:[a.jsx("option",{value:"",children:"Select…"}),a.jsx("option",{value:"Parent",children:"Parent"}),a.jsx("option",{value:"Offspring",children:"Offspring"}),a.jsx("option",{value:"Sibling",children:"Sibling"}),a.jsx("option",{value:"Cousin",children:"Cousin"}),a.jsx("option",{value:"Extended",children:"Extended"}),a.jsx("option",{value:"Guardian",children:"Guardian"}),a.jsx("option",{value:"Mentor",children:"Mentor"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Custom",children:"Custom"})]}),F&&["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(_)&&!G&&a.jsx("p",{className:"mt-1 text-xs text-amber-400",children:"Partner relationships require an intimacy tier."})]}),"FRIEND"===H&&(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"rel-role-f",className:"block text-sm text-slate-300",children:"Role (optional)"}),(0,a.jsxs)("select",{id:"rel-role-f",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100",value:Z,onChange:e=>V(e.target.value),children:[a.jsx("option",{value:"",children:"—"}),a.jsx("option",{value:"Acquaintance",children:"Acquaintance"}),a.jsx("option",{value:"Mentor",children:"Mentor"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Custom",children:"Custom"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"rel-ex",type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-600 focus:ring-indigo-500",checked:X,onChange:e=>K(e.target.checked),disabled:!F||"FRIEND"===H}),a.jsx("label",{htmlFor:"rel-ex",className:"text-sm text-slate-300",children:"Ex / Estranged"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[a.jsx("label",{htmlFor:"rel-notes",className:"block text-sm text-slate-300",children:"Notes"}),a.jsx("textarea",{id:"rel-notes",disabled:!F,className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",rows:3,placeholder:"Optional context (max 500 chars)",value:Q,onChange:e=>ee(e.target.value.slice(0,500))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(u,{title:"Transits",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-start",className:"block text-sm text-slate-300",children:"Start Date"}),a.jsx("input",{id:"t-start",type:"date",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:y,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-end",className:"block text-sm text-slate-300",children:"End Date"}),a.jsx("input",{id:"t-end",type:"date",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:S,onChange:e=>w(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-step",className:"block text-sm text-slate-300",children:"Step"}),(0,a.jsxs)("select",{id:"t-step",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:k,onChange:e=>T(e.target.value),children:[a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-mode",className:"block text-sm text-slate-300",children:"Mode"}),(0,a.jsxs)("select",{id:"t-mode",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:_,onChange:e=>{let t=e.target.value;A(t),["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(t)&&O(!0)},children:[a.jsx("option",{value:"NATAL_ONLY",children:"Natal only"}),a.jsx("option",{value:"NATAL_TRANSITS",children:"Natal + Transits"}),a.jsx("option",{value:"DUAL_NATAL_TRANSITS",children:"Dual Natal + Transits (A & B, no synastry)"}),a.jsx("option",{value:"SYNASTRY",children:"Synastry (A ↔ B)"}),a.jsx("option",{value:"SYNASTRY_TRANSITS",children:"Synastry + Transits"}),a.jsx("option",{value:"COMPOSITE",children:"Composite (midpoint) + Relational Mirror"})]}),!F&&a.jsx("p",{className:"mt-1 text-xs text-amber-400",children:"Selecting a relational mode will enable “Include Person B”."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-reloc",className:"block text-sm text-slate-300",children:"Relocation (angles/houses)"}),(0,a.jsxs)("select",{id:"t-reloc",className:"mt-1 w-full rounded-md border border-slate-600 bg-slate-900 px-3 py-2 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:ed,onChange:e=>ec(e.target.value),children:[a.jsx("option",{value:"NONE",children:"None (Natal Base)"}),a.jsx("option",{value:"A_LOCAL",children:"Person A"}),a.jsx("option",{value:"B_LOCAL",disabled:!F,children:"Person B"}),a.jsx("option",{value:"MIDPOINT",disabled:!F,children:"Midpoint (A + B)"})]}),a.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Clinical toggle only; no narrative. If not applied, angles/houses remain natal."}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Note: Midpoint here relocates houses to the geographic midpoint; Composite mode above creates the midpoint chart."}),"NONE"!==ed?(0,a.jsxs)("div",{className:"mt-4 inline-flex items-center gap-2 rounded-full border border-emerald-700 bg-emerald-900/30 px-3 py-1 text-xs text-emerald-200",children:[a.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Relocated to:"}),a.jsx("span",{className:"text-emerald-100",children:eg||"Custom"}),(0,a.jsxs)("span",{className:"text-emerald-300",children:["(",eN||x.timezone||"—",")"]})]}):null]})]}),"NONE"!==ed&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"t-reloc-coords",className:"block text-sm text-slate-300",children:"Relocation Coordinates"}),a.jsx("input",{id:"t-reloc-coords",type:"text",className:`mt-1 w-full h-10 rounded-md border bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 ${ex?"border-red-600":"border-slate-600"}`,value:em,onChange:e=>{let t=e.target.value;eu(t);let s=i(t,{rejectZeroZero:!0});s?(eb(s),ep(null)):(eb(null),ep("Invalid coordinates"))},placeholder:"e.g., 30\xb010′N, 85\xb040′W"}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Default: 30\xb010′N, 85\xb040′W \xb7 Normalized: ",eh?n(eh.lat,eh.lon):"—"]}),ex&&a.jsx("p",{className:"mt-1 text-xs text-red-400",children:ex}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-reloc-label",className:"block text-sm text-slate-300",children:"Relocation Label"}),a.jsx("input",{id:"t-reloc-label",type:"text",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:eg,onChange:e=>ev(e.target.value),placeholder:"e.g., Panama City, FL"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"t-reloc-tz",className:"block text-sm text-slate-300",children:"Relocation Timezone"}),a.jsx("select",{id:"t-reloc-tz",className:"mt-1 w-full h-10 rounded-md border border-slate-600 bg-slate-900 px-3 text-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",value:eN,onChange:e=>ej(e.target.value),children:er.map(e=>a.jsx("option",{value:e,children:e},e))})]})]})]}),"weekly"===k&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-slate-400",children:"Weekly aggregation"}),a.jsx("button",{type:"button",className:"h-5 w-5 rounded-full border border-slate-600 text-[11px] text-slate-300 hover:bg-slate-700/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",title:"Mean = average of daily values per week; Max = highest daily value per week","aria-label":"Help: Weekly aggregation semantics",children:"?"}),(0,a.jsxs)("div",{role:"group","aria-label":"Weekly aggregation",className:"inline-flex overflow-hidden rounded-md border border-slate-700 bg-slate-800",children:[a.jsx("button",{type:"button",onClick:()=>eJ("mean"),className:`px-3 py-1 text-xs ${"mean"===eG?"bg-indigo-600 text-white":"text-slate-200 hover:bg-slate-700"} focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500`,children:"Mean"}),a.jsx("button",{type:"button",onClick:()=>eJ("max"),className:`px-3 py-1 text-xs ${"max"===eG?"bg-indigo-600 text-white":"text-slate-200 hover:bg-slate-700"} focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500`,children:"Max"})]})]}),"NONE"!==ed&&(0,a.jsxs)("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full border border-emerald-700 bg-emerald-900/30 px-3 py-1 text-xs text-emerald-200",children:[a.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Relocated to:"}),a.jsx("span",{className:"text-emerald-100",children:eg||"—"}),a.jsx("span",{className:"text-emerald-300",children:eN||x.timezone||"—"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"All processing is geometry-first and non-deterministic. Your data isn’t stored."}),(0,a.jsxs)("div",{className:"mr-2 hidden sm:flex items-center gap-2 text-[11px] text-slate-400",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5",children:[a.jsx("span",{className:"text-slate-300",children:"Mode:"}),a.jsx("span",{className:"text-slate-100",children:_.replace(/_/g," ")})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5",children:[a.jsx("span",{className:"text-slate-300",children:"Report:"}),a.jsx("span",{className:"text-slate-100 capitalize",children:ez})]})]}),a.jsx("button",{type:"submit",disabled:eQ,className:"inline-flex items-center rounded-md px-4 py-2 text-white disabled:opacity-50 bg-indigo-600 hover:bg-indigo-500",children:C?"Mapping geometry…":"balance"===ez?"Generate Report":"Prepare Mirror"})]}),["SYNASTRY","SYNASTRY_TRANSITS","COMPOSITE","DUAL_NATAL_TRANSITS"].includes(_)&&!F&&a.jsx("p",{className:"mt-2 text-xs text-amber-400",children:"Hint: Toggle “Include Person B” and fill in required fields to enable relational modes."})]})]})]}),P&&(0,a.jsxs)("div",{className:"mt-6 rounded-md border border-red-700 bg-red-900/30 p-4 text-red-200",children:[a.jsx("p",{className:"font-medium",children:"Error"}),a.jsx("p",{className:"mt-1 text-sm",children:P})]}),C&&(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-6 print:hidden",children:[(0,a.jsxs)("section",{className:"rounded-lg border border-slate-700 bg-slate-800/60 p-4",children:[a.jsx("div",{className:"h-5 w-40 rounded bg-slate-700 animate-pulse"}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[a.jsx("div",{className:"h-16 rounded bg-slate-700/70 animate-pulse"}),a.jsx("div",{className:"h-16 rounded bg-slate-700/70 animate-pulse"}),a.jsx("div",{className:"h-16 rounded bg-slate-700/70 animate-pulse"})]})]}),(0,a.jsxs)("section",{className:"rounded-lg border border-slate-700 bg-slate-800/60 p-4",children:[a.jsx("div",{className:"h-5 w-56 rounded bg-slate-700 animate-pulse"}),a.jsx("div",{className:"mt-4 h-24 rounded bg-slate-700/60 animate-pulse"})]})]}),B&&(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-6",children:[(()=>{let e=B?.person_a?.meta||B?.provenance?.time_meta_a;if(!e)return null;let t=!!e.houses_suppressed,s=String(e.time_precision||""),l=e.effective_time_used;return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[t&&a.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-800/70 px-3 py-1 text-xs text-slate-200",children:"Angles unavailable without birth time; houses suppressed."}),l&&(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-700 bg-emerald-900/30 px-3 py-1 text-xs text-emerald-200",children:[a.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Effective time"}),a.jsx("span",{className:"text-emerald-100",children:l})]}),"unknown"===s&&"planetary_only"===es&&a.jsx("div",{className:"rounded-md border border-amber-700 bg-amber-900/30 px-3 py-1 text-xs text-amber-200",children:"Using planetary-only mode. You can run a sensitivity scan for house-dependent work."})]})})(),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 print:hidden",children:[a.jsx("div",{className:"text-sm text-slate-400",children:ey&&eS?(0,a.jsxs)("span",{children:["Download your report, then visit ",a.jsx("a",{href:"/chat",className:"text-emerald-400 hover:text-emerald-300 underline",children:"Poetic Brain"})," to upload it for interpretation."]}):(0,a.jsxs)("span",{children:["Download your report below. ",a.jsx("a",{href:"/chat",className:"text-slate-300 hover:text-slate-200 underline",children:"Sign in to Poetic Brain"})," to upload it for interpretation."]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:function(){if(B)try{let e=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a"),a=new Date().toISOString().slice(0,10).replace(/-/g,"");s.href=t,s.download=`math-brain-result-${a}.json`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(t);try{eL("Downloading result JSON"),setTimeout(()=>eL(null),1400)}catch{}}catch{}},className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-slate-100 hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400","aria-label":"Download result JSON",children:"Download JSON"}),a.jsx("button",{type:"button",onClick:eZ,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-slate-100 hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400","aria-label":"Download PDF",children:"Download PDF"})]})]}),"balance"===ez&&(0,a.jsxs)(a.Fragment,{children:[Object.keys(B?.person_a?.chart?.transitsByDate||{}).length>0?null:a.jsx("div",{className:"rounded-md border border-amber-700 bg-amber-900/30 p-3 text-amber-200",children:a.jsx("p",{className:"text-sm",children:"No daily series data returned. Double-check your dates, step, and inputs, then try again. If this persists, view the Raw Result (debug) below."})}),(()=>{let e=B?.woven_map;if(!e?.hook_stack?.hooks?.length)return null;let t=e.hook_stack.hooks||[];return(0,a.jsxs)(u,{title:"Hook Stack — Recognition Gateway",children:[(0,a.jsxs)("div",{className:"mb-3 text-sm text-slate-400",children:["Front-door UX: ",t.length," high-charge patterns from tightest aspects",e.hook_stack.tier_1_orbs>0&&` \xb7 ${e.hook_stack.tier_1_orbs} Tier-1 (≤1\xb0)`,"\xb7 Coverage: ",e.hook_stack.coverage]}),a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-md border border-amber-600/30 bg-amber-900/20 p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"text-amber-100 font-medium leading-tight",children:e.title}),e.is_tier_1&&a.jsx("span",{className:"ml-2 inline-flex items-center rounded bg-amber-600 px-1.5 py-0.5 text-xs font-medium text-amber-100",children:"T1"})]}),(0,a.jsxs)("div",{className:"text-xs text-amber-200/70 space-y-1",children:[(0,a.jsxs)("div",{children:["Orb: ",e.orb?.toFixed(1),"\xb0 \xb7 Intensity: ",Math.round(e.intensity)]}),(0,a.jsxs)("div",{children:[e.planets?.join(" ")||""," ",e.aspect_type]})]})]},t))}),a.jsx("div",{className:"mt-3 text-xs text-slate-400",children:'Purpose: Bypass analysis → trigger "that\'s me" recognition → open depth work'})]})})(),(()=>{let e=B?.woven_map;if(!e)return null;let t=e.integration_factors||{},s=Array.isArray(e.time_series)?e.time_series:[],l=s[0]?.date,i=s[s.length-1]?.date;return(0,a.jsxs)(u,{title:"Woven Map (data-only)",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-slate-300",children:"Integration Factors"}),a.jsx("div",{className:"mt-2 space-y-2",children:[{key:"fertile_field",label:"Fertile Field"},{key:"harmonic_resonance",label:"Harmonic Resonance"},{key:"expansion_lift",label:"Expansion Lift"},{key:"combustion_clarity",label:"Combustion Clarity"},{key:"liberation_release",label:"Liberation / Release"},{key:"integration",label:"Integration"}].map(({key:e,label:s})=>{let l=Math.max(0,Math.min(100,Number(t[e]??0)));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[a.jsx("span",{children:s}),(0,a.jsxs)("span",{children:[l,"%"]})]}),(0,a.jsxs)("svg",{viewBox:"0 0 100 6",className:"h-1.5 w-full",children:[a.jsx("rect",{x:"0",y:"0",width:"100",height:"6",className:"fill-slate-700"}),a.jsx("rect",{x:"0",y:"0",width:l,height:"6",className:"fill-emerald-500"})]})]},String(e))})})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-slate-300",children:"Time Series"}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-400",children:["Entries: ",s.length||0,l&&i?` \xb7 ${l} → ${i}`:""]}),a.jsx("div",{className:"mt-2 max-h-40 overflow-auto rounded border border-slate-700 bg-slate-900/40 p-2",children:(0,a.jsxs)("table",{className:"w-full text-xs text-slate-300",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-slate-400",children:[a.jsx("th",{className:"text-left font-medium",children:"Date"}),a.jsx("th",{className:"text-right font-medium",children:"Mag"}),a.jsx("th",{className:"text-right font-medium",children:"Val"}),a.jsx("th",{className:"text-right font-medium",children:"Vol"})]})}),a.jsx("tbody",{children:s.slice(-10).map((e,t)=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"py-0.5 pr-2",children:e.date}),a.jsx("td",{className:"py-0.5 text-right",children:Number(e.magnitude??0).toFixed(2)}),a.jsx("td",{className:"py-0.5 text-right",children:Number(e.valence??0).toFixed(2)}),a.jsx("td",{className:"py-0.5 text-right",children:Number(e.volatility??0).toFixed(2)})]},t))})]})})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 sm:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Natal aspects (A)"}),a.jsx("div",{className:"text-lg text-slate-100",children:e.natal_summary?.major_aspects?.length??0})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Polarity cards (hooks)"}),a.jsx("div",{className:"text-lg text-slate-100",children:Array.isArray(e.polarity_cards)?e.polarity_cards.length:0})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Report type"}),a.jsx("div",{className:"text-lg text-slate-100 capitalize",children:e.type||"solo"})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Schema"}),a.jsx("div",{className:"text-xs text-slate-100",children:e.schema})]})]})]})})(),(()=>{let e=B?.context;if(!e?.translocation)return null;let t=e.translocation;return a.jsx(u,{title:"Translocation Context",className:"print:hidden",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4 text-sm text-slate-300",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Applies"}),a.jsx("div",{className:"text-slate-100",children:t.applies?"Yes":"No"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Method"}),a.jsx("div",{className:"text-slate-100",children:(()=>{let e=String(t.method||"Natal");return/^A[_ ]?local$/i.test(e)||"A_local"===e?"Person A":/^B[_ ]?local$/i.test(e)||"B_local"===e?"Person B":/^midpoint$/i.test(e)?"Person A + B":/^natal$/i.test(e)?"None (Natal Base)":e})()})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-slate-400",children:"House System"}),a.jsx("div",{className:"text-slate-100",children:t.house_system||"Placidus"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-slate-400",children:"TZ"}),a.jsx("div",{className:"text-slate-100",children:t.tz||x?.timezone||"—"})]})]})})})(),(()=>{let e=B?.person_a?.derived?.seismograph_summary;if(!e)return null;let t=Number(e.magnitude??0),s=Number(e.valence??0),l=Number(e.volatility??0);return(0,a.jsxs)(u,{title:"Balance Meter",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded bg-slate-700/60 px-3 py-1 text-slate-100",children:[a.jsx("span",{children:"⚡"}),a.jsx("span",{children:"Magnitude"}),(0,a.jsxs)("span",{className:"text-slate-300",children:["\xb7 ",t>=3?"Surge":t>=1?"Active":"Calm"]})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded bg-slate-700/60 px-3 py-1 text-slate-100",children:[a.jsx("span",{children:"\uD83C\uDF13"}),a.jsx("span",{children:"Valence"}),(0,a.jsxs)("span",{className:"text-slate-300",children:["\xb7 ",s>.5?"Supportive":s<-.5?"Challenging":"Mixed"]})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded bg-slate-700/60 px-3 py-1 text-slate-100",children:[a.jsx("span",{children:"\uD83D\uDD37"}),a.jsx("span",{children:"Volatility"}),(0,a.jsxs)("span",{className:"text-slate-300",children:["\xb7 ",l>=3?"Scattered":l>=1?"Variable":"Stable"]})]})]}),(()=>{let e=B?.person_a?.chart?.transitsByDate||{},t=Object.keys(e).sort();if(!t.length)return null;let s=t.map(t=>({date:t,magnitude:Number(e[t]?.seismograph?.magnitude??0),valence:Number(e[t]?.seismograph?.valence??0),volatility:Number(e[t]?.seismograph?.volatility??0)})),l="weekly"===k?(()=>{let e=[];for(let t=0;t<s.length;t+=7){let a=s.slice(t,t+7);if(!a.length)continue;let l=e=>e.reduce((e,t)=>e+t,0)/e.length,i=e=>e.reduce((e,t)=>Math.max(e,t),-1/0),r="max"===eG?i:l;e.push([{date:a[0].date,magnitude:Number(r(a.map(e=>e.magnitude)).toFixed(2)),valence:Number(r(a.map(e=>e.valence)).toFixed(2)),volatility:Number(r(a.map(e=>e.volatility)).toFixed(2))}])}return e.map(e=>e[0])})():s,i=Math.min(28,l.length),r=l.slice(-i);return(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("div",{className:"mb-1 text-[11px] text-slate-400",children:"Legend: ⚡ Magnitude \xb7 \uD83C\uDF13 Valence \xb7 \uD83D\uDD37 Volatility"}),(0,a.jsxs)("div",{className:"mb-1 flex justify-between text-[10px] text-slate-500",children:[a.jsx("span",{children:"Top ≈ 5"}),a.jsx("span",{children:"Date labels show MM-DD"})]}),(()=>{let e=r[0]?.date,t=r[r.length-1]?.date;return e&&t?(0,a.jsxs)("div",{className:"mb-1 text-[10px] text-slate-500",children:[e," | ",t]}):null})(),a.jsx("div",{className:"flex items-end gap-2 overflow-x-auto rounded border border-slate-700 bg-slate-900/40 p-2",children:r.map((e,t)=>{let s=Math.max(0,Math.min(96,Math.round(e.magnitude/5*96))),l=Math.max(0,Math.min(96,Math.round(Math.min(5,Math.abs(e.valence))/5*96))),i=Math.max(0,Math.min(96,Math.round(e.volatility/5*96)));return(0,a.jsxs)("div",{className:"flex w-6 flex-col items-center justify-end gap-0.5",children:[(0,a.jsxs)("svg",{width:"16",height:"96",viewBox:"0 0 16 96",className:"block",children:[a.jsx("rect",{x:"0",y:96-s,width:"5",height:s,className:"fill-indigo-500 opacity-80"}),a.jsx("rect",{x:"6",y:96-l,width:"4",height:l,className:"fill-emerald-500 opacity-70"}),a.jsx("rect",{x:"11",y:96-i,width:"5",height:i,className:"fill-sky-500 opacity-70"})]}),a.jsx("div",{className:"text-[10px] text-center text-slate-400 truncate w-full",title:e.date,children:e.date.slice(5)})]},t)})})]})})(),a.jsx("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3",children:(()=>{let e=Math.min(1,Math.max(0,t/5)),i=Math.min(1,Math.max(0,l/5)),r=(Math.max(-2,Math.min(2,s))+2)/4;return[{name:"Fertile Field",hint:"Growth-friendly openings",score:.7*r+(1-i)*.3},{name:"Harmonic Resonance",hint:"Easier flow and alignment",score:.6*r+(1-i)*.4},{name:"Expansion Lift",hint:"Momentum and reach",score:.6*e+.4*r},{name:"Combustion Clarity",hint:"Honest frictions surface",score:.5*e+.5*i},{name:"Liberation / Release",hint:"Letting go, reset",score:.7*i+(1-r)*.3},{name:"Integration",hint:"Synthesis and grounding",score:(1-i)*.6+.4*r}].map((e,t)=>{let s=Math.round(100*e.score);return(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-800/50 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-slate-100 font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:[s,"%"]})]}),(0,a.jsxs)("svg",{viewBox:"0 0 100 8",className:"mt-2 h-2 w-full",children:[a.jsx("rect",{x:"0",y:"0",width:"100",height:"8",className:"fill-slate-700"}),a.jsx("rect",{x:"0",y:"0",width:s,height:"8",className:"fill-emerald-500"})]}),a.jsx("p",{className:"mt-2 text-xs text-slate-400",children:e.hint})]},t)})})()}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 sm:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Magnitude"}),a.jsx("div",{className:"text-lg text-slate-100",children:t.toFixed(2)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Valence"}),a.jsx("div",{className:"text-lg text-slate-100",children:s.toFixed(2)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"Volatility"}),a.jsx("div",{className:"text-lg text-slate-100",children:l.toFixed(2)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900/40 p-3 text-center",children:[a.jsx("div",{className:"text-xs text-slate-400",children:"SFD"}),a.jsx("div",{className:"text-lg text-slate-100",children:B?.person_a?.sfd?.sfd??"—"})]})]})]})})(),B?.person_a?.derived?.seismograph_summary&&a.jsx(u,{title:"Seismograph Summary",className:"print:hidden",children:a.jsx("div",{className:"text-sm text-slate-300",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Magnitude"}),a.jsx("p",{className:"text-slate-100",children:B.person_a.derived.seismograph_summary.magnitude})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Valence"}),a.jsx("p",{className:"text-slate-100",children:B.person_a.derived.seismograph_summary.valence})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Volatility"}),a.jsx("p",{className:"text-slate-100",children:B.person_a.derived.seismograph_summary.volatility})]})]})})}),B?.person_b?.derived?.seismograph_summary&&a.jsx(u,{title:"Person B — Seismograph Summary",className:"print:hidden",children:a.jsx("div",{className:"text-sm text-slate-300",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Magnitude"}),a.jsx("p",{className:"text-slate-100",children:B.person_b.derived.seismograph_summary.magnitude})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Valence"}),a.jsx("p",{className:"text-slate-100",children:B.person_b.derived.seismograph_summary.valence})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-400",children:"Volatility"}),a.jsx("p",{className:"text-slate-100",children:B.person_b.derived.seismograph_summary.volatility})]})]})})}),(B?.synastry_relational_mirror||B?.relational_mirror)&&a.jsx(u,{title:"Relational Mirror",className:"print:hidden",children:(0,a.jsxs)("div",{className:"text-sm text-slate-300 space-y-2",children:[a.jsx("p",{className:"text-slate-200 font-medium",children:"Climate"}),a.jsx("p",{className:"text-slate-300",children:B?.synastry_relational_mirror?.mirror_voice?.relationship_climate||B?.relational_mirror?.mirror_voice?.relationship_climate||"—"}),a.jsx("p",{className:"text-slate-200 font-medium",children:"Polarity"}),a.jsx("p",{className:"text-slate-300",children:B?.synastry_relational_mirror?.mirror_voice?.polarity_summary||B?.relational_mirror?.mirror_voice?.polarity_summary||"—"})]})}),(()=>{let e=B?.person_a?.chart?.transitsByDate||{},t=Object.keys(e).sort();if(!t.length)return null;let s=e[t[t.length-1]],l=s?.transit_table?.markdown;return l?a.jsx(u,{title:"Raw Geometry (latest day)",children:a.jsx("pre",{className:"max-h-[24rem] overflow-auto rounded bg-slate-950 p-3 text-xs text-slate-200 whitespace-pre-wrap",children:l})}):null})(),a.jsx(u,{title:"Raw Result (debug)",className:"print:hidden",children:a.jsx("pre",{className:"max-h-[28rem] overflow-auto rounded-md bg-slate-950 p-4 text-xs text-slate-200",children:JSON.stringify(B,null,2)})}),a.jsx("div",{className:"flex items-center justify-center text-sm text-slate-400 print:hidden",children:(0,a.jsxs)("span",{children:["For narrative interpretation, download your report and upload it to ",a.jsx("a",{href:"/chat",className:"text-emerald-400 hover:text-emerald-300 underline",children:"Poetic Brain"}),"."]})})]})]}),"balance"===ez&&(!Number(x.latitude)||!Number(x.longitude)||!x.timezone)&&a.jsx("div",{className:"mt-4 rounded-md border border-red-700 bg-red-900/30 p-3 text-red-200",children:a.jsx("p",{className:"text-sm",children:"Transits need current location to place houses correctly. Add a location or switch to Mirror (no transits)."})}),!x.hour&&!x.minute&&a.jsx("div",{className:"mt-4 rounded-md border border-slate-700 bg-slate-800/70 p-3 text-slate-200",children:a.jsx("p",{className:"text-sm",children:"Angles unavailable without birth time; houses suppressed."})}),eO&&a.jsx("div",{className:"fixed bottom-4 left-1/2 z-50 -translate-x-1/2 rounded-md border border-red-700 bg-red-900/80 px-4 py-2 text-sm text-red-100 shadow-lg",children:eO}),(0,a.jsxs)("p",{className:"mt-8 text-center text-xs text-slate-500 print:hidden",children:["Poetic Brain at ",a.jsx("span",{className:"font-medium text-slate-300",children:"/chat"})," is gated by Auth0 and requires login."]})]})}},2991:(e,t,s)=>{"use strict";function a(){return"/math-brain"}s.d(t,{g:()=>a})},910:(e,t,s)=>{"use strict";function a(e,t,s){let a="balance"===e||"mirror"===e&&t,l=s?.latitude,i=s?.longitude,r="number"==typeof l||"string"==typeof l&&""!==l.trim()&&Number.isFinite(Number(l)),n="number"==typeof i||"string"==typeof i&&""!==i.trim()&&Number.isFinite(Number(i)),o=!!s?.timezone,d=!!s&&r&&n&&o,c="number"==typeof s?.hour||"string"==typeof s?.hour&&""!==s.hour,m="number"==typeof s?.minute||"string"==typeof s?.minute&&""!==s.minute;return{needsLoc:a,hasLoc:d,hasBirthTime:c&&m,canSubmit:!a||a&&d}}function l(e){let t=e.translocation;return t&&t.applies?{active:!0,lens:`${t.current_location}${t.house_system?" ("+t.house_system+")":""}`,disclosure:`Relocation ON – Houses remapped to ${t.current_location}`,invariants:"Planetary geometry identical; only arena (House channels) shifted"}:{active:!1,lens:t?.current_location||"Natal Base",disclosure:"Relocation OFF – natal House mapping in effect",invariants:"Planets, signs, aspects as computed from natal coordinates"}}function i(e){if(!e)return!0;let t="number"==typeof e.hour||"string"==typeof e.hour&&""!==e.hour,s="number"==typeof e.minute||"string"==typeof e.minute&&""!==e.minute;return!(t&&s)}s.d(t,{N8:()=>a,TG:()=>l,jA:()=>i})},6083:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});var a=s(8570);let l=(0,a.createProxy)(String.raw`/Users/dancross/Documents/GitHub/WovenWebApp/app/error.tsx`),{__esModule:i,$$typeof:r}=l;l.default;let n=(0,a.createProxy)(String.raw`/Users/dancross/Documents/GitHub/WovenWebApp/app/error.tsx#default`)},746:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r,metadata:()=>i});var a=s(9510);s(1159),s(7272);let l="Raven Calder",i={title:`${l} \xb7 Chat`,description:`${l} diagnostic chat`};function r({children:e}){return(0,a.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[a.jsx("head",{children:a.jsx("link",{rel:"stylesheet",href:"/dist/output.css"})}),a.jsx("body",{suppressHydrationWarning:!0,className:"app antialiased",children:e})]})}},8429:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>o,dynamic:()=>n});var a=s(8570);let l=(0,a.createProxy)(String.raw`/Users/dancross/Documents/GitHub/WovenWebApp/app/math-brain/page.tsx`),{__esModule:i,$$typeof:r}=l;l.default;let n=(0,a.createProxy)(String.raw`/Users/dancross/Documents/GitHub/WovenWebApp/app/math-brain/page.tsx#dynamic`),o=(0,a.createProxy)(String.raw`/Users/dancross/Documents/GitHub/WovenWebApp/app/math-brain/page.tsx#default`)},6560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(9510);function l(){return a.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Page not found"}),a.jsx("p",{className:"text-slate-500",children:"The page you’re looking for doesn’t exist."})]})})}s(1159)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,669],()=>s(900));module.exports=a})();