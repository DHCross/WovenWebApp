"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_raven_render_ts";
exports.ids = ["_rsc_lib_raven_render_ts"];
exports.modules = {

/***/ "(rsc)/./lib/raven/render.ts":
/*!*****************************!*\
  !*** ./lib/raven/render.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   renderMirror: () => (/* binding */ renderMirror),\n/* harmony export */   renderShareableMirror: () => (/* binding */ renderShareableMirror)\n/* harmony export */ });\n// Lightweight stub for Raven renderer.\n// Exists to satisfy build-time resolution when the full Raven module\n// is not bundled in this environment. The Poetic Brain pipeline will\n// merge this output with its local fallback so required fields remain\n// populated.\nasync function tryLoadFormatter() {\n    try {\n        const mod = await __webpack_require__.e(/*! import() */ \"_rsc_src_formatter_create_markdown_reading_enhanced_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/src/formatter/create_markdown_reading_enhanced.js */ \"(rsc)/./src/formatter/create_markdown_reading_enhanced.js\"));\n        const fn = typeof mod?.default === \"function\" && mod.default || typeof mod?.createMarkdownReadingEnhanced === \"function\" && mod.createMarkdownReadingEnhanced || typeof mod?.create_markdown_reading_enhanced === \"function\" && mod.create_markdown_reading_enhanced || typeof mod?.render === \"function\" && mod.render || typeof mod?.format === \"function\" && mod.format || null;\n        if (fn) return {\n            mod,\n            used: \"@/src/formatter/create_markdown_reading_enhanced.js\",\n            fn\n        };\n    } catch  {\n    // formatter not present; caller will fall back\n    }\n    return {\n        mod: null,\n        used: null,\n        fn: null\n    };\n}\nfunction normalizeMarkdownOutput(res) {\n    if (!res) return null;\n    if (typeof res === \"string\") return res;\n    if (typeof res === \"object\") {\n        if (typeof res.markdown === \"string\") return res.markdown;\n        if (typeof res.text === \"string\") return res.text;\n        if (typeof res.content === \"string\") return res.content;\n    }\n    return null;\n}\nasync function renderShareableMirror({ geo, prov, options }) {\n    // Attempt to route to the enhanced markdown formatter. If unavailable,\n    // fall back to a minimal appendix only; upstream will merge with local draft.\n    const { fn, used } = await tryLoadFormatter();\n    let readerMarkdown = null;\n    if (fn) {\n        try {\n            const ctx = {\n                geo,\n                prov: prov ?? {},\n                options: options ?? {}\n            };\n            const res = await fn(ctx);\n            readerMarkdown = normalizeMarkdownOutput(res);\n        } catch  {\n            // ignore formatter errors; keep fallback\n            readerMarkdown = null;\n        }\n    }\n    const appendix = {\n        renderer: fn ? \"raven-markdown-formatter\" : \"raven-stub\",\n        formatter_module: used,\n        prov: prov ?? {\n            source: \"raven-stub\"\n        },\n        options: options ?? {},\n        echoed_aspects: Array.isArray(geo?.aspects) ? geo.aspects.length : 0\n    };\n    if (readerMarkdown) appendix.reader_markdown = readerMarkdown;\n    return {\n        appendix\n    };\n}\nconst renderMirror = renderShareableMirror;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (renderShareableMirror);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF2ZW4vcmVuZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHVDQUF1QztBQUN2QyxxRUFBcUU7QUFDckUscUVBQXFFO0FBQ3JFLHNFQUFzRTtBQUN0RSxhQUFhO0FBSWIsZUFBZUE7SUFLYixJQUFJO1FBQ0YsTUFBTUMsTUFBaUIsTUFBTSwyUUFBTztRQUNwQyxNQUFNQyxLQUNKLE9BQVFELEtBQUtFLFlBQVksY0FBY0YsSUFBSUUsT0FBTyxJQUNqRCxPQUFPRixLQUFLRyxrQ0FBa0MsY0FBY0gsSUFBSUcsNkJBQTZCLElBQzdGLE9BQU9ILEtBQUtJLHFDQUFxQyxjQUFjSixJQUFJSSxnQ0FBZ0MsSUFDbkcsT0FBT0osS0FBS0ssV0FBVyxjQUFjTCxJQUFJSyxNQUFNLElBQy9DLE9BQU9MLEtBQUtNLFdBQVcsY0FBY04sSUFBSU0sTUFBTSxJQUNoRDtRQUNGLElBQUlMLElBQUksT0FBTztZQUFFRDtZQUFLTyxNQUFNO1lBQXVETjtRQUFHO0lBQ3hGLEVBQUUsT0FBTTtJQUNOLCtDQUErQztJQUNqRDtJQUNBLE9BQU87UUFBRUQsS0FBSztRQUFNTyxNQUFNO1FBQU1OLElBQUk7SUFBSztBQUMzQztBQUVBLFNBQVNPLHdCQUF3QkMsR0FBUTtJQUN2QyxJQUFJLENBQUNBLEtBQUssT0FBTztJQUNqQixJQUFJLE9BQU9BLFFBQVEsVUFBVSxPQUFPQTtJQUNwQyxJQUFJLE9BQU9BLFFBQVEsVUFBVTtRQUMzQixJQUFJLE9BQU9BLElBQUlDLFFBQVEsS0FBSyxVQUFVLE9BQU9ELElBQUlDLFFBQVE7UUFDekQsSUFBSSxPQUFPRCxJQUFJRSxJQUFJLEtBQUssVUFBVSxPQUFPRixJQUFJRSxJQUFJO1FBQ2pELElBQUksT0FBT0YsSUFBSUcsT0FBTyxLQUFLLFVBQVUsT0FBT0gsSUFBSUcsT0FBTztJQUN6RDtJQUNBLE9BQU87QUFDVDtBQUVPLGVBQWVDLHNCQUFzQixFQUMxQ0MsR0FBRyxFQUNIQyxJQUFJLEVBQ0pDLE9BQU8sRUFLUjtJQUNDLHVFQUF1RTtJQUN2RSw4RUFBOEU7SUFDOUUsTUFBTSxFQUFFZixFQUFFLEVBQUVNLElBQUksRUFBRSxHQUFHLE1BQU1SO0lBQzNCLElBQUlrQixpQkFBZ0M7SUFDcEMsSUFBSWhCLElBQUk7UUFDTixJQUFJO1lBQ0YsTUFBTWlCLE1BQU07Z0JBQUVKO2dCQUFLQyxNQUFNQSxRQUFRLENBQUM7Z0JBQUdDLFNBQVNBLFdBQVcsQ0FBQztZQUFFO1lBQzVELE1BQU1QLE1BQU0sTUFBTVIsR0FBR2lCO1lBQ3JCRCxpQkFBaUJULHdCQUF3QkM7UUFDM0MsRUFBRSxPQUFNO1lBQ04seUNBQXlDO1lBQ3pDUSxpQkFBaUI7UUFDbkI7SUFDRjtJQUVBLE1BQU1FLFdBQXNCO1FBQzFCQyxVQUFVbkIsS0FBSyw2QkFBNkI7UUFDNUNvQixrQkFBa0JkO1FBQ2xCUSxNQUFNQSxRQUFRO1lBQUVPLFFBQVE7UUFBYTtRQUNyQ04sU0FBU0EsV0FBVyxDQUFDO1FBQ3JCTyxnQkFBZ0JDLE1BQU1DLE9BQU8sQ0FBQ1gsS0FBS1ksV0FBV1osSUFBSVksT0FBTyxDQUFDQyxNQUFNLEdBQUc7SUFDckU7SUFDQSxJQUFJVixnQkFBZ0JFLFNBQVNTLGVBQWUsR0FBR1g7SUFFL0MsT0FBTztRQUFFRTtJQUFTO0FBQ3BCO0FBRU8sTUFBTVUsZUFBZWhCLHNCQUFzQjtBQUNsRCxpRUFBZUEscUJBQXFCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd292ZW4td2ViLWFwcC8uL2xpYi9yYXZlbi9yZW5kZXIudHM/MWQzYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWdodHdlaWdodCBzdHViIGZvciBSYXZlbiByZW5kZXJlci5cbi8vIEV4aXN0cyB0byBzYXRpc2Z5IGJ1aWxkLXRpbWUgcmVzb2x1dGlvbiB3aGVuIHRoZSBmdWxsIFJhdmVuIG1vZHVsZVxuLy8gaXMgbm90IGJ1bmRsZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gVGhlIFBvZXRpYyBCcmFpbiBwaXBlbGluZSB3aWxsXG4vLyBtZXJnZSB0aGlzIG91dHB1dCB3aXRoIGl0cyBsb2NhbCBmYWxsYmFjayBzbyByZXF1aXJlZCBmaWVsZHMgcmVtYWluXG4vLyBwb3B1bGF0ZWQuXG5cbnR5cGUgQW55UmVjb3JkID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuYXN5bmMgZnVuY3Rpb24gdHJ5TG9hZEZvcm1hdHRlcigpOiBQcm9taXNlPHtcbiAgbW9kOiBBbnlSZWNvcmQgfCBudWxsO1xuICB1c2VkOiBzdHJpbmcgfCBudWxsO1xuICBmbjogKChjdHg6IEFueVJlY29yZCkgPT4gUHJvbWlzZTxhbnk+IHwgYW55KSB8IG51bGw7XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbW9kOiBBbnlSZWNvcmQgPSBhd2FpdCBpbXBvcnQoJ0Avc3JjL2Zvcm1hdHRlci9jcmVhdGVfbWFya2Rvd25fcmVhZGluZ19lbmhhbmNlZC5qcycpO1xuICAgIGNvbnN0IGZuID1cbiAgICAgICh0eXBlb2YgbW9kPy5kZWZhdWx0ID09PSAnZnVuY3Rpb24nICYmIG1vZC5kZWZhdWx0KSB8fFxuICAgICAgKHR5cGVvZiBtb2Q/LmNyZWF0ZU1hcmtkb3duUmVhZGluZ0VuaGFuY2VkID09PSAnZnVuY3Rpb24nICYmIG1vZC5jcmVhdGVNYXJrZG93blJlYWRpbmdFbmhhbmNlZCkgfHxcbiAgICAgICh0eXBlb2YgbW9kPy5jcmVhdGVfbWFya2Rvd25fcmVhZGluZ19lbmhhbmNlZCA9PT0gJ2Z1bmN0aW9uJyAmJiBtb2QuY3JlYXRlX21hcmtkb3duX3JlYWRpbmdfZW5oYW5jZWQpIHx8XG4gICAgICAodHlwZW9mIG1vZD8ucmVuZGVyID09PSAnZnVuY3Rpb24nICYmIG1vZC5yZW5kZXIpIHx8XG4gICAgICAodHlwZW9mIG1vZD8uZm9ybWF0ID09PSAnZnVuY3Rpb24nICYmIG1vZC5mb3JtYXQpIHx8XG4gICAgICBudWxsO1xuICAgIGlmIChmbikgcmV0dXJuIHsgbW9kLCB1c2VkOiAnQC9zcmMvZm9ybWF0dGVyL2NyZWF0ZV9tYXJrZG93bl9yZWFkaW5nX2VuaGFuY2VkLmpzJywgZm4gfTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gZm9ybWF0dGVyIG5vdCBwcmVzZW50OyBjYWxsZXIgd2lsbCBmYWxsIGJhY2tcbiAgfVxuICByZXR1cm4geyBtb2Q6IG51bGwsIHVzZWQ6IG51bGwsIGZuOiBudWxsIH07XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1hcmtkb3duT3V0cHV0KHJlczogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghcmVzKSByZXR1cm4gbnVsbDtcbiAgaWYgKHR5cGVvZiByZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gcmVzO1xuICBpZiAodHlwZW9mIHJlcyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAodHlwZW9mIHJlcy5tYXJrZG93biA9PT0gJ3N0cmluZycpIHJldHVybiByZXMubWFya2Rvd247XG4gICAgaWYgKHR5cGVvZiByZXMudGV4dCA9PT0gJ3N0cmluZycpIHJldHVybiByZXMudGV4dDtcbiAgICBpZiAodHlwZW9mIHJlcy5jb250ZW50ID09PSAnc3RyaW5nJykgcmV0dXJuIHJlcy5jb250ZW50O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyU2hhcmVhYmxlTWlycm9yKHtcbiAgZ2VvLFxuICBwcm92LFxuICBvcHRpb25zLFxufToge1xuICBnZW86IEFueVJlY29yZDtcbiAgcHJvdj86IEFueVJlY29yZDtcbiAgb3B0aW9ucz86IEFueVJlY29yZDtcbn0pOiBQcm9taXNlPEFueVJlY29yZD4ge1xuICAvLyBBdHRlbXB0IHRvIHJvdXRlIHRvIHRoZSBlbmhhbmNlZCBtYXJrZG93biBmb3JtYXR0ZXIuIElmIHVuYXZhaWxhYmxlLFxuICAvLyBmYWxsIGJhY2sgdG8gYSBtaW5pbWFsIGFwcGVuZGl4IG9ubHk7IHVwc3RyZWFtIHdpbGwgbWVyZ2Ugd2l0aCBsb2NhbCBkcmFmdC5cbiAgY29uc3QgeyBmbiwgdXNlZCB9ID0gYXdhaXQgdHJ5TG9hZEZvcm1hdHRlcigpO1xuICBsZXQgcmVhZGVyTWFya2Rvd246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBpZiAoZm4pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3R4ID0geyBnZW8sIHByb3Y6IHByb3YgPz8ge30sIG9wdGlvbnM6IG9wdGlvbnMgPz8ge30gfTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZuKGN0eCk7XG4gICAgICByZWFkZXJNYXJrZG93biA9IG5vcm1hbGl6ZU1hcmtkb3duT3V0cHV0KHJlcyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBpZ25vcmUgZm9ybWF0dGVyIGVycm9yczsga2VlcCBmYWxsYmFja1xuICAgICAgcmVhZGVyTWFya2Rvd24gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFwcGVuZGl4OiBBbnlSZWNvcmQgPSB7XG4gICAgcmVuZGVyZXI6IGZuID8gJ3JhdmVuLW1hcmtkb3duLWZvcm1hdHRlcicgOiAncmF2ZW4tc3R1YicsXG4gICAgZm9ybWF0dGVyX21vZHVsZTogdXNlZCxcbiAgICBwcm92OiBwcm92ID8/IHsgc291cmNlOiAncmF2ZW4tc3R1YicgfSxcbiAgICBvcHRpb25zOiBvcHRpb25zID8/IHt9LFxuICAgIGVjaG9lZF9hc3BlY3RzOiBBcnJheS5pc0FycmF5KGdlbz8uYXNwZWN0cykgPyBnZW8uYXNwZWN0cy5sZW5ndGggOiAwLFxuICB9O1xuICBpZiAocmVhZGVyTWFya2Rvd24pIGFwcGVuZGl4LnJlYWRlcl9tYXJrZG93biA9IHJlYWRlck1hcmtkb3duO1xuXG4gIHJldHVybiB7IGFwcGVuZGl4IH0gYXMgQW55UmVjb3JkO1xufVxuXG5leHBvcnQgY29uc3QgcmVuZGVyTWlycm9yID0gcmVuZGVyU2hhcmVhYmxlTWlycm9yO1xuZXhwb3J0IGRlZmF1bHQgcmVuZGVyU2hhcmVhYmxlTWlycm9yO1xuIl0sIm5hbWVzIjpbInRyeUxvYWRGb3JtYXR0ZXIiLCJtb2QiLCJmbiIsImRlZmF1bHQiLCJjcmVhdGVNYXJrZG93blJlYWRpbmdFbmhhbmNlZCIsImNyZWF0ZV9tYXJrZG93bl9yZWFkaW5nX2VuaGFuY2VkIiwicmVuZGVyIiwiZm9ybWF0IiwidXNlZCIsIm5vcm1hbGl6ZU1hcmtkb3duT3V0cHV0IiwicmVzIiwibWFya2Rvd24iLCJ0ZXh0IiwiY29udGVudCIsInJlbmRlclNoYXJlYWJsZU1pcnJvciIsImdlbyIsInByb3YiLCJvcHRpb25zIiwicmVhZGVyTWFya2Rvd24iLCJjdHgiLCJhcHBlbmRpeCIsInJlbmRlcmVyIiwiZm9ybWF0dGVyX21vZHVsZSIsInNvdXJjZSIsImVjaG9lZF9hc3BlY3RzIiwiQXJyYXkiLCJpc0FycmF5IiwiYXNwZWN0cyIsImxlbmd0aCIsInJlYWRlcl9tYXJrZG93biIsInJlbmRlck1pcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/raven/render.ts\n");

/***/ })

};
;