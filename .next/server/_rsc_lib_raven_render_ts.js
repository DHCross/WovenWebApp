"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_raven_render_ts";
exports.ids = ["_rsc_lib_raven_render_ts"];
exports.modules = {

/***/ "(rsc)/./lib/raven/render.ts":
/*!*****************************!*\
  !*** ./lib/raven/render.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   renderMirror: () => (/* binding */ renderMirror),\n/* harmony export */   renderShareableMirror: () => (/* binding */ renderShareableMirror)\n/* harmony export */ });\n// Lightweight stub for Raven renderer.\n// Exists to satisfy build-time resolution when the full Raven module\n// is not bundled in this environment. The Poetic Brain pipeline will\n// merge this output with its local fallback so required fields remain\n// populated.\nasync function tryLoadFormatter() {\n    try {\n        // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n        const mod = await __webpack_require__.e(/*! import() */ \"_rsc_src_formatter_create_markdown_reading_enhanced_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/src/formatter/create_markdown_reading_enhanced.js */ \"(rsc)/./src/formatter/create_markdown_reading_enhanced.js\"));\n        const fn = typeof mod?.default === \"function\" && mod.default || typeof mod?.createMarkdownReadingEnhanced === \"function\" && mod.createMarkdownReadingEnhanced || typeof mod?.create_markdown_reading_enhanced === \"function\" && mod.create_markdown_reading_enhanced || typeof mod?.render === \"function\" && mod.render || typeof mod?.format === \"function\" && mod.format || null;\n        if (fn) return {\n            mod,\n            used: \"@/src/formatter/create_markdown_reading_enhanced.js\",\n            fn\n        };\n    } catch  {\n    // formatter not present; caller will fall back\n    }\n    return {\n        mod: null,\n        used: null,\n        fn: null\n    };\n}\nfunction normalizeMarkdownOutput(res) {\n    if (!res) return null;\n    if (typeof res === \"string\") return res;\n    if (typeof res === \"object\") {\n        if (typeof res.markdown === \"string\") return res.markdown;\n        if (typeof res.text === \"string\") return res.text;\n        if (typeof res.content === \"string\") return res.content;\n    }\n    return null;\n}\nasync function renderShareableMirror({ geo, prov, options }) {\n    // Attempt to route to the enhanced markdown formatter. If unavailable,\n    // fall back to a minimal appendix only; upstream will merge with local draft.\n    const { fn, used } = await tryLoadFormatter();\n    let readerMarkdown = null;\n    if (fn) {\n        try {\n            const ctx = {\n                geo,\n                prov: prov ?? {},\n                options: options ?? {}\n            };\n            const res = await fn(ctx);\n            readerMarkdown = normalizeMarkdownOutput(res);\n        } catch  {\n            // ignore formatter errors; keep fallback\n            readerMarkdown = null;\n        }\n    }\n    const appendix = {\n        renderer: fn ? \"raven-markdown-formatter\" : \"raven-stub\",\n        formatter_module: used,\n        prov: prov ?? {\n            source: \"raven-stub\"\n        },\n        options: options ?? {},\n        echoed_aspects: Array.isArray(geo?.aspects) ? geo.aspects.length : 0\n    };\n    if (readerMarkdown) appendix.reader_markdown = readerMarkdown;\n    return {\n        appendix\n    };\n}\nconst renderMirror = renderShareableMirror;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (renderShareableMirror);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF2ZW4vcmVuZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHVDQUF1QztBQUN2QyxxRUFBcUU7QUFDckUscUVBQXFFO0FBQ3JFLHNFQUFzRTtBQUN0RSxhQUFhO0FBSWIsZUFBZUE7SUFLYixJQUFJO1FBQ0Ysc0VBQXNFO1FBQ3RFLE1BQU1DLE1BQWlCLE1BQU0sMlFBQU87UUFDcEMsTUFBTUMsS0FDSixPQUFRRCxLQUFLRSxZQUFZLGNBQWNGLElBQUlFLE9BQU8sSUFDakQsT0FBT0YsS0FBS0csa0NBQWtDLGNBQWNILElBQUlHLDZCQUE2QixJQUM3RixPQUFPSCxLQUFLSSxxQ0FBcUMsY0FBY0osSUFBSUksZ0NBQWdDLElBQ25HLE9BQU9KLEtBQUtLLFdBQVcsY0FBY0wsSUFBSUssTUFBTSxJQUMvQyxPQUFPTCxLQUFLTSxXQUFXLGNBQWNOLElBQUlNLE1BQU0sSUFDaEQ7UUFDRixJQUFJTCxJQUFJLE9BQU87WUFBRUQ7WUFBS08sTUFBTTtZQUF1RE47UUFBRztJQUN4RixFQUFFLE9BQU07SUFDTiwrQ0FBK0M7SUFDakQ7SUFDQSxPQUFPO1FBQUVELEtBQUs7UUFBTU8sTUFBTTtRQUFNTixJQUFJO0lBQUs7QUFDM0M7QUFFQSxTQUFTTyx3QkFBd0JDLEdBQVE7SUFDdkMsSUFBSSxDQUFDQSxLQUFLLE9BQU87SUFDakIsSUFBSSxPQUFPQSxRQUFRLFVBQVUsT0FBT0E7SUFDcEMsSUFBSSxPQUFPQSxRQUFRLFVBQVU7UUFDM0IsSUFBSSxPQUFPQSxJQUFJQyxRQUFRLEtBQUssVUFBVSxPQUFPRCxJQUFJQyxRQUFRO1FBQ3pELElBQUksT0FBT0QsSUFBSUUsSUFBSSxLQUFLLFVBQVUsT0FBT0YsSUFBSUUsSUFBSTtRQUNqRCxJQUFJLE9BQU9GLElBQUlHLE9BQU8sS0FBSyxVQUFVLE9BQU9ILElBQUlHLE9BQU87SUFDekQ7SUFDQSxPQUFPO0FBQ1Q7QUFFTyxlQUFlQyxzQkFBc0IsRUFDMUNDLEdBQUcsRUFDSEMsSUFBSSxFQUNKQyxPQUFPLEVBS1I7SUFDQyx1RUFBdUU7SUFDdkUsOEVBQThFO0lBQzlFLE1BQU0sRUFBRWYsRUFBRSxFQUFFTSxJQUFJLEVBQUUsR0FBRyxNQUFNUjtJQUMzQixJQUFJa0IsaUJBQWdDO0lBQ3BDLElBQUloQixJQUFJO1FBQ04sSUFBSTtZQUNGLE1BQU1pQixNQUFNO2dCQUFFSjtnQkFBS0MsTUFBTUEsUUFBUSxDQUFDO2dCQUFHQyxTQUFTQSxXQUFXLENBQUM7WUFBRTtZQUM1RCxNQUFNUCxNQUFNLE1BQU1SLEdBQUdpQjtZQUNyQkQsaUJBQWlCVCx3QkFBd0JDO1FBQzNDLEVBQUUsT0FBTTtZQUNOLHlDQUF5QztZQUN6Q1EsaUJBQWlCO1FBQ25CO0lBQ0Y7SUFFQSxNQUFNRSxXQUFzQjtRQUMxQkMsVUFBVW5CLEtBQUssNkJBQTZCO1FBQzVDb0Isa0JBQWtCZDtRQUNsQlEsTUFBTUEsUUFBUTtZQUFFTyxRQUFRO1FBQWE7UUFDckNOLFNBQVNBLFdBQVcsQ0FBQztRQUNyQk8sZ0JBQWdCQyxNQUFNQyxPQUFPLENBQUNYLEtBQUtZLFdBQVdaLElBQUlZLE9BQU8sQ0FBQ0MsTUFBTSxHQUFHO0lBQ3JFO0lBQ0EsSUFBSVYsZ0JBQWdCRSxTQUFTUyxlQUFlLEdBQUdYO0lBRS9DLE9BQU87UUFBRUU7SUFBUztBQUNwQjtBQUVPLE1BQU1VLGVBQWVoQixzQkFBc0I7QUFDbEQsaUVBQWVBLHFCQUFxQkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dvdmVuLXdlYi1hcHAvLi9saWIvcmF2ZW4vcmVuZGVyLnRzPzFkM2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTGlnaHR3ZWlnaHQgc3R1YiBmb3IgUmF2ZW4gcmVuZGVyZXIuXG4vLyBFeGlzdHMgdG8gc2F0aXNmeSBidWlsZC10aW1lIHJlc29sdXRpb24gd2hlbiB0aGUgZnVsbCBSYXZlbiBtb2R1bGVcbi8vIGlzIG5vdCBidW5kbGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIFRoZSBQb2V0aWMgQnJhaW4gcGlwZWxpbmUgd2lsbFxuLy8gbWVyZ2UgdGhpcyBvdXRwdXQgd2l0aCBpdHMgbG9jYWwgZmFsbGJhY2sgc28gcmVxdWlyZWQgZmllbGRzIHJlbWFpblxuLy8gcG9wdWxhdGVkLlxuXG50eXBlIEFueVJlY29yZCA9IFJlY29yZDxzdHJpbmcsIGFueT47XG5cbmFzeW5jIGZ1bmN0aW9uIHRyeUxvYWRGb3JtYXR0ZXIoKTogUHJvbWlzZTx7XG4gIG1vZDogQW55UmVjb3JkIHwgbnVsbDtcbiAgdXNlZDogc3RyaW5nIHwgbnVsbDtcbiAgZm46ICgoY3R4OiBBbnlSZWNvcmQpID0+IFByb21pc2U8YW55PiB8IGFueSkgfCBudWxsO1xufT4ge1xuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWltcG9ydHNcbiAgICBjb25zdCBtb2Q6IEFueVJlY29yZCA9IGF3YWl0IGltcG9ydCgnQC9zcmMvZm9ybWF0dGVyL2NyZWF0ZV9tYXJrZG93bl9yZWFkaW5nX2VuaGFuY2VkLmpzJyk7XG4gICAgY29uc3QgZm4gPVxuICAgICAgKHR5cGVvZiBtb2Q/LmRlZmF1bHQgPT09ICdmdW5jdGlvbicgJiYgbW9kLmRlZmF1bHQpIHx8XG4gICAgICAodHlwZW9mIG1vZD8uY3JlYXRlTWFya2Rvd25SZWFkaW5nRW5oYW5jZWQgPT09ICdmdW5jdGlvbicgJiYgbW9kLmNyZWF0ZU1hcmtkb3duUmVhZGluZ0VuaGFuY2VkKSB8fFxuICAgICAgKHR5cGVvZiBtb2Q/LmNyZWF0ZV9tYXJrZG93bl9yZWFkaW5nX2VuaGFuY2VkID09PSAnZnVuY3Rpb24nICYmIG1vZC5jcmVhdGVfbWFya2Rvd25fcmVhZGluZ19lbmhhbmNlZCkgfHxcbiAgICAgICh0eXBlb2YgbW9kPy5yZW5kZXIgPT09ICdmdW5jdGlvbicgJiYgbW9kLnJlbmRlcikgfHxcbiAgICAgICh0eXBlb2YgbW9kPy5mb3JtYXQgPT09ICdmdW5jdGlvbicgJiYgbW9kLmZvcm1hdCkgfHxcbiAgICAgIG51bGw7XG4gICAgaWYgKGZuKSByZXR1cm4geyBtb2QsIHVzZWQ6ICdAL3NyYy9mb3JtYXR0ZXIvY3JlYXRlX21hcmtkb3duX3JlYWRpbmdfZW5oYW5jZWQuanMnLCBmbiB9O1xuICB9IGNhdGNoIHtcbiAgICAvLyBmb3JtYXR0ZXIgbm90IHByZXNlbnQ7IGNhbGxlciB3aWxsIGZhbGwgYmFja1xuICB9XG4gIHJldHVybiB7IG1vZDogbnVsbCwgdXNlZDogbnVsbCwgZm46IG51bGwgfTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTWFya2Rvd25PdXRwdXQocmVzOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFyZXMpIHJldHVybiBudWxsO1xuICBpZiAodHlwZW9mIHJlcyA9PT0gJ3N0cmluZycpIHJldHVybiByZXM7XG4gIGlmICh0eXBlb2YgcmVzID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh0eXBlb2YgcmVzLm1hcmtkb3duID09PSAnc3RyaW5nJykgcmV0dXJuIHJlcy5tYXJrZG93bjtcbiAgICBpZiAodHlwZW9mIHJlcy50ZXh0ID09PSAnc3RyaW5nJykgcmV0dXJuIHJlcy50ZXh0O1xuICAgIGlmICh0eXBlb2YgcmVzLmNvbnRlbnQgPT09ICdzdHJpbmcnKSByZXR1cm4gcmVzLmNvbnRlbnQ7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJTaGFyZWFibGVNaXJyb3Ioe1xuICBnZW8sXG4gIHByb3YsXG4gIG9wdGlvbnMsXG59OiB7XG4gIGdlbzogQW55UmVjb3JkO1xuICBwcm92PzogQW55UmVjb3JkO1xuICBvcHRpb25zPzogQW55UmVjb3JkO1xufSk6IFByb21pc2U8QW55UmVjb3JkPiB7XG4gIC8vIEF0dGVtcHQgdG8gcm91dGUgdG8gdGhlIGVuaGFuY2VkIG1hcmtkb3duIGZvcm1hdHRlci4gSWYgdW5hdmFpbGFibGUsXG4gIC8vIGZhbGwgYmFjayB0byBhIG1pbmltYWwgYXBwZW5kaXggb25seTsgdXBzdHJlYW0gd2lsbCBtZXJnZSB3aXRoIGxvY2FsIGRyYWZ0LlxuICBjb25zdCB7IGZuLCB1c2VkIH0gPSBhd2FpdCB0cnlMb2FkRm9ybWF0dGVyKCk7XG4gIGxldCByZWFkZXJNYXJrZG93bjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIGlmIChmbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdHggPSB7IGdlbywgcHJvdjogcHJvdiA/PyB7fSwgb3B0aW9uczogb3B0aW9ucyA/PyB7fSB9O1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZm4oY3R4KTtcbiAgICAgIHJlYWRlck1hcmtkb3duID0gbm9ybWFsaXplTWFya2Rvd25PdXRwdXQocmVzKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGlnbm9yZSBmb3JtYXR0ZXIgZXJyb3JzOyBrZWVwIGZhbGxiYWNrXG4gICAgICByZWFkZXJNYXJrZG93biA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYXBwZW5kaXg6IEFueVJlY29yZCA9IHtcbiAgICByZW5kZXJlcjogZm4gPyAncmF2ZW4tbWFya2Rvd24tZm9ybWF0dGVyJyA6ICdyYXZlbi1zdHViJyxcbiAgICBmb3JtYXR0ZXJfbW9kdWxlOiB1c2VkLFxuICAgIHByb3Y6IHByb3YgPz8geyBzb3VyY2U6ICdyYXZlbi1zdHViJyB9LFxuICAgIG9wdGlvbnM6IG9wdGlvbnMgPz8ge30sXG4gICAgZWNob2VkX2FzcGVjdHM6IEFycmF5LmlzQXJyYXkoZ2VvPy5hc3BlY3RzKSA/IGdlby5hc3BlY3RzLmxlbmd0aCA6IDAsXG4gIH07XG4gIGlmIChyZWFkZXJNYXJrZG93bikgYXBwZW5kaXgucmVhZGVyX21hcmtkb3duID0gcmVhZGVyTWFya2Rvd247XG5cbiAgcmV0dXJuIHsgYXBwZW5kaXggfSBhcyBBbnlSZWNvcmQ7XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJNaXJyb3IgPSByZW5kZXJTaGFyZWFibGVNaXJyb3I7XG5leHBvcnQgZGVmYXVsdCByZW5kZXJTaGFyZWFibGVNaXJyb3I7XG4iXSwibmFtZXMiOlsidHJ5TG9hZEZvcm1hdHRlciIsIm1vZCIsImZuIiwiZGVmYXVsdCIsImNyZWF0ZU1hcmtkb3duUmVhZGluZ0VuaGFuY2VkIiwiY3JlYXRlX21hcmtkb3duX3JlYWRpbmdfZW5oYW5jZWQiLCJyZW5kZXIiLCJmb3JtYXQiLCJ1c2VkIiwibm9ybWFsaXplTWFya2Rvd25PdXRwdXQiLCJyZXMiLCJtYXJrZG93biIsInRleHQiLCJjb250ZW50IiwicmVuZGVyU2hhcmVhYmxlTWlycm9yIiwiZ2VvIiwicHJvdiIsIm9wdGlvbnMiLCJyZWFkZXJNYXJrZG93biIsImN0eCIsImFwcGVuZGl4IiwicmVuZGVyZXIiLCJmb3JtYXR0ZXJfbW9kdWxlIiwic291cmNlIiwiZWNob2VkX2FzcGVjdHMiLCJBcnJheSIsImlzQXJyYXkiLCJhc3BlY3RzIiwibGVuZ3RoIiwicmVhZGVyX21hcmtkb3duIiwicmVuZGVyTWlycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/raven/render.ts\n");

/***/ })

};
;