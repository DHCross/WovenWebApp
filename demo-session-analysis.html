<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raven Session Summary Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }
        
        .demo-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 12px;
        }
        
        .score-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .score-item {
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .score-number {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .score-label {
            font-size: 0.75rem;
            color: #64748b;
        }
        
        .wb { color: #059669; }
        .abe { color: #d97706; }
        .osr { color: #dc2626; }
        
        .fidelity-band {
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .fidelity-high {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }
        
        .fidelity-mixed {
            background: #fef3c7;
            color: #92400e;
            border: 2px solid #f59e0b;
        }
        
        .fidelity-low {
            background: #fee2e2;
            color: #991b1b;
            border: 2px solid #ef4444;
        }
        
        .fidelity-percentage {
            font-size: 1.75rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .fidelity-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        .resonant-patterns {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
            margin-bottom: 16px;
        }
        
        .pattern-item {
            font-style: italic;
            color: #475569;
            font-size: 0.875rem;
            margin-bottom: 8px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #6366f1;
        }
        
        .actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #6366f1;
            color: white;
        }
        
        .btn-secondary {
            background: #8b5cf6;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 16px;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            color: white;
            padding: 24px;
            border-radius: 16px 16px 0 0;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .modal-subtitle {
            opacity: 0.9;
            font-size: 0.875rem;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .narrative {
            line-height: 1.8;
            color: #374151;
            margin-bottom: 24px;
        }
        
        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            background: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .metadata-item {
            font-size: 0.875rem;
        }
        
        .metadata-label {
            color: #64748b;
            margin-bottom: 4px;
        }
        
        .metadata-value {
            font-weight: 600;
            color: #1a202c;
        }
        
        .pattern-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }
        
        .pattern-tag {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 16px;
            padding: 4px 12px;
            font-size: 0.75rem;
            color: #374151;
        }
        
        .modal-footer {
            background: #f8fafc;
            padding: 16px 24px;
            border-radius: 0 0 16px 16px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
            float: right;
        }
        
        h1 {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            text-align: center;
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .modal-content {
                margin: 20px;
                max-width: calc(100% - 40px);
            }
        }
    </style>
</head>
<body>
    <h1>üîÆ Raven Session Analysis</h1>
    <p class="subtitle">Enhanced SST Validation with Resonance Fidelity & Journal Generation</p>
    
    <div class="container">
        <!-- High Fidelity Example -->
        <div class="demo-card">
            <h2 class="card-title">High Resonance Session (84%)</h2>
            
            <div class="score-grid">
                <div class="score-item">
                    <div class="score-number wb">‚úÖ 8</div>
                    <div class="score-label">Within Boundary</div>
                </div>
                <div class="score-item">
                    <div class="score-number abe">üü° 3</div>
                    <div class="score-label">At Boundary Edge</div>
                </div>
                <div class="score-item">
                    <div class="score-number osr">‚ùå 1</div>
                    <div class="score-label">Outside Range</div>
                </div>
            </div>
            
            <div class="fidelity-band fidelity-high">
                <div class="fidelity-percentage">Resonance Fidelity: 84%</div>
                <div class="fidelity-label">Strong Harmonic Alignment</div>
            </div>
            
            <div class="resonant-patterns">
                <h4 style="margin-top: 0; color: #6366f1;">What Resonated:</h4>
                <div class="pattern-item">"I tend to process emotions through creative expression"</div>
                <div class="pattern-item">"When stressed, I need quiet space to recharge"</div>
                <div class="pattern-item">"I see patterns others miss, especially in relationships"</div>
            </div>
            
            <div style="text-align: center; color: #6366f1; font-weight: 600; margin-bottom: 16px;">
                Pattern Guess: Intuitive Synthesizer
            </div>
            
            <div class="actions">
                <button class="btn btn-primary" onclick="endReading('high')">End Reading</button>
                <button class="btn btn-secondary" onclick="generateJournal('high')">üìñ Generate Journal</button>
            </div>
        </div>
        
        <!-- Mixed Fidelity Example -->
        <div class="demo-card">
            <h2 class="card-title">Mixed Resonance Session (57%)</h2>
            
            <div class="score-grid">
                <div class="score-item">
                    <div class="score-number wb">‚úÖ 3</div>
                    <div class="score-label">Within Boundary</div>
                </div>
                <div class="score-item">
                    <div class="score-number abe">üü° 2</div>
                    <div class="score-label">At Boundary Edge</div>
                </div>
                <div class="score-item">
                    <div class="score-number osr">‚ùå 2</div>
                    <div class="score-label">Outside Range</div>
                </div>
            </div>
            
            <div class="fidelity-band fidelity-mixed">
                <div class="fidelity-percentage">Resonance Fidelity: 57%</div>
                <div class="fidelity-label">Balanced Recognition</div>
            </div>
            
            <div class="resonant-patterns">
                <h4 style="margin-top: 0; color: #6366f1;">What Resonated:</h4>
                <div class="pattern-item">"I overthink when stressed and analyze outcomes"</div>
                <div class="pattern-item">"I prefer having clear plans and structure"</div>
                <div class="pattern-item">"I naturally organize and coordinate groups"</div>
            </div>
            
            <div style="text-align: center; color: #6366f1; font-weight: 600; margin-bottom: 16px;">
                Pattern Guess: Methodical Coordinator
            </div>
            
            <div class="actions">
                <button class="btn btn-primary" onclick="endReading('mixed')">End Reading</button>
                <button class="btn btn-secondary" onclick="generateJournal('mixed')">üìñ Generate Journal</button>
            </div>
        </div>
    </div>
    
    <!-- Journal Modal -->
    <div id="journalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-btn" onclick="closeJournal()">&times;</button>
                <div class="modal-title" id="journalTitle">Raven Reading Session - Alex</div>
                <div class="modal-subtitle" id="journalDate">December 15, 2024</div>
            </div>
            <div class="modal-body">
                <div class="narrative" id="journalNarrative">
                    <!-- Narrative content will be inserted here -->
                </div>
                <div class="metadata-grid">
                    <div class="metadata-item">
                        <div class="metadata-label">Total Interactions:</div>
                        <div class="metadata-value" id="totalInteractions">12</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Resonance Fidelity:</div>
                        <div class="metadata-value" id="resonanceFidelity">84%</div>
                    </div>
                </div>
                <div class="pattern-tags" id="patternTags">
                    <!-- Pattern tags will be inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" style="background: #64748b; color: white;" onclick="closeJournal()">Close</button>
                <button class="btn btn-secondary" onclick="copyJournal()">üìã Copy to Clipboard</button>
            </div>
        </div>
    </div>
    
    <script>
        const journalData = {
            high: {
                title: "Raven Reading Session - Alex",
                narrative: "On this session, Alex sat with Raven to explore the patterns written in their chart. The conversation flowed with remarkable alignment‚ÄîRaven's mirrors consistently landed true, with Alex recognizing themselves clearly in 84% of the reflections offered. What rang most true were insights around processing emotions through creative expression, and the need for quiet space when stressed. Throughout the dialogue, Alex's intuitive gifts for pattern recognition became increasingly apparent, especially in relational dynamics. By session's end, the tentative pattern emerging was \"Intuitive Synthesizer\"‚Äîthough Alex, as always, remained the final validator of what felt true.",
                totalInteractions: 12,
                resonanceFidelity: 84,
                patterns: ["Creative emotional processing", "Need for quiet recharge", "Pattern recognition in relationships"]
            },
            mixed: {
                title: "Raven Reading Session - Sarah",
                narrative: "On this session, Sarah sat with Raven to explore the patterns written in their chart. The dialogue wove between recognition and clarification, with Sarah finding 57% resonance as they and Raven navigated the more complex territories of their pattern. What rang most true were insights around overthinking when stressed and the natural tendency to organize and coordinate. Several of Raven's initial offerings required gentle probing to understand whether the patterns were inverted, off-tone, or simply outside Sarah's field altogether. By session's end, the tentative pattern emerging was \"Methodical Coordinator\"‚Äîthough Sarah, as always, remained the final validator of what felt true.",
                totalInteractions: 7,
                resonanceFidelity: 57,
                patterns: ["Stress-induced overthinking", "Preference for structure", "Natural coordination skills"]
            }
        };
        
        function endReading(type) {
            alert(`Session ended! This would typically trigger the wrap-up sequence and prepare for journal generation.`);
        }
        
        function generateJournal(type) {
            const data = journalData[type];
            document.getElementById('journalTitle').textContent = data.title;
            document.getElementById('journalDate').textContent = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('journalNarrative').textContent = data.narrative;
            document.getElementById('totalInteractions').textContent = data.totalInteractions;
            document.getElementById('resonanceFidelity').textContent = data.resonanceFidelity + '%';
            
            const patternTags = document.getElementById('patternTags');
            patternTags.innerHTML = '';
            data.patterns.forEach(pattern => {
                const tag = document.createElement('span');
                tag.className = 'pattern-tag';
                tag.textContent = pattern;
                patternTags.appendChild(tag);
            });
            
            document.getElementById('journalModal').style.display = 'block';
        }
        
        function closeJournal() {
            document.getElementById('journalModal').style.display = 'none';
        }
        
        function copyJournal() {
            const title = document.getElementById('journalTitle').textContent;
            const narrative = document.getElementById('journalNarrative').textContent;
            const date = document.getElementById('journalDate').textContent;
            const interactions = document.getElementById('totalInteractions').textContent;
            const fidelity = document.getElementById('resonanceFidelity').textContent;
            const patterns = Array.from(document.querySelectorAll('.pattern-tag')).map(tag => tag.textContent).join(', ');
            
            const fullText = `${title}

${narrative}

---
Session Details:
Date: ${date}
Total Interactions: ${interactions}
Resonance Fidelity: ${fidelity}
Primary Patterns: ${patterns}`;
            
            navigator.clipboard.writeText(fullText).then(() => {
                alert('Journal entry copied to clipboard!');
            });
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('journalModal');
            if (event.target === modal) {
                closeJournal();
            }
        }
    </script>
</body>
</html>
