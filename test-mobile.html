<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Test - Woven Map</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a202c;
            color: white;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #4a5568;
            border-radius: 8px;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #374151;
            color: white;
            border: 1px solid #4b5563;
            border-radius: 6px;
            font-size: 16px;
        }
        button {
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #2d3748;
            border-radius: 6px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Mobile Compatibility Test</h1>
    
    <div class="test-section">
        <h2>Device Information</h2>
        <div id="deviceInfo" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>Date Input Test</h2>
        <label for="testDate">Birth Date:</label>
        <input type="date" id="testDate" value="1973-07-24">
        <button onclick="testDateInput()">Test Date Value</button>
        <div id="dateResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>Form Data Collection Test</h2>
        <input type="text" id="name" placeholder="Name" value="Test User">
        <input type="date" id="birthDate" placeholder="Birth Date" value="1973-07-24">
        <input type="time" id="birthTime" placeholder="Birth Time" value="14:30">
        <input type="text" id="coordinates" placeholder="Coordinates" value="40.01, -75.31">
        <button onclick="testFormCollection()">Test Form Collection</button>
        <div id="formResult" class="result"></div>
    </div>

    <script>
        // Display device information
        function displayDeviceInfo() {
            const info = {
                userAgent: navigator.userAgent,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                viewportWidth: window.innerWidth,
                viewportHeight: window.innerHeight,
                pixelRatio: window.devicePixelRatio,
                isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
                isTouch: 'ontouchstart' in window
            };
            
            document.getElementById('deviceInfo').textContent = JSON.stringify(info, null, 2);
        }
        
        // Test date input functionality
        function testDateInput() {
            const dateInput = document.getElementById('testDate');
            const result = {
                value: dateInput.value,
                type: dateInput.type,
                validity: dateInput.validity,
                validationMessage: dateInput.validationMessage,
                formatTest: /^\d{4}-\d{2}-\d{2}$/.test(dateInput.value)
            };
            
            document.getElementById('dateResult').textContent = JSON.stringify(result, null, 2);
        }
        
        // Test form data collection
        function testFormCollection() {
            const formData = {
                name: document.getElementById('name').value.trim(),
                birthDate: document.getElementById('birthDate').value.trim(),
                birthTime: document.getElementById('birthTime').value.trim(),
                coordinates: document.getElementById('coordinates').value.trim()
            };
            
            // Test date parsing
            let dateParseResult = null;
            if (formData.birthDate) {
                try {
                    const [year, month, day] = formData.birthDate.split('-').map(Number);
                    dateParseResult = { year, month, day, valid: !isNaN(year) && !isNaN(month) && !isNaN(day) };
                } catch (error) {
                    dateParseResult = { error: error.message };
                }
            }
            
            // Test time parsing
            let timeParseResult = null;
            if (formData.birthTime) {
                try {
                    const [hour, minute] = formData.birthTime.split(':').map(Number);
                    timeParseResult = { hour, minute, valid: !isNaN(hour) && !isNaN(minute) };
                } catch (error) {
                    timeParseResult = { error: error.message };
                }
            }
            
            const result = {
                formData,
                dateParseResult,
                timeParseResult,
                validation: {
                    allFieldsFilled: Object.values(formData).every(v => v !== ''),
                    dateFormat: /^\d{4}-\d{2}-\d{2}$/.test(formData.birthDate),
                    timeFormat: /^\d{2}:\d{2}$/.test(formData.birthTime)
                }
            };
            
            document.getElementById('formResult').textContent = JSON.stringify(result, null, 2);
        }
        
        // Initialize on page load
        window.addEventListener('load', function() {
            displayDeviceInfo();
            
            // Auto-test on mobile
            setTimeout(() => {
                testDateInput();
                testFormCollection();
            }, 1000);
        });
        
        // Update viewport info on resize
        window.addEventListener('resize', displayDeviceInfo);
    </script>
</body>
</html>