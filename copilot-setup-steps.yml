name: Copilot Setup Steps

steps:
  - name: Use Node 18.x
    uses: actions/setup-node@v4
    with:
      node-version: '18.x'
      cache: npm

  - name: Install dependencies
    run: npm ci

  - name: Generate Prisma client (if schema present)
    run: |
      if [ -f prisma/schema.prisma ]; then
        npx prisma generate
      fi

  - name: Build CSS
    run: npm run build:css

  - name: Run unit tests
    run: npm run test -- --watch=false
