# Diagnostic Integrity Protocol Integration

**Version:** 1.0
**Date:** January 2025
**Status:** ✅ Implemented

## Overview

This document describes the integration of three critical diagnostic frameworks into the Poetic Brain system:

1. **Diagnostic Integrity Protocol** - Differentiating Shadow, Inversion, and Signal Void
2. **Shadow Layer Discernment** - Framework for identifying unintegrated archetypal patterns
3. **Tool vs. Person Distinction** - Preventing determinism in chart interpretation

These frameworks ensure diagnostic rigor, preserve falsifiability, and maintain ethical application of the Woven Map system.

---

## Core Concepts

### The Three Critical Diagnostic States

#### 1. Translatable Shadow (WB - Within Boundary)

**Definition:** Predictable negative expression of an archetype that remains within expected archetypal range.

**Mechanism:** The system operates inefficiently or under duress, but the core organizing principle remains intact.

**Example:**
- Leo archetype acting as an arrogant tyrant is still expressing recognizable leadership drive
- This is a system playing off-key, not playing a different song

**SST Classification:** WB (Within Boundary)

#### 2. Symbolic Inversion (ABE - At Boundary Edge subtype)

**Definition:** Archetypal function weaponized to produce its opposite. A "broken compass."

**Mechanism:** Not merely poor operation—this is systemic collapse where gifts are used for self-sabotage or destruction of others.

**Examples:**
- Tropical Libra (Visionary of Harmony) using fairness logic to architect cruelty
- Sidereal Virgo (King with Sacred Duty to Order) using strategic precision to engineer annihilation of own lineage
- The case of David: potential for perfectly ordered harmonious systems inverted to destruction of order

**SST Classification:** ABE (At Boundary Edge)

**Critical Note:** This is the territory failing to align with its own highest potential, not a failure of the map.

#### 3. Signal Void (OSR - Outside Symbolic Range)

**Definition:** Complete lack of discernible resonance between map and territory.

**Mechanism:** This is NOT a diagnosis of the territory but an honest report of map failure. A "non-ping."

**Common Cause:** O-Integration - successful transcendence of previously active patterns.

**Example:**
- Peter case study: Tropical reading yielded OSR because he had integrated and transcended those patterns
- Patterns became "operationally silent but symbolically traceable"
- The OSR was confirmation of his growth, not his failure

**SST Classification:** OSR (Outside Symbolic Range)

---

## Shadow Layer Discernment Framework

### Three-Step Diagnostic Procedure

#### Step 1: Identify Structural Tensions (MAP Layer)

Shadow potential concentrates where geometric tension is structurally embedded.

**Priority Markers:**
- Hard aspects (squares, oppositions, challenging conjunctions) with tight orbs (≤3°)
- Saturn placements (rigidity, fear, critical inner voice)
- Pluto placements (control, manipulation, power dynamics)
- Neptune placements (distortion, escapism, unclear perception)
- Chiron placements (wound/healing dynamics)

**Secondary Flags:**
- 8th house placements (transformation, crisis, shared resources)
- 12th house placements (hidden, unconscious, self-undoing)
- Retrograde personal planets
- Anaretic degrees (29°)

#### Step 2: Articulate Shadow Hypothesis

Compress identified tensions into testable hypothesis of internal conflict.

**Classification:**
- **WB (Translatable Shadow):** Predictable negative expression, core organizing principle intact
- **ABE (Symbolic Inversion):** Paradoxical expression, gifts weaponized against self

**Critical Constraint:** NEVER diagnose without observed behavioral confirmation from FIELD.

The Behavior-First Rule is inviolable.

#### Step 3: Translate to Socratic Inquiry (VOICE Layer)

Convert structural hypothesis into emotionally resonant, open-ended question.

**Requirements:**
- Bypass intellectual defenses
- Evoke somatic recognition
- Deploy ONLY after corresponding behavior is observed
- Must be "so precise it couldn't fit anyone else, yet so open they can step in and claim it"

**Example:**
- Structural pattern: Chiron in Aries, 8th House (Wounded Warrior in the Deep)
- Inquiry: "What part of you keeps breaking things down because it doesn't trust anything to hold?"

### Integration Tracking

**Measure of Success:** "What stops triggering."

When a previously identified tension point ceases to provoke reactive response under relevant transit, the pattern is deemed **O-Integration**.

**Reclassification:**
- Pattern moves from WB/ABE → OSR
- Status: "Operationally silent but symbolically traceable"
- This deliberate capacity to acknowledge "non-pings" safeguards against confirmation bias

---

## Enhanced Matrix (144 Archetypes)

### Dual-Lens Framework

The system combines:
- **Tropical Sun** (Ego Grammar) - immediate personality-level operating system
- **Sidereal Sun** (Structural Mirror) - deeper soul-level architecture

This creates 144 complex, layered archetypes (12 × 12).

### Lens Rotation Doctrine (LRD-1)

**Trigger Conditions:**
- Tropical lens yields friction
- Tropical lens yields OSR (signal void)

**Action:**
- Shift to Sidereal chart as secondary diagnostic lens
- Check for O-Integration (conscious work rendering egoic patterns silent)

**Purpose:**
- Tropical maps "what you're working with now"
- Sidereal maps "what you're built on"
- O-Integration reveals when surface patterns have been transcended

### Diagnostic States in the Matrix

#### Translatable Shadow (WB)
Both Tropical AND Sidereal archetypes express in predictable negative forms.

**Example:** Tropical Leo / Sidereal Cancer
- Shadow Leo: Arrogant attention-seeking tyrant
- Shadow Cancer: Emotionally manipulative, clannish, unable to let go
- Both behaviors are negative but direct, translatable expressions

#### Symbolic Inversion (ABE)
One or both archetypes weaponize gifts to produce opposite.

**Example:** Tropical Libra / Sidereal Virgo (David case)
- Potential: Visionary of harmonious, perfectly ordered systems
- Inversion: Logic of fairness (Libra) + meticulous precision (Virgo) → architect of cruelty and destruction of order
- Core purpose of BOTH Ego Grammar and Structural Mirror inverted

#### Signal Void (OSR)
Non-ping on BOTH Tropical AND Sidereal lenses.

**Significance:**
- Rare and significant event
- Indicates map failure OR profound integration
- Requires explicit acknowledgment and investigation

**Example:** Tropical Scorpio / Sidereal Libra
- No trace of intensity/depth/strategy (Scorpio)
- No trace of diplomacy/aesthetics/relational focus (Libra)
- Core dual-archetype failing to describe territory
- Signals limit of system or truly unique unmapped configuration

---

## Tool vs. Person Distinction

### Core Principle

**The chart describes the INSTRUMENT, not the MUSICIAN.**

When Raven Calder says "brilliant strategic tool," this refers to:
- ✅ The geometric elegance of the symbolic pattern
- ✅ The archetypal design of the tool you were given
- ❌ Your inherent worth or intelligence
- ❌ Guaranteed outcomes or behaviors
- ❌ Fixed personality traits

### The Stradivarius Principle

A brilliantly crafted violin (the chart) will:
- Produce screeching sounds in the hands of a novice
- Sing beautifully in the hands of a master

The instrument's potential is constant; its expression is variable.

### Variable Expression Factors

How a tool manifests depends on:
- **Inherited wiring:** Intelligence, neurology, learning style
- **Life context:** Education, opportunities, trauma, support systems
- **Choices:** Practice, focus, priorities
- **Body:** Energy levels, health, executive function
- **Timing:** Development stage, life circumstances

### Framing Requirements

**Tool-First Language:**

✅ "Your chart contains X pattern—a tool designed for Y."
✅ "This design can show up as A, B, or C depending on the person."
✅ "The tool is elegant; how it expresses depends on your context, wiring, and choice."

**Deterministic Language to Avoid:**

❌ "You are Y."
❌ "You will be A."
❌ "This means you're naturally good at Z."

### Examples in Practice

#### Grand Air Trine

**Old Way (Problematic):**
"You're a natural communicator with brilliant strategic thinking."

**New Way (Tool-First):**
"Your chart contains a Grand Air Trine—a rare geometric pattern designed for elegant, frictionless flow of thought and expression. This can show up as natural eloquence, a gift for strategy, or a love of learning. Some people with this pattern become world-class negotiators; others excel at teaching or win every board game. Some experience it as analysis paralysis—a mind that sees too many options with such clarity it struggles to commit to any single one. The tool is architecturally brilliant; how you experience and use it depends on countless factors the chart doesn't measure."

#### Saturn Square Sun

**Old Way (Problematic):**
"You face challenges with authority and struggle with self-doubt."

**New Way (Tool-First):**
"Your chart contains a Saturn-Sun square—a pattern that creates structural friction between your sense of self and your drive for mastery. This internal pressure can show up as productive discipline, self-doubt that requires extra proof before trusting yourself, or tension with authority figures. The same geometric pattern produces different outcomes depending on your support systems and how you've learned to work with pressure. It's not a flaw—it's a design feature that requires conscious engagement."

### What This Prevents

1. **False Expectations:** Chart describes tool design, not guaranteed outcomes
2. **Ableism:** Acknowledges disabilities/neurodivergence may make "brilliant tools" feel inaccessible
3. **Determinism:** Preserves agency, choice, and power of the individual
4. **Shaming:** Clarifies that not expressing pattern in "highest form" isn't personal failing

---

## Technical Implementation

### Schema Extensions

#### Hook Object
```typescript
export interface HookObject {
  label: string;
  angle?: number;
  orb?: number;
  retrograde_involved?: boolean;
  exact?: boolean;
  // Diagnostic classification
  resonanceState?: 'WB' | 'ABE' | 'OSR';
  shadowMode?: 'translatable' | 'inverted' | 'integrated' | 'unknown';
}
```

#### Shadow Layer
```typescript
export interface ShadowLayer {
  structuralTensions?: Array<{
    aspect: string;
    orb?: number;
    mode?: 'Saturn' | 'Pluto' | 'Neptune' | 'Chiron' | 'Other';
    hypothesis?: string;
  }>;
  shadowHypothesis?: string;
  integrationStatus?: 'active' | 'O-Integration' | 'partial';
}
```

#### Enhanced Matrix
```typescript
export interface EnhancedMatrix {
  tropicalSun?: string;  // Ego Grammar
  siderealSun?: string;  // Structural Mirror
  complexArchetype?: string;  // e.g., "Tropical Leo / Sidereal Cancer"
  lensRotationTriggered?: boolean;
}
```

#### Payload Extensions
```typescript
export interface InputPayload {
  // ... existing fields ...
  shadowLayer?: ShadowLayer;
  enhancedMatrix?: EnhancedMatrix;
  toolDescription?: string;
  expressionContext?: string;
}
```

### Helper Functions

#### Shadow Layer Summary
```typescript
function buildShadowLayerSummary(shadowLayer?: ShadowLayer): string | null
```
- Returns formatted shadow pattern summary
- Handles O-Integration status
- Lists structural tensions with mode indicators

#### Tool-First Framing
```typescript
function buildToolFirstFraming(toolDescription?: string, expressionContext?: string): string | null
```
- Generates tool-first language
- Includes agency-preserving reminder
- Prevents deterministic interpretation

#### Enhanced Matrix Summary
```typescript
function buildEnhancedMatrixSummary(matrix?: EnhancedMatrix): string | null
```
- Formats dual-archetype display
- Notes Lens Rotation triggers
- Separates Ego Grammar from Structural Mirror

### Mirror Voice Integration

The `buildMirrorVoice` function now incorporates all diagnostic elements:

```typescript
function buildMirrorVoice(payload: InputPayload): string {
  // Baseline blueprint
  // + Enhanced Matrix summary (if present)
  // + Tool-First framing (if present)
  // + Weather/activation data
  // + Hooks with shadow indicators
  // + Shadow Layer summary (if present)
  // + Reflection reminder
}
```

**Output includes:**
- `⚠ inverted` tag for hooks with Symbolic Inversion
- `✓ integrated` tag for O-Integration status
- `boundary edge` marker for ABE classifications
- `non-ping` marker for OSR classifications

---

## Usage Guidelines

### When to Use Shadow Layer

**Apply when:**
- Hard aspects with tight orbs detected
- Saturn/Pluto/Neptune/Chiron prominently placed
- User reports behavioral patterns suggesting shadow activation
- Pattern hypothesis needs testing against lived experience

**Do NOT apply:**
- Preemptively without behavioral confirmation
- As predictive diagnosis
- Without explicit user permission for deep work
- If integration status is unknown

### When to Use Enhanced Matrix

**Apply when:**
- Both Tropical and Sidereal data available
- Friction between surface presentation and deeper structure suspected
- O-Integration suspected (surface patterns quiet but structure active)
- User navigating identity/purpose questions at soul level

### When to Use Tool-First Framing

**Apply when:**
- Describing archetypal potentials
- User at risk of internalizing deterministic interpretation
- Pattern could be misread as guaranteed outcome
- Agency needs explicit reinforcement

**ALWAYS apply when:**
- User expresses shame about not "living up to" chart
- Neurodivergence/disability present
- Pattern describes "brilliance," "genius," "natural talent"

---

## Quality Assurance

### Validation Checklist

When generating output with diagnostic protocols:

- [ ] SST classification assigned (WB/ABE/OSR)
- [ ] Shadow hypothesis backed by behavioral observation (FIELD → MAP → VOICE)
- [ ] Tool-first language used for archetypal descriptions
- [ ] No deterministic claims ("you are," "you will")
- [ ] Agency preserved throughout
- [ ] Integration status tracked if applicable
- [ ] Non-pings acknowledged explicitly when present
- [ ] Frontstage/Backstage separation maintained

### Ethical Constraints

**NEVER:**
- Diagnose shadow patterns without behavioral confirmation
- Use Symbolic Inversion classification lightly (requires explicit evidence)
- Frame OSR as user failure
- Present tool descriptions as identity statements
- Guarantee outcomes based on geometric elegance

**ALWAYS:**
- Honor the Behavior-First Rule
- Acknowledge map limitations
- Preserve falsifiability
- Track both hits and misses
- Offer multiple expression possibilities for any pattern

---

## See Also

- [RAVEN_OUTPUT_PROTOCOL.md](RAVEN_OUTPUT_PROTOCOL.md) - Core output construction
- [RAVEN-PERSONA-SPEC.md](RAVEN-PERSONA-SPEC.md) - Voice and persona
- [/lib/raven/sst.ts](../../lib/raven/sst.ts) - SST classification implementation
- [/lib/poetic-brain-schema.ts](../../lib/poetic-brain-schema.ts) - Extended schema definitions
- [/lib/prompts.ts](../../lib/prompts.ts) - System prompts with diagnostic protocols

---

**Maintained by:** Dan Cross (DHCross)
**Document Version:** 1.0
**Last Updated:** January 2025
**Integration Status:** ✅ Complete
