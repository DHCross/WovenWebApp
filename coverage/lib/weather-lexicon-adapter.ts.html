
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for lib/weather-lexicon-adapter.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>

<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">lib</a> weather-lexicon-adapter.ts</h1>
        <div class='clearfix'>

            <div class='fl pad1y space-right2'>
                <span class="strong">60% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>39/65</span>
            </div>


            <div class='fl pad1y space-right2'>
                <span class="strong">36.66% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>22/60</span>
            </div>


            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>12/12</span>
            </div>


            <div class='fl pad1y space-right2'>
                <span class="strong">54.54% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>30/55</span>
            </div>


        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// Maps daily indices to lexicon axes and a single scenario question for Poetic Brain
&nbsp;
export type DailyIndex = {
  date: string;
  magnitude?: number; // 0..5
  valence?: number;   // -5..5 (bounded or calibrated)
  volatility?: number; // 0..5
  sf_diff?: number;   // support-friction differential (approx)
};
&nbsp;
export type ScenarioAxis = {
  axis: 'Openness \u2194 Restriction' | 'Supported \u2194 Unsanctioned' | 'Risk \u2194 Stability' | 'Visibility \u2194 Obscurity';
  left: string;
  right: string;
  leaning: 'left' | 'right' | 'neutral';
};
&nbsp;
export type ScenarioResult = {
  axes: ScenarioAxis[];
  prompt: string; // internal question (not surfaced)
  translation: string; // reader-facing translation paragraph
};
&nbsp;
function avg(nums: number[]): number {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (!nums.length) <span class="cstat-no" title="statement not covered" >return 0;</span>
  return nums.reduce((a, b) =&gt; a + b, 0) / nums.length;
}
&nbsp;
export function indicesToScenario(indices: DailyIndex[]): ScenarioResult {
  const last3 = indices.slice(-3);
  const m = avg(last3.map(d =&gt; Number(d.magnitude ?? <span class="branch-1 cbranch-no" title="branch not covered" >0)</span>));
  const v = avg(last3.map(d =&gt; Number(d.valence ?? 0)));
  const vol = avg(last3.map(d =&gt; Number(d.volatility ?? <span class="branch-1 cbranch-no" title="branch not covered" >0)</span>));
  const sfd = avg(last3.map(d =&gt; Number(d.sf_diff ?? <span class="branch-1 cbranch-no" title="branch not covered" >0)</span>));
&nbsp;
  // Normalize thresholds (heuristic)
  const hi = (x: number, t: number) =&gt; x &gt;= t;
  const lo = (x: number, t: number) =&gt; x &lt;= t;
&nbsp;
  // Supported ↔ Unsanctioned → valence tilt
  const supportedAxis: ScenarioAxis = {
    axis: 'Supported \u2194 Unsanctioned',
    left: 'Supported',
    right: 'Unsanctioned',
    leaning: v &gt; 0.8 ? <span class="branch-0 cbranch-no" title="branch not covered" >'left' : v</span> &lt; -0.8 ? <span class="branch-0 cbranch-no" title="branch not covered" >'right' : '</span>neutral'
  };
&nbsp;
  // Risk ↔ Stability → volatility + magnitude
  const riskAxis: ScenarioAxis = {
    axis: 'Risk \u2194 Stability',
    left: 'Risk',
    right: 'Stability',
    leaning: hi(vol, 3.2) || <span class="branch-1 cbranch-no" title="branch not covered" >hi(m, 3.6) ? '</span>left' : <span class="branch-1 cbranch-no" title="branch not covered" >lo(vol, 1.2) &amp;&amp; lo(m, 1.2) ? 'right' : 'neutral'</span>
  };
&nbsp;
  // Openness ↔ Restriction → valence + sfd
  const opennessAxis: ScenarioAxis = {
    axis: 'Openness \u2194 Restriction',
    left: 'Openness',
    right: 'Restriction',
    leaning: (v - Math.max(0, -sfd)) &gt; 0.6 ? <span class="branch-0 cbranch-no" title="branch not covered" >'left' : (v</span> + Math.max(0, sfd)) &lt; -0.6 ? <span class="branch-0 cbranch-no" title="branch not covered" >'right' : '</span>neutral'
  };
&nbsp;
  // Visibility ↔ Obscurity → proxy via magnitude and low volatility
  const visibilityAxis: ScenarioAxis = {
    axis: 'Visibility \u2194 Obscurity',
    left: 'Visibility',
    right: 'Obscurity',
    leaning: hi(m, 2.2) &amp;&amp; lo(vol, 3.8) ? <span class="branch-0 cbranch-no" title="branch not covered" >'left' : l</span>o(m, 1.0) ? <span class="branch-0 cbranch-no" title="branch not covered" >'right' : '</span>neutral'
  };
&nbsp;
  const axes = [opennessAxis, supportedAxis, riskAxis, visibilityAxis];
&nbsp;
  // Pick a question based on strongest leaning (simple scoring)
  const scored = axes.map(a =&gt; ({ a, score: a.leaning === 'neutral' ? 0 : 1 + (a.axis.startsWith('Openness') ? <span class="branch-0 cbranch-no" title="branch not covered" >0.1 : 0</span>) }));
  scored.sort((x, y) =&gt; y.score - x.score);
  const top = scored[0].a;
&nbsp;
  let prompt = '';
  let translation = '';
  switch (top.axis) {
<span class="branch-0 cbranch-no" title="branch not covered" >    case 'Openness \u2194 Restriction':</span>
<span class="cstat-no" title="statement not covered" >      prompt = 'Does openness carry risk right now, or does restriction conserve something useful?';</span>
<span class="cstat-no" title="statement not covered" >      translation = buildTranslation('openness', top.leaning);</span>
<span class="cstat-no" title="statement not covered" >      break;</span>
<span class="branch-1 cbranch-no" title="branch not covered" >    case 'Supported \u2194 Unsanctioned':</span>
<span class="cstat-no" title="statement not covered" >      prompt = 'Is agency flowing with the field, or do moves meet reversal?';</span>
<span class="cstat-no" title="statement not covered" >      translation = buildTranslation('support', top.leaning);</span>
<span class="cstat-no" title="statement not covered" >      break;</span>
    case 'Risk \u2194 Stability':
      prompt = 'Is today better for exposure and testing, or for consolidation?';
      translation = buildTranslation('risk', top.leaning);
      break;
<span class="branch-3 cbranch-no" title="branch not covered" >    case 'Visibility \u2194 Obscurity':</span>
<span class="cstat-no" title="statement not covered" >      prompt = 'Will this action be seen, or does it work better offstage?';</span>
<span class="cstat-no" title="statement not covered" >      translation = buildTranslation('visibility', top.leaning);</span>
<span class="cstat-no" title="statement not covered" >      break;</span>
  }
&nbsp;
  return { axes, prompt, translation };
}
&nbsp;
function buildTranslation(kind: 'openness' | 'support' | 'risk' | 'visibility', leaning: ScenarioAxis['leaning']): string {
  switch (kind) {
<span class="branch-0 cbranch-no" title="branch not covered" >    case 'openness': {</span>
      const base = <span class="cstat-no" title="statement not covered" >'You may feel torn between sharing more of yourself and keeping things private. Openness can build trust but may also leave you exposed. Restriction safeguards your time and energy yet can create distance.';</span>
      const left = <span class="cstat-no" title="statement not covered" >'If conversations invite honesty or visibility, test what happens when you open the door a little wider.';</span>
      const right = <span class="cstat-no" title="statement not covered" >'If your day is already crowded or you sense pushback, try honoring a boundary and see whether relief arrives.';</span>
      const neutral = <span class="cstat-no" title="statement not covered" >'Track which side shows up as you move through the day—note when sharing lands well and when restraint keeps the field steady.';</span>
<span class="cstat-no" title="statement not covered" >      return `${base} ${leaning === 'left' ? left : leaning === 'right' ? right : neutral}`;</span>
    }
<span class="branch-1 cbranch-no" title="branch not covered" >    case 'support': {</span>
      const base = <span class="cstat-no" title="statement not covered" >'Today may highlight the difference between moves that feel supported and those that instantly meet resistance. Supported choices tend to receive quick yeses or natural momentum, while unsanctioned choices bump into delays or conditions.';</span>
      const left = <span class="cstat-no" title="statement not covered" >'When doors open easily, consider leaning into that lane and gather data on what the field is endorsing.';</span>
      const right = <span class="cstat-no" title="statement not covered" >'If every attempt stalls or triggers friction, pause and log it as a signal: the system may be asking for a reroute or lighter touch.';</span>
      const neutral = <span class="cstat-no" title="statement not covered" >'Notice where things glide versus where they snag—the contrast itself is valuable data.';</span>
<span class="cstat-no" title="statement not covered" >      return `${base} ${leaning === 'left' ? left : leaning === 'right' ? right : neutral}`;</span>
    }
    case 'risk': {
      const base = 'You may feel pulled between taking a chance on something new and sticking with routines that keep you grounded. Risk can catalyze growth but may unsettle logistics. Stability protects existing structures yet can leave things feeling stagnant.';
      const left = 'If sparks of excitement or urgency keep surfacing, experiment with one small, contained risk and track the fallout.';
      const right = 'If fatigue is high or systems feel brittle, favor consolidation and watch whether steadiness restores capacity.';
      const neutral = 'Check in moment to moment: when energy rises, note what a measured risk would look like; when overwhelm spikes, let stability take the lead.';
      return `${base} ${leaning === 'left' ? left : <span class="branch-1 cbranch-no" title="branch not covered" >leaning === 'right' ? right : neutral}</span>`;
    }
<span class="branch-3 cbranch-no" title="branch not covered" >    case 'visibility': {</span>
      const base = <span class="cstat-no" title="statement not covered" >'Situations may pivot between being seen and staying behind the scenes. Visibility helps your message land but also invites feedback. Working quietly preserves autonomy yet can keep progress hidden.';</span>
      const left = <span class="cstat-no" title="statement not covered" >'If invitations, questions, or spotlight moments appear, test what happens when you step forward and narrate the story yourself.';</span>
      const right = <span class="cstat-no" title="statement not covered" >'If you crave privacy or notice eyes elsewhere, treat the low profile as a window to refine things offstage.';</span>
      const neutral = <span class="cstat-no" title="statement not covered" >'Log which moments ask for voice versus which benefit from quiet build—the pattern will show you where the field is pointing.';</span>
<span class="cstat-no" title="statement not covered" >      return `${base} ${leaning === 'left' ? left : leaning === 'right' ? right : neutral}`;</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return '';</span>
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-10-24T21:29:47.188Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
