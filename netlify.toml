[[headers]]
  for = "/*"
  [headers.values]
  Content-Security-Policy = "default-src 'self' blob: filesystem:; script-src 'self' https://cdn.auth0.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https://s.gravatar.com https://cdn.auth0.com; connect-src 'self' ws: wss: https://*.auth0.com; frame-src https://*.auth0.com; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self';"

[build]
  command = "npm run build"
  environment = { CI = "false" }
  publish = ".next"
  functions = "netlify/functions"


[functions]
  node_bundler = "esbuild"
  # Increase timeout for astrology calculations (max 26s on Pro, 10s on free tier)
  # Note: This only affects Netlify Functions, not Next.js API routes
  # For Next.js routes, use route config in the file itself
  included_files = ["lib/**", "src/**", "netlify/functions/**", "data/srp/**"]



[[plugins]]
  package = "@netlify/plugin-nextjs"

[[headers]]
  for = "/dist/*"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"
  Content-Type = "text/css; charset=utf-8"
